(()=>{var Fe=Object.defineProperty,_t=Object.prototype.hasOwnProperty,xe=(e,t)=>()=>(t||(t={exports:{}},e(t.exports,t)),t.exports),He=e=>Fe(e,"__esModule",{value:!0}),Xe=(e,t)=>{He(e);for(var a in t)Fe(e,a,{get:t[a],enumerable:!0})},yt=(e,t)=>{if(He(e),typeof t=="object"||typeof t=="function")for(let a in t)!_t.call(e,a)&&a!=="default"&&Fe(e,a,{get:()=>t[a],enumerable:!0});return e},ze=e=>e&&e.__esModule?e:yt(Fe({},"default",{value:e,enumerable:!0}),e);var Ve=xe(()=>{});var Ye=xe(()=>{});var $e=xe(()=>{});var Ke=xe(()=>{});var Qe=xe(()=>{});var Oe=xe((Ee,De)=>{(function(t,a){typeof Ee=="object"&&typeof De=="object"?De.exports=a():typeof define=="function"&&define.amd?define("pdfjs-dist/build/pdf",[],a):typeof Ee=="object"?Ee["pdfjs-dist/build/pdf"]=a():t["pdfjs-dist/build/pdf"]=t.pdfjsLib=a()})(Ee,function(){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var p=t[r]={i:r,l:!1,exports:{}};return e[r].call(p.exports,p,p.exports,a),p.l=!0,p.exports}return a.m=e,a.c=t,a.d=function(r,p,_){a.o(r,p)||Object.defineProperty(r,p,{enumerable:!0,get:_})},a.r=function(r){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},a.t=function(r,p){if(p&1&&(r=a(r)),p&8)return r;if(p&4&&typeof r=="object"&&r&&r.__esModule)return r;var _=Object.create(null);if(a.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:r}),p&2&&typeof r!="string")for(var S in r)a.d(_,S,function(v){return r[v]}.bind(null,S));return _},a.n=function(r){var p=r&&r.__esModule?function(){return r.default}:function(){return r};return a.d(p,"a",p),p},a.o=function(r,p){return Object.prototype.hasOwnProperty.call(r,p)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLinkAttributes",{enumerable:!0,get:function(){return r.addLinkAttributes}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(t,"LinkTarget",{enumerable:!0,get:function(){return r.LinkTarget}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return p.build}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return p.getDocument}}),Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return p.LoopbackPort}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return p.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return p.PDFWorker}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return p.version}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return _.CMapCompressionType}}),Object.defineProperty(t,"createObjectURL",{enumerable:!0,get:function(){return _.createObjectURL}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return _.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return _.createValidAbsoluteUrl}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return _.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return _.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return _.OPS}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return _.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return _.PermissionFlag}}),Object.defineProperty(t,"removeNullCharacters",{enumerable:!0,get:function(){return _.removeNullCharacters}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return _.shadow}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return _.UnexpectedResponseException}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return _.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return _.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return _.VerbosityLevel}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return S.AnnotationLayer}}),Object.defineProperty(t,"apiCompatibilityParams",{enumerable:!0,get:function(){return v.apiCompatibilityParams}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return c.GlobalWorkerOptions}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return h.renderTextLayer}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return m.SVGGraphics}});var r=a(1),p=a(5),_=a(2),S=a(16),v=a(7),c=a(10),h=a(17),m=a(18);const E="2.5.207",d="0974d605";{const{isNodeJS:T}=a(4);if(T){const C=a(19).PDFNodeStream;(0,p.setPDFNetworkStreamFactory)(D=>new C(D))}else{const C=a(22).PDFNetworkStream;let D;(0,r.isFetchSupported)()&&(D=a(23).PDFFetchStream),(0,p.setPDFNetworkStreamFactory)(j=>D&&(0,r.isValidFetchUrl)(j.url)?new D(j):new C(j))}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLinkAttributes=d,t.getFilenameFromUrl=T,t.isFetchSupported=D,t.isValidFetchUrl=j,t.loadScript=w,t.deprecated=G,t.PDFDateString=t.StatTimer=t.DOMSVGFactory=t.DOMCMapReaderFactory=t.DOMCanvasFactory=t.DEFAULT_LINK_REL=t.LinkTarget=t.RenderingCancelledException=t.PageViewport=void 0;var r=a(2);const p="noopener noreferrer nofollow";t.DEFAULT_LINK_REL=p;const _="http://www.w3.org/2000/svg";class S{create(n,s){if(n<=0||s<=0)throw new Error("Invalid canvas size");const u=document.createElement("canvas"),b=u.getContext("2d");return u.width=n,u.height=s,{canvas:u,context:b}}reset(n,s,u){if(!n.canvas)throw new Error("Canvas is not specified");if(s<=0||u<=0)throw new Error("Invalid canvas size");n.canvas.width=s,n.canvas.height=u}destroy(n){if(!n.canvas)throw new Error("Canvas is not specified");n.canvas.width=0,n.canvas.height=0,n.canvas=null,n.context=null}}t.DOMCanvasFactory=S;class v{constructor({baseUrl:n=null,isCompressed:s=!1}){this.baseUrl=n,this.isCompressed=s}async fetch({name:n}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!n)throw new Error("CMap name must be specified.");const s=this.baseUrl+n+(this.isCompressed?".bcmap":""),u=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return D()&&j(s,document.baseURI)?fetch(s).then(async b=>{if(!b.ok)throw new Error(b.statusText);let f;return this.isCompressed?f=new Uint8Array(await b.arrayBuffer()):f=(0,r.stringToBytes)(await b.text()),{cMapData:f,compressionType:u}}).catch(b=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${s}`)}):new Promise((b,f)=>{const N=new XMLHttpRequest;N.open("GET",s,!0),this.isCompressed&&(N.responseType="arraybuffer"),N.onreadystatechange=()=>{if(N.readyState!==XMLHttpRequest.DONE)return;if(N.status===200||N.status===0){let k;if(this.isCompressed&&N.response?k=new Uint8Array(N.response):!this.isCompressed&&N.responseText&&(k=(0,r.stringToBytes)(N.responseText)),k){b({cMapData:k,compressionType:u});return}}f(new Error(N.statusText))},N.send(null)}).catch(b=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${s}`)})}}t.DOMCMapReaderFactory=v;class c{create(n,s){(0,r.assert)(n>0&&s>0,"Invalid SVG dimensions");const u=document.createElementNS(_,"svg:svg");return u.setAttribute("version","1.1"),u.setAttribute("width",n+"px"),u.setAttribute("height",s+"px"),u.setAttribute("preserveAspectRatio","none"),u.setAttribute("viewBox","0 0 "+n+" "+s),u}createElement(n){return(0,r.assert)(typeof n=="string","Invalid SVG element type"),document.createElementNS(_,n)}}t.DOMSVGFactory=c;class h{constructor({viewBox:n,scale:s,rotation:u,offsetX:b=0,offsetY:f=0,dontFlip:N=!1}){this.viewBox=n,this.scale=s,this.rotation=u,this.offsetX=b,this.offsetY=f;const k=(n[2]+n[0])/2,W=(n[3]+n[1])/2;let U,L,X,i;u=u%360,u=u<0?u+360:u;switch(u){case 180:U=-1,L=0,X=0,i=1;break;case 90:U=0,L=1,X=1,i=0;break;case 270:U=0,L=-1,X=-1,i=0;break;case 0:U=1,L=0,X=0,i=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}N&&(X=-X,i=-i);let g,P,y,o;U===0?(g=Math.abs(W-n[1])*s+b,P=Math.abs(k-n[0])*s+f,y=Math.abs(n[3]-n[1])*s,o=Math.abs(n[2]-n[0])*s):(g=Math.abs(k-n[0])*s+b,P=Math.abs(W-n[1])*s+f,y=Math.abs(n[2]-n[0])*s,o=Math.abs(n[3]-n[1])*s),this.transform=[U*s,L*s,X*s,i*s,g-U*s*k-X*s*W,P-L*s*k-i*s*W],this.width=y,this.height=o}clone({scale:n=this.scale,rotation:s=this.rotation,offsetX:u=this.offsetX,offsetY:b=this.offsetY,dontFlip:f=!1}={}){return new h({viewBox:this.viewBox.slice(),scale:n,rotation:s,offsetX:u,offsetY:b,dontFlip:f})}convertToViewportPoint(n,s){return r.Util.applyTransform([n,s],this.transform)}convertToViewportRectangle(n){const s=r.Util.applyTransform([n[0],n[1]],this.transform),u=r.Util.applyTransform([n[2],n[3]],this.transform);return[s[0],s[1],u[0],u[1]]}convertToPdfPoint(n,s){return r.Util.applyInverseTransform([n,s],this.transform)}}t.PageViewport=h;class m extends r.BaseException{constructor(n,s){super(n);this.type=s}}t.RenderingCancelledException=m;const E={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};t.LinkTarget=E;function d(n,{url:s,target:u,rel:b,enabled:f=!0}={}){(0,r.assert)(s&&typeof s=="string",'addLinkAttributes: A valid "url" parameter must provided.');const N=(0,r.removeNullCharacters)(s);f?n.href=n.title=N:(n.href="",n.title=`Disabled: ${N}`,n.onclick=()=>!1);let k="";switch(u){case E.NONE:break;case E.SELF:k="_self";break;case E.BLANK:k="_blank";break;case E.PARENT:k="_parent";break;case E.TOP:k="_top";break}n.target=k,n.rel=typeof b=="string"?b:p}function T(n){const s=n.indexOf("#"),u=n.indexOf("?"),b=Math.min(s>0?s:n.length,u>0?u:n.length);return n.substring(n.lastIndexOf("/",b)+1,b)}class C{constructor(){this.started=Object.create(null),this.times=[]}time(n){n in this.started&&(0,r.warn)(`Timer is already running for ${n}`),this.started[n]=Date.now()}timeEnd(n){n in this.started||(0,r.warn)(`Timer has not been started for ${n}`),this.times.push({name:n,start:this.started[n],end:Date.now()}),delete this.started[n]}toString(){const n=[];let s=0;for(const u of this.times){const b=u.name;b.length>s&&(s=b.length)}for(const u of this.times){const b=u.end-u.start;n.push(`${u.name.padEnd(s)} ${b}ms
`)}return n.join("")}}t.StatTimer=C;function D(){return typeof fetch!="undefined"&&typeof Response!="undefined"&&"body"in Response.prototype&&typeof ReadableStream!="undefined"}function j(n,s){try{const{protocol:u}=s?new URL(n,s):new URL(n);return u==="http:"||u==="https:"}catch(u){return!1}}function w(n){return new Promise((s,u)=>{const b=document.createElement("script");b.src=n,b.onload=s,b.onerror=function(){u(new Error(`Cannot load script at: ${b.src}`))},(document.head||document.documentElement).appendChild(b)})}function G(n){console.log("Deprecated API usage: "+n)}let x;class A{static toDateObject(n){if(!n||!(0,r.isString)(n))return null;x||(x=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const s=x.exec(n);if(!s)return null;const u=parseInt(s[1],10);let b=parseInt(s[2],10);b=b>=1&&b<=12?b-1:0;let f=parseInt(s[3],10);f=f>=1&&f<=31?f:1;let N=parseInt(s[4],10);N=N>=0&&N<=23?N:0;let k=parseInt(s[5],10);k=k>=0&&k<=59?k:0;let W=parseInt(s[6],10);W=W>=0&&W<=59?W:0;const U=s[7]||"Z";let L=parseInt(s[8],10);L=L>=0&&L<=23?L:0;let X=parseInt(s[9],10)||0;return X=X>=0&&X<=59?X:0,U==="-"?(N+=L,k+=X):U==="+"&&(N-=L,k-=X),new Date(Date.UTC(u,b,f,N,k,W))}}t.PDFDateString=A},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayByteLength=V,t.arraysToBytes=$,t.assert=U,t.bytesToString=z,t.createPromiseCapability=ke,t.getVerbosityLevel=f,t.info=N,t.isArrayBuffer=be,t.isArrayEqual=ye,t.isBool=Ce,t.isEmptyObj=_e,t.isNum=ge,t.isString=ue,t.isSameOrigin=L,t.createValidAbsoluteUrl=i,t.removeNullCharacters=H,t.setVerbosityLevel=b,t.shadow=g,t.string32=K,t.stringToBytes=Y,t.stringToPDFString=ae,t.stringToUTF8String=le,t.utf8StringToString=fe,t.warn=k,t.unreachable=W,t.IsEvalSupportedCached=t.IsLittleEndianCached=t.createObjectURL=t.FormatError=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.StreamType=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.MissingPDFException=t.InvalidPDFException=t.AbortException=t.CMapCompressionType=t.ImageKind=t.FontType=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationBorderStyleType=t.UNSUPPORTED_FEATURES=t.VerbosityLevel=t.OPS=t.IDENTITY_MATRIX=t.FONT_IDENTITY_MATRIX=t.BaseException=void 0,a(3);const r=[1,0,0,1,0,0];t.IDENTITY_MATRIX=r;const p=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=p;const _={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=_;const S={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=S;const v={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=v;const c={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=c;const h={MARKED:"Marked",REVIEW:"Review"};t.AnnotationStateModelType=h;const m={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationMarkedState=m;const E={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReviewState=E;const d={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=d;const T={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=T;const C={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=C;const D={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=D;const j={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};t.StreamType=j;const w={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};t.FontType=w;const G={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=G;const x={NONE:0,BINARY:1,STREAM:2};t.CMapCompressionType=x;const A={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=A;const n={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontGetPath:"errorFontGetPath"};t.UNSUPPORTED_FEATURES=n;const s={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=s;let u=G.WARNINGS;function b(F){Number.isInteger(F)&&(u=F)}function f(){return u}function N(F){u>=G.INFOS&&console.log(`Info: ${F}`)}function k(F){u>=G.WARNINGS&&console.log(`Warning: ${F}`)}function W(F){throw new Error(F)}function U(F,q){F||W(q)}function L(F,q){let J;try{if(J=new URL(F),!J.origin||J.origin==="null")return!1}catch(re){return!1}const Z=new URL(q,J);return J.origin===Z.origin}function X(F){if(!F)return!1;switch(F.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function i(F,q){if(!F)return null;try{const J=q?new URL(F,q):new URL(F);if(X(J))return J}catch(J){}return null}function g(F,q,J){return Object.defineProperty(F,q,{value:J,enumerable:!0,configurable:!0,writable:!1}),J}const P=function(){function q(J){this.constructor===q&&W("Cannot initialize BaseException."),this.message=J,this.name=this.constructor.name}return q.prototype=new Error,q.constructor=q,q}();t.BaseException=P;class y extends P{constructor(F,q){super(F);this.code=q}}t.PasswordException=y;class o extends P{constructor(F,q){super(F);this.details=q}}t.UnknownErrorException=o;class l extends P{}t.InvalidPDFException=l;class R extends P{}t.MissingPDFException=R;class I extends P{constructor(F,q){super(F);this.status=q}}t.UnexpectedResponseException=I;class M extends P{}t.FormatError=M;class O extends P{}t.AbortException=O;const B=/\x00/g;function H(F){return typeof F!="string"?(k("The argument for removeNullCharacters must be a string."),F):F.replace(B,"")}function z(F){U(F!==null&&typeof F=="object"&&F.length!==void 0,"Invalid argument for bytesToString");const q=F.length,J=8192;if(q<J)return String.fromCharCode.apply(null,F);const Z=[];for(let re=0;re<q;re+=J){const se=Math.min(re+J,q),he=F.subarray(re,se);Z.push(String.fromCharCode.apply(null,he))}return Z.join("")}function Y(F){U(typeof F=="string","Invalid argument for stringToBytes");const q=F.length,J=new Uint8Array(q);for(let Z=0;Z<q;++Z)J[Z]=F.charCodeAt(Z)&255;return J}function V(F){return F.length!==void 0?F.length:(U(F.byteLength!==void 0,"arrayByteLength - invalid argument."),F.byteLength)}function $(F){const q=F.length;if(q===1&&F[0]instanceof Uint8Array)return F[0];let J=0;for(let se=0;se<q;se++)J+=V(F[se]);let Z=0;const re=new Uint8Array(J);for(let se=0;se<q;se++){let he=F[se];he instanceof Uint8Array||(typeof he=="string"?he=Y(he):he=new Uint8Array(he));const de=he.byteLength;re.set(he,Z),Z+=de}return re}function K(F){return String.fromCharCode(F>>24&255,F>>16&255,F>>8&255,F&255)}function ee(){const F=new Uint8Array(4);F[0]=1;const q=new Uint32Array(F.buffer,0,1);return q[0]===1}const Q={get value(){return g(this,"value",ee())}};t.IsLittleEndianCached=Q;function te(){try{return new Function(""),!0}catch(F){return!1}}const ne={get value(){return g(this,"value",te())}};t.IsEvalSupportedCached=ne;const oe=["rgb(",0,",",0,",",0,")"];class ie{static makeCssRgb(F,q,J){return oe[1]=F,oe[3]=q,oe[5]=J,oe.join("")}static transform(F,q){return[F[0]*q[0]+F[2]*q[1],F[1]*q[0]+F[3]*q[1],F[0]*q[2]+F[2]*q[3],F[1]*q[2]+F[3]*q[3],F[0]*q[4]+F[2]*q[5]+F[4],F[1]*q[4]+F[3]*q[5]+F[5]]}static applyTransform(F,q){const J=F[0]*q[0]+F[1]*q[2]+q[4],Z=F[0]*q[1]+F[1]*q[3]+q[5];return[J,Z]}static applyInverseTransform(F,q){const J=q[0]*q[3]-q[1]*q[2],Z=(F[0]*q[3]-F[1]*q[2]+q[2]*q[5]-q[4]*q[3])/J,re=(-F[0]*q[1]+F[1]*q[0]+q[4]*q[1]-q[5]*q[0])/J;return[Z,re]}static getAxialAlignedBoundingBox(F,q){const J=ie.applyTransform(F,q),Z=ie.applyTransform(F.slice(2,4),q),re=ie.applyTransform([F[0],F[3]],q),se=ie.applyTransform([F[2],F[1]],q);return[Math.min(J[0],Z[0],re[0],se[0]),Math.min(J[1],Z[1],re[1],se[1]),Math.max(J[0],Z[0],re[0],se[0]),Math.max(J[1],Z[1],re[1],se[1])]}static inverseTransform(F){const q=F[0]*F[3]-F[1]*F[2];return[F[3]/q,-F[1]/q,-F[2]/q,F[0]/q,(F[2]*F[5]-F[4]*F[3])/q,(F[4]*F[1]-F[5]*F[0])/q]}static apply3dTransform(F,q){return[F[0]*q[0]+F[1]*q[1]+F[2]*q[2],F[3]*q[0]+F[4]*q[1]+F[5]*q[2],F[6]*q[0]+F[7]*q[1]+F[8]*q[2]]}static singularValueDecompose2dScale(F){const q=[F[0],F[2],F[1],F[3]],J=F[0]*q[0]+F[1]*q[2],Z=F[0]*q[1]+F[1]*q[3],re=F[2]*q[0]+F[3]*q[2],se=F[2]*q[1]+F[3]*q[3],he=(J+se)/2,de=Math.sqrt((J+se)*(J+se)-4*(J*se-re*Z))/2,Te=he+de||1,Pe=he-de||1;return[Math.sqrt(Te),Math.sqrt(Pe)]}static normalizeRect(F){const q=F.slice(0);return F[0]>F[2]&&(q[0]=F[2],q[2]=F[0]),F[1]>F[3]&&(q[1]=F[3],q[3]=F[1]),q}static intersect(F,q){function J(he,de){return he-de}const Z=[F[0],F[2],q[0],q[2]].sort(J),re=[F[1],F[3],q[1],q[3]].sort(J),se=[];if(F=ie.normalizeRect(F),q=ie.normalizeRect(q),Z[0]===F[0]&&Z[1]===q[0]||Z[0]===q[0]&&Z[1]===F[0])se[0]=Z[1],se[2]=Z[2];else return null;if(re[0]===F[1]&&re[1]===q[1]||re[0]===q[1]&&re[1]===F[1])se[1]=re[1],se[3]=re[2];else return null;return se}}t.Util=ie;const ce=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ae(F){const q=F.length,J=[];if(F[0]==="þ"&&F[1]==="ÿ")for(let Z=2;Z<q;Z+=2)J.push(String.fromCharCode(F.charCodeAt(Z)<<8|F.charCodeAt(Z+1)));else if(F[0]==="ÿ"&&F[1]==="þ")for(let Z=2;Z<q;Z+=2)J.push(String.fromCharCode(F.charCodeAt(Z+1)<<8|F.charCodeAt(Z)));else for(let Z=0;Z<q;++Z){const re=ce[F.charCodeAt(Z)];J.push(re?String.fromCharCode(re):F.charAt(Z))}return J.join("")}function le(F){return decodeURIComponent(escape(F))}function fe(F){return unescape(encodeURIComponent(F))}function _e(F){for(const q in F)return!1;return!0}function Ce(F){return typeof F=="boolean"}function ge(F){return typeof F=="number"}function ue(F){return typeof F=="string"}function be(F){return typeof F=="object"&&F!==null&&F.byteLength!==void 0}function ye(F,q){return F.length!==q.length?!1:F.every(function(J,Z){return J===q[Z]})}function ke(){const F=Object.create(null);let q=!1;return Object.defineProperty(F,"settled",{get(){return q}}),F.promise=new Promise(function(J,Z){F.resolve=function(re){q=!0,J(re)},F.reject=function(re){q=!0,Z(re)}}),F}const we=function(){const q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(Z,re,se=!1){if(!se&&URL.createObjectURL){const de=new Blob([Z],{type:re});return URL.createObjectURL(de)}let he=`data:${re};base64,`;for(let de=0,Te=Z.length;de<Te;de+=3){const Pe=Z[de]&255,We=Z[de+1]&255,Be=Z[de+2]&255,gt=Pe>>2,vt=(Pe&3)<<4|We>>4,At=de+1<Te?(We&15)<<2|Be>>6:64,bt=de+2<Te?Be&63:64;he+=q[gt]+q[vt]+q[At]+q[bt]}return he}}();t.createObjectURL=we},function(e,t,a){"use strict";var r=a(4)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const r=typeof process=="object"&&process+""==="[object process]"&&!process.versions.nw&&!process.versions.electron;t.isNodeJS=r},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.build=exports.version=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFWorker=exports.PDFDataRangeTransport=exports.LoopbackPort=void 0;var _util=__w_pdfjs_require__(2),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(6),_api_compatibility=__w_pdfjs_require__(7),_canvas=__w_pdfjs_require__(8),_worker_options=__w_pdfjs_require__(10),_is_node=__w_pdfjs_require__(4),_message_handler=__w_pdfjs_require__(11),_metadata=__w_pdfjs_require__(12),_transport_stream=__w_pdfjs_require__(14),_webgl=__w_pdfjs_require__(15);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let createPDFNetworkStream;function setPDFNetworkStreamFactory(e){createPDFNetworkStream=e}function getDocument(e){const t=new PDFDocumentLoadingTask;let a;if(typeof e=="string")a={url:e};else if((0,_util.isArrayBuffer)(e))a={data:e};else if(e instanceof PDFDataRangeTransport)a={range:e};else{if(typeof e!="object")throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");a=e}const r=Object.create(null);let p=null,_=null;for(const v in a){if(v==="url"&&typeof window!="undefined"){r[v]=new URL(a[v],window.location).href;continue}else if(v==="range"){p=a[v];continue}else if(v==="worker"){_=a[v];continue}else if(v==="data"&&!(a[v]instanceof Uint8Array)){const c=a[v];if(typeof c=="string")r[v]=(0,_util.stringToBytes)(c);else if(typeof c=="object"&&c!==null&&!isNaN(c.length))r[v]=new Uint8Array(c);else if((0,_util.isArrayBuffer)(c))r[v]=new Uint8Array(c);else throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");continue}r[v]=a[v]}if(r.rangeChunkSize=r.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,r.CMapReaderFactory=r.CMapReaderFactory||_display_utils.DOMCMapReaderFactory,r.ignoreErrors=r.stopAtErrors!==!0,r.fontExtraProperties=r.fontExtraProperties===!0,r.pdfBug=r.pdfBug===!0,Number.isInteger(r.maxImageSize)||(r.maxImageSize=-1),typeof r.isEvalSupported!="boolean"&&(r.isEvalSupported=!0),typeof r.disableFontFace!="boolean"&&(r.disableFontFace=_api_compatibility.apiCompatibilityParams.disableFontFace||!1),typeof r.disableRange!="boolean"&&(r.disableRange=!1),typeof r.disableStream!="boolean"&&(r.disableStream=!1),typeof r.disableAutoFetch!="boolean"&&(r.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(r.verbosity),!_){const v={verbosity:r.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};_=v.port?PDFWorker.fromPort(v):new PDFWorker(v),t._worker=_}const S=t.docId;return _.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");const v=_fetchDocument(_,r,p,S),c=new Promise(function(h){let m;p?m=new _transport_stream.PDFDataTransportStream({length:r.length,initialData:r.initialData,progressiveDone:r.progressiveDone,disableRange:r.disableRange,disableStream:r.disableStream},p):r.data||(m=createPDFNetworkStream({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream})),h(m)});return Promise.all([v,c]).then(function([h,m]){if(t.destroyed)throw new Error("Loading aborted");const E=new _message_handler.MessageHandler(S,h,_.port);E.postMessageTransfers=_.postMessageTransfers;const d=new WorkerTransport(E,t,m,r);t._transport=d,E.send("Ready",null)})}).catch(t._capability.reject),t}function _fetchDocument(e,t,a,r){return e.destroyed?Promise.reject(new Error("Worker was destroyed")):(a&&(t.length=a.length,t.initialData=a.initialData,t.progressiveDone=a.progressiveDone),e.messageHandler.sendWithPromise("GetDocRequest",{docId:r,apiVersion:"2.5.207",source:{data:t.data,url:t.url,password:t.password,disableAutoFetch:t.disableAutoFetch,rangeChunkSize:t.rangeChunkSize,length:t.length},maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,postMessageTransfers:e.postMessageTransfers,docBaseUrl:t.docBaseUrl,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported,fontExtraProperties:t.fontExtraProperties}).then(function(p){if(e.destroyed)throw new Error("Worker was destroyed");return p}))}const PDFDocumentLoadingTask=function(){let t=0;class a{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+t++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){this.destroyed=!0;const r=this._transport?this._transport.destroy():Promise.resolve();return r.then(()=>{this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}}return a}();class PDFDataRangeTransport{constructor(e,t,a=!1){this.length=e,this.initialData=t,this.progressiveDone=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const a of this._rangeListeners)a(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const a of this._progressListeners)a(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,t){this._pdfInfo=e,this._transport=t}get numPages(){return this._pdfInfo.numPages}get fingerprint(){return this._pdfInfo.fingerprint}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getOpenActionDestination(){return(0,_display_utils.deprecated)("getOpenActionDestination, use getOpenAction instead."),this.getOpenAction().then(function(e){return e&&e.dest?e.dest:null})}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getOutline(){return this._transport.getOutline()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}getStats(){return this._transport.getStats()}cleanup(){return this._transport.startCleanup()}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,t,a,r=!1){this._pageIndex=e,this._pageInfo=t,this._transport=a,this._stats=r?new _display_utils.StatTimer:null,this._pdfBug=r,this.commonObjs=a.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this.intentStates=Object.create(null),this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:a=0,offsetY:r=0,dontFlip:p=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:t,offsetX:a,offsetY:r,dontFlip:p})}getAnnotations({intent:e=null}={}){return(!this.annotationsPromise||this.annotationsIntent!==e)&&(this.annotationsPromise=this._transport.getAnnotations(this._pageIndex,e),this.annotationsIntent=e),this.annotationsPromise}render({canvasContext:e,viewport:t,intent:a="display",enableWebGL:r=!1,renderInteractiveForms:p=!1,transform:_=null,imageLayer:S=null,canvasFactory:v=null,background:c=null}){this._stats&&this._stats.time("Overall");const h=a==="print"?"print":"display";this.pendingCleanup=!1,this.intentStates[h]||(this.intentStates[h]=Object.create(null));const m=this.intentStates[h];m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const E=v||new _display_utils.DOMCanvasFactory,d=new _webgl.WebGLContext({enable:r});m.displayReadyCapability||(m.displayReadyCapability=(0,_util.createPromiseCapability)(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:h,renderInteractiveForms:p===!0}));const T=j=>{const w=m.renderTasks.indexOf(C);w>=0&&m.renderTasks.splice(w,1),(this.cleanupAfterRender||h==="print")&&(this.pendingCleanup=!0),this._tryCleanup(),j?(C.capability.reject(j),this._abortOperatorList({intentState:m,reason:j})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},C=new InternalRenderTask({callback:T,params:{canvasContext:e,viewport:t,transform:_,imageLayer:S,background:c},objs:this.objs,commonObjs:this.commonObjs,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:E,webGLContext:d,useRequestAnimationFrame:h!=="print",pdfBug:this._pdfBug});m.renderTasks||(m.renderTasks=[]),m.renderTasks.push(C);const D=C.task;return m.displayReadyCapability.promise.then(j=>{if(this.pendingCleanup){T();return}this._stats&&this._stats.time("Rendering"),C.initializeGraphics(j),C.operatorListChanged()}).catch(T),D}getOperatorList(){function e(){if(a.operatorList.lastChunk){a.opListReadCapability.resolve(a.operatorList);const p=a.renderTasks.indexOf(r);p>=0&&a.renderTasks.splice(p,1)}}const t="oplist";this.intentStates[t]||(this.intentStates[t]=Object.create(null));const a=this.intentStates[t];let r;return a.opListReadCapability||(r={},r.operatorListChanged=e,a.opListReadCapability=(0,_util.createPromiseCapability)(),a.renderTasks=[],a.renderTasks.push(r),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:t})),a.opListReadCapability.promise}streamTextContent({normalizeWhitespace:e=!1,disableCombineTextItems:t=!1}={}){const a=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:e===!0,combineTextItems:t!==!0},{highWaterMark:a,size(r){return r.items.length}})}getTextContent(e={}){const t=this.streamTextContent(e);return new Promise(function(a,r){function p(){_.read().then(function({value:v,done:c}){if(c){a(S);return}Object.assign(S.styles,v.styles),S.items.push(...v.items),p()},r)}const _=t.getReader(),S={items:[],styles:Object.create(null)};p()})}_destroy(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;const e=[];return Object.keys(this.intentStates).forEach(t=>{const a=this.intentStates[t];if(this._abortOperatorList({intentState:a,reason:new Error("Page was destroyed."),force:!0}),t==="oplist")return;a.renderTasks.forEach(function(r){const p=r.capability.promise.catch(function(){});e.push(p),r.cancel()})}),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(e)}cleanup(e=!1){return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(e=!1){return!this.pendingCleanup||Object.keys(this.intentStates).some(t=>{const a=this.intentStates[t];return a.renderTasks.length!==0||!a.operatorList.lastChunk})?!1:(Object.keys(this.intentStates).forEach(t=>{delete this.intentStates[t]}),this.objs.clear(),this.annotationsPromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0)}_startRenderPage(e,t){const a=this.intentStates[t];if(!a)return;this._stats&&this._stats.timeEnd("Page Request"),a.displayReadyCapability&&a.displayReadyCapability.resolve(e)}_renderPageChunk(e,t){for(let a=0,r=e.length;a<r;a++)t.operatorList.fnArray.push(e.fnArray[a]),t.operatorList.argsArray.push(e.argsArray[a]);t.operatorList.lastChunk=e.lastChunk;for(let a=0;a<t.renderTasks.length;a++)t.renderTasks[a].operatorListChanged();e.lastChunk&&this._tryCleanup()}_pumpOperatorList(e){(0,_util.assert)(e.intent,'PDFPageProxy._pumpOperatorList: Expected "intent" argument.');const t=this._transport.messageHandler.sendWithStream("GetOperatorList",e),a=t.getReader(),r=this.intentStates[e.intent];r.streamReader=a;const p=()=>{a.read().then(({value:_,done:S})=>{if(S){r.streamReader=null;return}if(this._transport.destroyed)return;this._renderPageChunk(_,r),p()},_=>{if(r.streamReader=null,this._transport.destroyed)return;if(r.operatorList){r.operatorList.lastChunk=!0;for(let S=0;S<r.renderTasks.length;S++)r.renderTasks[S].operatorListChanged();this._tryCleanup()}if(r.displayReadyCapability)r.displayReadyCapability.reject(_);else if(r.opListReadCapability)r.opListReadCapability.reject(_);else throw _})};p()}_abortOperatorList({intentState:e,reason:t,force:a=!1}){if((0,_util.assert)(t instanceof Error||typeof t=="object"&&t!==null,'PDFPageProxy._abortOperatorList: Expected "reason" argument.'),!e.streamReader)return;if(!a){if(e.renderTasks.length!==0)return;if(t instanceof _display_utils.RenderingCancelledException){e.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:e,reason:t,force:!0}),e.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(e.streamReader.cancel(new _util.AbortException(t&&t.message)),e.streamReader=null,this._transport.destroyed)return;Object.keys(this.intentStates).some(r=>this.intentStates[r]===e?(delete this.intentStates[r],!0):!1),this.cleanup()}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(e=!0){this._listeners=[],this._defer=e,this._deferred=Promise.resolve(void 0)}postMessage(e,t){function a(_){if(typeof _!="object"||_===null)return _;if(r.has(_))return r.get(_);let S,v;if((S=_.buffer)&&(0,_util.isArrayBuffer)(S)){const c=t&&t.includes(S);return c?v=new _.constructor(S,_.byteOffset,_.byteLength):v=new _.constructor(_),r.set(_,v),v}v=Array.isArray(_)?[]:{},r.set(_,v);for(const c in _){let h,m=_;for(;!(h=Object.getOwnPropertyDescriptor(m,c));)m=Object.getPrototypeOf(m);if(typeof h.value=="undefined")continue;if(typeof h.value=="function"){if(_.hasOwnProperty&&_.hasOwnProperty(c))throw new Error(`LoopbackPort.postMessage - cannot clone: ${_[c]}`);continue}v[c]=a(h.value)}return v}if(!this._defer){this._listeners.forEach(_=>{_.call(this,{data:e})});return}const r=new WeakMap,p={data:a(e)};this._deferred.then(()=>{this._listeners.forEach(_=>{_.call(this,p)})})}addEventListener(e,t){this._listeners.push(t)}removeEventListener(e,t){const a=this._listeners.indexOf(t);this._listeners.splice(a,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorker=function(){const pdfWorkerPorts=new WeakMap;let isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS&&!0)isWorkerDisabled=!0,fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"&&"currentScript"in document){const e=document.currentScript&&document.currentScript.src;e&&(fallbackWorkerSrc=e.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}function getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(typeof fallbackWorkerSrc!="undefined")return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function getMainThreadWorkerMessageHandler(){let e;try{e=globalThis.pdfjsWorker&&globalThis.pdfjsWorker.WorkerMessageHandler}catch(t){}return e||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability)return fakeWorkerCapability.promise;fakeWorkerCapability=(0,_util.createPromiseCapability)();const loader=async function(){const mainWorkerMessageHandler=getMainThreadWorkerMessageHandler();if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&!0){const worker=eval("require")(getWorkerSrc());return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(getWorkerSrc()),window.pdfjsWorker.WorkerMessageHandler};return loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject),fakeWorkerCapability.promise}function createCDNWrapper(e){const t="importScripts('"+e+"');";return URL.createObjectURL(new Blob([t]))}class PDFWorker{constructor({name:e=null,port:t=null,verbosity:a=(0,_util.getVerbosityLevel)()}={}){if(t&&pdfWorkerPorts.has(t))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=e,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=a,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,t){pdfWorkerPorts.set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker!="undefined"&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){let e=getWorkerSrc();try{(0,_util.isSameOrigin)(window.location.href,e)||(e=createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e),a=new _message_handler.MessageHandler("main","worker",t),r=()=>{t.removeEventListener("error",p),a.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},p=()=>{this._webWorker||r()};t.addEventListener("error",p),a.on("test",S=>{if(t.removeEventListener("error",p),this.destroyed){r();return}S?(this._messageHandler=a,this._port=t,this._webWorker=t,S.supportTransfers||(this.postMessageTransfers=!1),this._readyCapability.resolve(),a.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),a.destroy(),t.terminate())}),a.on("ready",S=>{if(t.removeEventListener("error",p),this.destroyed){r();return}try{_()}catch(v){this._setupFakeWorker()}});const _=()=>{const S=new Uint8Array([this.postMessageTransfers?255:0]);try{a.send("test",S,[S.buffer])}catch(v){(0,_util.warn)("Cannot use postMessage transfers."),S[0]=0,a.send("test",S)}};_();return}catch(t){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),isWorkerDisabled=!0),setupFakeWorkerGlobal().then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new LoopbackPort;this._port=t;const a="fake"+nextFakeWorkerId++,r=new _message_handler.MessageHandler(a+"_worker",a,t);e.setup(r,t);const p=new _message_handler.MessageHandler(a,a+"_worker",t);this._messageHandler=p,this._readyCapability.resolve(),p.send("configure",{verbosity:this.verbosity})}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pdfWorkerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pdfWorkerPorts.has(e.port)?pdfWorkerPorts.get(e.port):new PDFWorker(e)}static getWorkerSrc(){return getWorkerSrc()}}return PDFWorker}();exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(e,t,a,r){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:t.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this)}),this._params=r,this.CMapReaderFactory=new r.CMapReaderFactory({baseUrl:r.cMapUrl,isCompressed:r.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=a,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];this.pageCache.forEach(function(a){a&&e.push(a._destroy())}),this.pageCache.length=0,this.pagePromises.length=0;const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.fontLoader.clear(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(a,r)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=p=>{this._lastProgress={loaded:p.loaded,total:p.total}},r.onPull=()=>{this._fullReader.read().then(function({value:p,done:_}){if(_){r.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(p),"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(p),1,[p])}).catch(p=>{r.error(p)})},r.onCancel=p=>{this._fullReader.cancel(p)}}),e.on("ReaderHeadersReady",a=>{const r=(0,_util.createPromiseCapability)(),p=this._fullReader;return p.headersReady.then(()=>{(!p.isStreamingSupported||!p.isRangeSupported)&&(this._lastProgress&&t.onProgress&&t.onProgress(this._lastProgress),p.onProgress=_=>{t.onProgress&&t.onProgress({loaded:_.loaded,total:_.total})}),r.resolve({isStreamingSupported:p.isStreamingSupported,isRangeSupported:p.isRangeSupported,contentLength:p.contentLength})},r.reject),r.promise}),e.on("GetRangeReader",(a,r)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const p=this._networkStream.getRangeReader(a.begin,a.end);if(!p){r.close();return}r.onPull=()=>{p.read().then(function({value:_,done:S}){if(S){r.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(_),"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(_),1,[_])}).catch(_=>{r.error(_)})},r.onCancel=_=>{p.cancel(_)}}),e.on("GetDoc",({pdfInfo:a})=>{this._numPages=a.numPages,t._capability.resolve(new PDFDocumentProxy(a,this))}),e.on("DocException",function(a){let r;switch(a.name){case"PasswordException":r=new _util.PasswordException(a.message,a.code);break;case"InvalidPDFException":r=new _util.InvalidPDFException(a.message);break;case"MissingPDFException":r=new _util.MissingPDFException(a.message);break;case"UnexpectedResponseException":r=new _util.UnexpectedResponseException(a.message,a.status);break;case"UnknownErrorException":r=new _util.UnknownErrorException(a.message,a.details);break}t._capability.reject(r)}),e.on("PasswordRequest",a=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),t.onPassword){const r=p=>{this._passwordCapability.resolve({password:p})};try{t.onPassword(r,a.code)}catch(p){this._passwordCapability.reject(p)}}else this._passwordCapability.reject(new _util.PasswordException(a.message,a.code));return this._passwordCapability.promise}),e.on("DataLoaded",a=>{t.onProgress&&t.onProgress({loaded:a.length,total:a.length}),this.downloadInfoCapability.resolve(a)}),e.on("StartRenderPage",a=>{if(this.destroyed)return;const r=this.pageCache[a.pageIndex];r._startRenderPage(a.transparency,a.intent)}),e.on("commonobj",a=>{if(this.destroyed)return;const[r,p,_]=a;if(this.commonObjs.has(r))return;switch(p){case"Font":const S=this._params;if("error"in _){const h=_.error;(0,_util.warn)(`Error during font loading: ${h}`),this.commonObjs.resolve(r,h);break}let v=null;S.pdfBug&&globalThis.FontInspector&&globalThis.FontInspector.enabled&&(v={registerFont(h,m){globalThis.FontInspector.fontAdded(h,m)}});const c=new _font_loader.FontFaceObject(_,{isEvalSupported:S.isEvalSupported,disableFontFace:S.disableFontFace,ignoreErrors:S.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:v});this.fontLoader.bind(c).catch(h=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!S.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(r,c)});break;case"FontPath":case"FontType3Res":case"Image":this.commonObjs.resolve(r,_);break;default:throw new Error(`Got unknown common object type ${p}`)}}),e.on("obj",a=>{if(this.destroyed)return;const[r,p,_,S]=a,v=this.pageCache[p];if(v.objs.has(r))return;switch(_){case"Image":v.objs.resolve(r,S);const c=8e6;S&&"data"in S&&S.data.length>c&&(v.cleanupAfterRender=!0);break;default:throw new Error(`Got unknown object type ${_}`)}return}),e.on("DocProgress",a=>{if(this.destroyed)return;t.onProgress&&t.onProgress({loaded:a.loaded,total:a.total})}),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",(a,r)=>{if(this.destroyed){r.error(new Error("Worker was destroyed"));return}let p=!1;r.onPull=()=>{if(p){r.close();return}p=!0,this.CMapReaderFactory.fetch(a).then(function(_){r.enqueue(_,1,[_.cMapData.buffer])}).catch(function(_){r.error(_)})}})}_onUnsupportedFeature({featureId:e}){if(this.destroyed)return;this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(e)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request"));const t=e-1;if(t in this.pagePromises)return this.pagePromises[t];const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");const p=new PDFPageProxy(t,r,this,this._params.pdfBug);return this.pageCache[t]=p,p});return this.pagePromises[t]=a,a}getPageIndex(e){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:e}).catch(function(t){return Promise.reject(new Error(t))})}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(e=>({info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:this._fullReader?this._fullReader.filename:null}))}getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}startCleanup(){return this.messageHandler.sendWithPromise("Cleanup",null).then(()=>{for(let e=0,t=this.pageCache.length;e<t;e++){const a=this.pageCache[e];if(a){const r=a.cleanup();if(!r)throw new Error(`startCleanup: Page ${e+1} is currently rendering.`)}}this.commonObjs.clear(),this.fontLoader.clear()})}get loadingParams(){const e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,disableFontFace:e.disableFontFace})}}class PDFObjects{constructor(){this._objs=Object.create(null)}_ensureObj(e){return this._objs[e]?this._objs[e]:this._objs[e]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}get(e,t=null){if(t)return this._ensureObj(e).capability.promise.then(t),null;const a=this._objs[e];if(!a||!a.resolved)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return a.data}has(e){const t=this._objs[e];return t?t.resolved:!1}resolve(e,t){const a=this._ensureObj(e);a.resolved=!0,a.data=t,a.capability.resolve(t)}clear(){this._objs=Object.create(null)}}class RenderTask{constructor(e){this._internalRenderTask=e,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}const InternalRenderTask=function(){const t=new WeakSet;class a{constructor({callback:r,params:p,objs:_,commonObjs:S,operatorList:v,pageIndex:c,canvasFactory:h,webGLContext:m,useRequestAnimationFrame:E=!1,pdfBug:d=!1}){this.callback=r,this.params=p,this.objs=_,this.commonObjs=S,this.operatorListIdx=null,this.operatorList=v,this._pageIndex=c,this.canvasFactory=h,this.webGLContext=m,this._pdfBug=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=E===!0&&typeof window!="undefined",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=p.canvasContext.canvas}initializeGraphics(r=!1){if(this.cancelled)return;if(this._canvas){if(t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager&&globalThis.StepperManager.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:p,viewport:_,transform:S,imageLayer:v,background:c}=this.params;this.gfx=new _canvas.CanvasGraphics(p,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,v),this.gfx.beginDrawing({transform:S,viewport:_,transparency:r,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(r=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&t.delete(this._canvas),this.callback(r||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}if(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running)return;this._continue()}_continue(){if(this.running=!0,this.cancelled)return;this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext()}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this.cancel.bind(this))}):Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this))}async _next(){if(this.cancelled)return;this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&t.delete(this._canvas),this.callback()))}}return a}(),version="2.5.207";exports.version=version;const build="0974d605";exports.build=build},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var r=a(2);class p{constructor({docId:v,onUnsupportedFeature:c}){this.constructor===p&&(0,r.unreachable)("Cannot initialize BaseFontLoader."),this.docId=v,this._onUnsupportedFeature=c,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(v){this.nativeFontFaces.push(v),document.fonts.add(v)}insertRule(v){let c=this.styleElement;c||(c=this.styleElement=document.createElement("style"),c.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,document.documentElement.getElementsByTagName("head")[0].appendChild(c));const h=c.sheet;h.insertRule(v,h.cssRules.length)}clear(){this.nativeFontFaces.forEach(function(v){document.fonts.delete(v)}),this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(v){if(v.attached||v.missingFile)return;if(v.attached=!0,this.isFontLoadingAPISupported){const h=v.createNativeFontFace();if(h){this.addNativeFontFace(h);try{await h.loaded}catch(m){throw this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,r.warn)(`Failed to load font '${h.family}': '${m}'.`),v.disableFontFace=!0,m}}return}const c=v.createFontFaceRule();if(c){if(this.insertRule(c),this.isSyncFontLoadingSupported)return;await new Promise(h=>{const m=this._queueLoadingCallback(h);this._prepareFontLoadEvent([c],[v],m)})}}_queueLoadingCallback(v){(0,r.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){const v=typeof document!="undefined"&&!!document.fonts;return(0,r.shadow)(this,"isFontLoadingAPISupported",v)}get isSyncFontLoadingSupported(){(0,r.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,r.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(v,c,h){(0,r.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let _;t.FontLoader=_,t.FontLoader=_=class extends p{constructor(c){super(c);this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let c=!1;if(typeof navigator=="undefined")c=!0;else{const h=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);h&&h[1]>=14&&(c=!0)}return(0,r.shadow)(this,"isSyncFontLoadingSupported",c)}_queueLoadingCallback(c){function h(){for((0,r.assert)(!E.done,"completeRequest() cannot be called twice."),E.done=!0;m.requests.length>0&&m.requests[0].done;){const d=m.requests.shift();setTimeout(d.callback,0)}}const m=this.loadingContext,E={id:`pdfjs-font-loading-${m.nextRequestId++}`,done:!1,complete:h,callback:c};return m.requests.push(E),E}get _loadTestFont(){const c=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,r.shadow)(this,"_loadTestFont",c())}_prepareFontLoadEvent(c,h,m){function E(U,L){return U.charCodeAt(L)<<24|U.charCodeAt(L+1)<<16|U.charCodeAt(L+2)<<8|U.charCodeAt(L+3)&255}function d(U,L,X,i){const g=U.substring(0,L),P=U.substring(L+X);return g+i+P}let T,C;const D=document.createElement("canvas");D.width=1,D.height=1;const j=D.getContext("2d");let w=0;function G(U,L){if(w++,w>30){(0,r.warn)("Load test font never loaded."),L();return}j.font="30px "+U,j.fillText(".",0,20);const X=j.getImageData(0,0,1,1);if(X.data[3]>0){L();return}setTimeout(G.bind(null,U,L))}const x=`lt${Date.now()}${this.loadTestFontId++}`;let A=this._loadTestFont;const n=976;A=d(A,n,x.length,x);const s=16,u=1482184792;let b=E(A,s);for(T=0,C=x.length-3;T<C;T+=4)b=b-u+E(x,T)|0;T<x.length&&(b=b-u+E(x+"XXX",T)|0),A=d(A,s,4,(0,r.string32)(b));const f=`url(data:font/opentype;base64,${btoa(A)});`,N=`@font-face {font-family:"${x}";src:${f}}`;this.insertRule(N);const k=[];for(T=0,C=h.length;T<C;T++)k.push(h[T].loadedName);k.push(x);const W=document.createElement("div");for(W.style.visibility="hidden",W.style.width=W.style.height="10px",W.style.position="absolute",W.style.top=W.style.left="0px",T=0,C=k.length;T<C;++T){const U=document.createElement("span");U.textContent="Hi",U.style.fontFamily=k[T],W.appendChild(U)}document.body.appendChild(W),G(x,function(){document.body.removeChild(W),m.complete()})}};class S{constructor(v,{isEvalSupported:c=!0,disableFontFace:h=!1,ignoreErrors:m=!1,onUnsupportedFeature:E=null,fontRegistry:d=null}){this.compiledGlyphs=Object.create(null);for(const T in v)this[T]=v[T];this.isEvalSupported=c!==!1,this.disableFontFace=h===!0,this.ignoreErrors=m===!0,this._onUnsupportedFeature=E,this.fontRegistry=d}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;const v=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),v}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const v=(0,r.bytesToString)(new Uint8Array(this.data)),c=`url(data:${this.mimetype};base64,${btoa(v)});`,h=`@font-face {font-family:"${this.loadedName}";src:${c}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,c),h}getPathGenerator(v,c){if(this.compiledGlyphs[c]!==void 0)return this.compiledGlyphs[c];let h,m;try{h=v.get(this.loadedName+"_path_"+c)}catch(E){if(!this.ignoreErrors)throw E;return this._onUnsupportedFeature&&this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,r.warn)(`getPathGenerator - ignoring character: "${E}".`),this.compiledGlyphs[c]=function(d,T){}}if(this.isEvalSupported&&r.IsEvalSupportedCached.value){let E,d="";for(let T=0,C=h.length;T<C;T++)m=h[T],m.args!==void 0?E=m.args.join(","):E="",d+="c."+m.cmd+"("+E+`);
`;return this.compiledGlyphs[c]=new Function("c","size",d)}return this.compiledGlyphs[c]=function(E,d){for(let T=0,C=h.length;T<C;T++)m=h[T],m.cmd==="scale"&&(m.args=[d,-d]),E[m.cmd].apply(E,m.args)}}}t.FontFaceObject=S},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiCompatibilityParams=void 0;var r=a(4);const p=Object.create(null);(function(){r.isNodeJS&&(p.disableFontFace=!0)})();const _=Object.freeze(p);t.apiCompatibilityParams=_},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var r=a(2),p=a(9),_=16,S=100,v=4096,c=.65,h=!0,m=1e3,E=16;function d(w){w.mozCurrentTransform||(w._originalSave=w.save,w._originalRestore=w.restore,w._originalRotate=w.rotate,w._originalScale=w.scale,w._originalTranslate=w.translate,w._originalTransform=w.transform,w._originalSetTransform=w.setTransform,w._transformMatrix=w._transformMatrix||[1,0,0,1,0,0],w._transformStack=[],Object.defineProperty(w,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(w,"mozCurrentTransformInverse",{get:function(){var x=this._transformMatrix,A=x[0],n=x[1],s=x[2],u=x[3],b=x[4],f=x[5],N=A*u-n*s,k=n*s-A*u;return[u/N,n/k,s/k,A/N,(u*b-s*f)/k,(n*b-A*f)/N]}}),w.save=function(){var x=this._transformMatrix;this._transformStack.push(x),this._transformMatrix=x.slice(0,6),this._originalSave()},w.restore=function(){var x=this._transformStack.pop();x&&(this._transformMatrix=x,this._originalRestore())},w.translate=function(x,A){var n=this._transformMatrix;n[4]=n[0]*x+n[2]*A+n[4],n[5]=n[1]*x+n[3]*A+n[5],this._originalTranslate(x,A)},w.scale=function(x,A){var n=this._transformMatrix;n[0]=n[0]*x,n[1]=n[1]*x,n[2]=n[2]*A,n[3]=n[3]*A,this._originalScale(x,A)},w.transform=function(x,A,n,s,u,b){var f=this._transformMatrix;this._transformMatrix=[f[0]*x+f[2]*A,f[1]*x+f[3]*A,f[0]*n+f[2]*s,f[1]*n+f[3]*s,f[0]*u+f[2]*b+f[4],f[1]*u+f[3]*b+f[5]],w._originalTransform(x,A,n,s,u,b)},w.setTransform=function(x,A,n,s,u,b){this._transformMatrix=[x,A,n,s,u,b],w._originalSetTransform(x,A,n,s,u,b)},w.rotate=function(x){var A=Math.cos(x),n=Math.sin(x),s=this._transformMatrix;this._transformMatrix=[s[0]*A+s[2]*n,s[1]*A+s[3]*n,s[0]*-n+s[2]*A,s[1]*-n+s[3]*A,s[4],s[5]],this._originalRotate(x)})}var T=function(){function G(x){this.canvasFactory=x,this.cache=Object.create(null)}return G.prototype={getCanvas:function(A,n,s,u){var b;return this.cache[A]!==void 0?(b=this.cache[A],this.canvasFactory.reset(b,n,s),b.context.setTransform(1,0,0,1,0,0)):(b=this.canvasFactory.create(n,s),this.cache[A]=b),u&&d(b.context),b},clear(){for(var x in this.cache){var A=this.cache[x];this.canvasFactory.destroy(A),delete this.cache[x]}}},G}();function C(w){var G=1e3,x=w.width,A=w.height,n,s,u,b=x+1,f=new Uint8Array(b*(A+1)),N=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),k=x+7&~7,W=w.data,U=new Uint8Array(k*A),L=0,X;for(n=0,X=W.length;n<X;n++)for(var i=128,g=W[n];i>0;)U[L++]=g&i?0:255,i>>=1;var P=0;for(L=0,U[L]!==0&&(f[0]=1,++P),s=1;s<x;s++)U[L]!==U[L+1]&&(f[s]=U[L]?2:1,++P),L++;for(U[L]!==0&&(f[s]=2,++P),n=1;n<A;n++){L=n*k,u=n*b,U[L-k]!==U[L]&&(f[u]=U[L]?1:8,++P);var y=(U[L]?4:0)+(U[L-k]?8:0);for(s=1;s<x;s++)y=(y>>2)+(U[L+1]?4:0)+(U[L-k+1]?8:0),N[y]&&(f[u+s]=N[y],++P),L++;if(U[L-k]!==U[L]&&(f[u+s]=U[L]?2:4,++P),P>G)return null}for(L=k*(A-1),u=n*b,U[L]!==0&&(f[u]=8,++P),s=1;s<x;s++)U[L]!==U[L+1]&&(f[u+s]=U[L]?4:8,++P),L++;if(U[L]!==0&&(f[u+s]=4,++P),P>G)return null;var o=new Int32Array([0,b,-1,0,-b,0,0,0,1]),l=[];for(n=0;P&&n<=A;n++){for(var R=n*b,I=R+x;R<I&&!f[R];)R++;if(R===I)continue;var M=[R%b,n],O=f[R],B=R,H;do{var z=o[O];do R+=z;while(!f[R]);H=f[R],H!==5&&H!==10?(O=H,f[R]=0):(O=H&51*O>>4,f[R]&=O>>2|O<<2),M.push(R%b),M.push(R/b|0),f[R]||--P}while(B!==R);l.push(M),--n}var Y=function(V){V.save(),V.scale(1/x,-1/A),V.translate(0,-A),V.beginPath();for(let K=0,ee=l.length;K<ee;K++){var $=l[K];V.moveTo($[0],$[1]);for(let Q=2,te=$.length;Q<te;Q+=2)V.lineTo($[Q],$[Q+1])}V.fill(),V.beginPath(),V.restore()};return Y}var D=function(){function G(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null}return G.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(A,n){this.x=A,this.y=n}},G}(),j=function(){var G=15,x=10;function A(y,o,l,R,I,M){this.ctx=y,this.current=new D,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=o,this.objs=l,this.canvasFactory=R,this.webGLContext=I,this.imageLayer=M,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.cachedCanvases=new T(this.canvasFactory),y&&d(y),this._cachedGetSinglePixelWidth=null}function n(y,o){if(typeof ImageData!="undefined"&&o instanceof ImageData){y.putImageData(o,0,0);return}var l=o.height,R=o.width,I=l%E,M=(l-I)/E,O=I===0?M:M+1,B=y.createImageData(R,E),H=0,z,Y=o.data,V=B.data,$,K,ee,Q;if(o.kind===r.ImageKind.GRAYSCALE_1BPP){var te=Y.byteLength,ne=new Uint32Array(V.buffer,0,V.byteLength>>2),oe=ne.length,ie=R+7>>3,ce=4294967295,ae=r.IsLittleEndianCached.value?4278190080:255;for($=0;$<O;$++){for(ee=$<M?E:I,z=0,K=0;K<ee;K++){for(var le=te-H,fe=0,_e=le>ie?R:le*8-7,Ce=_e&~7,ge=0,ue=0;fe<Ce;fe+=8)ue=Y[H++],ne[z++]=ue&128?ce:ae,ne[z++]=ue&64?ce:ae,ne[z++]=ue&32?ce:ae,ne[z++]=ue&16?ce:ae,ne[z++]=ue&8?ce:ae,ne[z++]=ue&4?ce:ae,ne[z++]=ue&2?ce:ae,ne[z++]=ue&1?ce:ae;for(;fe<_e;fe++)ge===0&&(ue=Y[H++],ge=128),ne[z++]=ue&ge?ce:ae,ge>>=1}for(;z<oe;)ne[z++]=0;y.putImageData(B,0,$*E)}}else if(o.kind===r.ImageKind.RGBA_32BPP){for(K=0,Q=R*E*4,$=0;$<M;$++)V.set(Y.subarray(H,H+Q)),H+=Q,y.putImageData(B,0,K),K+=E;$<O&&(Q=R*I*4,V.set(Y.subarray(H,H+Q)),y.putImageData(B,0,K))}else if(o.kind===r.ImageKind.RGB_24BPP)for(ee=E,Q=R*ee,$=0;$<O;$++){for($>=M&&(ee=I,Q=R*ee),z=0,K=Q;K--;)V[z++]=Y[H++],V[z++]=Y[H++],V[z++]=Y[H++],V[z++]=255;y.putImageData(B,0,$*E)}else throw new Error(`bad image kind: ${o.kind}`)}function s(y,o){for(var l=o.height,R=o.width,I=l%E,M=(l-I)/E,O=I===0?M:M+1,B=y.createImageData(R,E),H=0,z=o.data,Y=B.data,V=0;V<O;V++){for(var $=V<M?E:I,K=3,ee=0;ee<$;ee++)for(var Q=0,te=0;te<R;te++){if(!Q){var ne=z[H++];Q=128}Y[K]=ne&Q?0:255,K+=4,Q>>=1}y.putImageData(B,0,V*E)}}function u(y,o){for(var l=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],R=0,I=l.length;R<I;R++){var M=l[R];y[M]!==void 0&&(o[M]=y[M])}y.setLineDash!==void 0&&(o.setLineDash(y.getLineDash()),o.lineDashOffset=y.lineDashOffset)}function b(y){y.strokeStyle="#000000",y.fillStyle="#000000",y.fillRule="nonzero",y.globalAlpha=1,y.lineWidth=1,y.lineCap="butt",y.lineJoin="miter",y.miterLimit=10,y.globalCompositeOperation="source-over",y.font="10px sans-serif",y.setLineDash!==void 0&&(y.setLineDash([]),y.lineDashOffset=0)}function f(y,o,l,R){for(var I=y.length,M=3;M<I;M+=4){var O=y[M];if(O===0)y[M-3]=o,y[M-2]=l,y[M-1]=R;else if(O<255){var B=255-O;y[M-3]=y[M-3]*O+o*B>>8,y[M-2]=y[M-2]*O+l*B>>8,y[M-1]=y[M-1]*O+R*B>>8}}}function N(y,o,l){for(var R=y.length,I=1/255,M=3;M<R;M+=4){var O=l?l[y[M]]:y[M];o[M]=o[M]*O*I|0}}function k(y,o,l){for(var R=y.length,I=3;I<R;I+=4){var M=y[I-3]*77+y[I-2]*152+y[I-1]*28;o[I]=l?o[I]*l[M>>8]>>8:o[I]*M>>16}}function W(y,o,l,R,I,M,O){var B=!!M,H=B?M[0]:0,z=B?M[1]:0,Y=B?M[2]:0,V;I==="Luminosity"?V=k:V=N;for(var $=1048576,K=Math.min(R,Math.ceil($/l)),ee=0;ee<R;ee+=K){var Q=Math.min(K,R-ee),te=y.getImageData(0,ee,l,Q),ne=o.getImageData(0,ee,l,Q);B&&f(te.data,H,z,Y),V(te.data,ne.data,O),y.putImageData(ne,0,ee)}}function U(y,o,l,R){var I=o.canvas,M=o.context;y.setTransform(o.scaleX,0,0,o.scaleY,o.offsetX,o.offsetY);var O=o.backdrop||null;if(!o.transferMap&&R.isEnabled){const B=R.composeSMask({layer:l.canvas,mask:I,properties:{subtype:o.subtype,backdrop:O}});y.setTransform(1,0,0,1,0,0),y.drawImage(B,o.offsetX,o.offsetY);return}W(M,l,I.width,I.height,o.subtype,O,o.transferMap),y.drawImage(I,0,0)}var L=["butt","round","square"],X=["miter","round","bevel"],i={},g={};A.prototype={beginDrawing({transform:y,viewport:o,transparency:l=!1,background:R=null}){var I=this.ctx.canvas.width,M=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=R||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,I,M),this.ctx.restore(),l){var O=this.cachedCanvases.getCanvas("transparent",I,M,!0);this.compositeCtx=this.ctx,this.transparentCanvas=O.canvas,this.ctx=O.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),b(this.ctx),y&&this.ctx.transform.apply(this.ctx,y),this.ctx.transform.apply(this.ctx,o.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(o,l,R,I){var M=o.argsArray,O=o.fnArray,B=l||0,H=M.length;if(H===B)return B;for(var z=H-B>x&&typeof R=="function",Y=z?Date.now()+G:0,V=0,$=this.commonObjs,K=this.objs,ee;;){if(I!==void 0&&B===I.nextBreakPoint)return I.breakIt(B,R),B;if(ee=O[B],ee!==r.OPS.dependency)this[ee].apply(this,M[B]);else for(const Q of M[B]){const te=Q.startsWith("g_")?$:K;if(!te.has(Q))return te.get(Q,R),B}if(B++,B===H)return B;if(z&&++V>x){if(Date.now()>Y)return R(),B;V=0}}},endDrawing:function(){this.current.activeSMask!==null&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(o){this.current.lineWidth=o,this.ctx.lineWidth=o},setLineCap:function(o){this.ctx.lineCap=L[o]},setLineJoin:function(o){this.ctx.lineJoin=X[o]},setMiterLimit:function(o){this.ctx.miterLimit=o},setDash:function(o,l){var R=this.ctx;R.setLineDash!==void 0&&(R.setLineDash(o),R.lineDashOffset=l)},setRenderingIntent(y){},setFlatness(y){},setGState:function(o){for(var l=0,R=o.length;l<R;l++){var I=o[l],M=I[0],O=I[1];switch(M){case"LW":this.setLineWidth(O);break;case"LC":this.setLineCap(O);break;case"LJ":this.setLineJoin(O);break;case"ML":this.setMiterLimit(O);break;case"D":this.setDash(O[0],O[1]);break;case"RI":this.setRenderingIntent(O);break;case"FL":this.setFlatness(O);break;case"Font":this.setFont(O[0],O[1]);break;case"CA":this.current.strokeAlpha=I[1];break;case"ca":this.current.fillAlpha=I[1],this.ctx.globalAlpha=I[1];break;case"BM":this.ctx.globalCompositeOperation=O;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=O?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null;break}}},beginSMaskGroup:function(){var o=this.current.activeSMask,l=o.canvas.width,R=o.canvas.height,I="smaskGroupAt"+this.groupLevel,M=this.cachedCanvases.getCanvas(I,l,R,!0),O=this.ctx,B=O.mozCurrentTransform;this.ctx.save();var H=M.context;H.scale(1/o.scaleX,1/o.scaleY),H.translate(-o.offsetX,-o.offsetY),H.transform.apply(H,B),o.startTransformInverse=H.mozCurrentTransformInverse,u(O,H),this.ctx=H,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(O),this.groupLevel++},suspendSMaskGroup:function(){var o=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),U(this.ctx,this.current.activeSMask,o,this.webGLContext),this.ctx.restore(),this.ctx.save(),u(o,this.ctx),this.current.resumeSMaskCtx=o;var l=r.Util.transform(this.current.activeSMask.startTransformInverse,o.mozCurrentTransform);this.ctx.transform.apply(this.ctx,l),o.save(),o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,o.canvas.width,o.canvas.height),o.restore()},resumeSMaskGroup:function(){var o=this.current.resumeSMaskCtx,l=this.ctx;this.ctx=o,this.groupStack.push(l),this.groupLevel++},endSMaskGroup:function(){var o=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),U(this.ctx,this.current.activeSMask,o,this.webGLContext),this.ctx.restore(),u(o,this.ctx);var l=r.Util.transform(this.current.activeSMask.startTransformInverse,o.mozCurrentTransform);this.ctx.transform.apply(this.ctx,l)},save:function(){this.ctx.save();var o=this.current;this.stateStack.push(o),this.current=o.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),this.current.activeSMask!==null&&(this.stateStack.length===0||this.stateStack[this.stateStack.length-1].activeSMask!==this.current.activeSMask)&&this.endSMaskGroup(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)},transform:function(o,l,R,I,M,O){this.ctx.transform(o,l,R,I,M,O),this._cachedGetSinglePixelWidth=null},constructPath:function(o,l){for(var R=this.ctx,I=this.current,M=I.x,O=I.y,B=0,H=0,z=o.length;B<z;B++)switch(o[B]|0){case r.OPS.rectangle:M=l[H++],O=l[H++];var Y=l[H++],V=l[H++];Y===0&&(Y=this.getSinglePixelWidth()),V===0&&(V=this.getSinglePixelWidth());var $=M+Y,K=O+V;this.ctx.moveTo(M,O),this.ctx.lineTo($,O),this.ctx.lineTo($,K),this.ctx.lineTo(M,K),this.ctx.lineTo(M,O),this.ctx.closePath();break;case r.OPS.moveTo:M=l[H++],O=l[H++],R.moveTo(M,O);break;case r.OPS.lineTo:M=l[H++],O=l[H++],R.lineTo(M,O);break;case r.OPS.curveTo:M=l[H+4],O=l[H+5],R.bezierCurveTo(l[H],l[H+1],l[H+2],l[H+3],M,O),H+=6;break;case r.OPS.curveTo2:R.bezierCurveTo(M,O,l[H],l[H+1],l[H+2],l[H+3]),M=l[H+2],O=l[H+3],H+=4;break;case r.OPS.curveTo3:M=l[H+2],O=l[H+3],R.bezierCurveTo(l[H],l[H+1],M,O,M,O),H+=4;break;case r.OPS.closePath:R.closePath();break}I.setCurrentPoint(M,O)},closePath:function(){this.ctx.closePath()},stroke:function(o){o=typeof o!="undefined"?o:!0;var l=this.ctx,R=this.current.strokeColor;if(l.globalAlpha=this.current.strokeAlpha,R&&R.hasOwnProperty("type")&&R.type==="Pattern"){l.save();const I=l.mozCurrentTransform,M=r.Util.singularValueDecompose2dScale(I)[0];l.strokeStyle=R.getPattern(l,this),l.lineWidth=Math.max(this.getSinglePixelWidth()*c,this.current.lineWidth*M),l.stroke(),l.restore()}else l.lineWidth=Math.max(this.getSinglePixelWidth()*c,this.current.lineWidth),l.stroke();o&&this.consumePath(),l.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(o){o=typeof o!="undefined"?o:!0;var l=this.ctx,R=this.current.fillColor,I=this.current.patternFill,M=!1;I&&(l.save(),this.baseTransform&&l.setTransform.apply(l,this.baseTransform),l.fillStyle=R.getPattern(l,this),M=!0),this.pendingEOFill?(l.fill("evenodd"),this.pendingEOFill=!1):l.fill(),M&&l.restore(),o&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=i},eoClip:function(){this.pendingClip=g},beginText:function(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var o=this.pendingTextPaths,l=this.ctx;if(o===void 0){l.beginPath();return}l.save(),l.beginPath();for(var R=0;R<o.length;R++){var I=o[R];l.setTransform.apply(l,I.transform),l.translate(I.x,I.y),I.addToPath(l,I.fontSize)}l.restore(),l.clip(),l.beginPath(),delete this.pendingTextPaths},setCharSpacing:function(o){this.current.charSpacing=o},setWordSpacing:function(o){this.current.wordSpacing=o},setHScale:function(o){this.current.textHScale=o/100},setLeading:function(o){this.current.leading=-o},setFont:function(o,l){var R=this.commonObjs.get(o),I=this.current;if(!R)throw new Error(`Can't find font for ${o}`);if(I.fontMatrix=R.fontMatrix?R.fontMatrix:r.FONT_IDENTITY_MATRIX,(I.fontMatrix[0]===0||I.fontMatrix[3]===0)&&(0,r.warn)("Invalid font matrix for font "+o),l<0?(l=-l,I.fontDirection=-1):I.fontDirection=1,this.current.font=R,this.current.fontSize=l,R.isType3Font)return;var M=R.loadedName||"sans-serif";let O="normal";R.black?O="900":R.bold&&(O="bold");var B=R.italic?"italic":"normal",H=`"${M}", ${R.fallbackName}`;let z=l;l<_?z=_:l>S&&(z=S),this.current.fontSizeScale=l/z,this.ctx.font=`${B} ${O} ${z}px ${H}`},setTextRenderingMode:function(o){this.current.textRenderingMode=o},setTextRise:function(o){this.current.textRise=o},moveText:function(o,l){this.current.x=this.current.lineX+=o,this.current.y=this.current.lineY+=l},setLeadingMoveText:function(o,l){this.setLeading(-l),this.moveText(o,l)},setTextMatrix:function(o,l,R,I,M,O){this.current.textMatrix=[o,l,R,I,M,O],this.current.textMatrixScale=Math.sqrt(o*o+l*l),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar(y,o,l,R){var I=this.ctx,M=this.current,O=M.font,B=M.textRenderingMode,H=M.fontSize/M.fontSizeScale,z=B&r.TextRenderingMode.FILL_STROKE_MASK,Y=!!(B&r.TextRenderingMode.ADD_TO_PATH_FLAG);const V=M.patternFill&&!O.missingFile;var $;if((O.disableFontFace||Y||V)&&($=O.getPathGenerator(this.commonObjs,y)),O.disableFontFace||V?(I.save(),I.translate(o,l),I.beginPath(),$(I,H),R&&I.setTransform.apply(I,R),(z===r.TextRenderingMode.FILL||z===r.TextRenderingMode.FILL_STROKE)&&I.fill(),(z===r.TextRenderingMode.STROKE||z===r.TextRenderingMode.FILL_STROKE)&&I.stroke(),I.restore()):((z===r.TextRenderingMode.FILL||z===r.TextRenderingMode.FILL_STROKE)&&I.fillText(y,o,l),(z===r.TextRenderingMode.STROKE||z===r.TextRenderingMode.FILL_STROKE)&&I.strokeText(y,o,l)),Y){var K=this.pendingTextPaths||(this.pendingTextPaths=[]);K.push({transform:I.mozCurrentTransform,x:o,y:l,fontSize:H,addToPath:$})}},get isFontSubpixelAAEnabled(){const{context:y}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);y.scale(1.5,1),y.fillText("I",0,10);for(var o=y.getImageData(0,0,10,10).data,l=!1,R=3;R<o.length;R+=4)if(o[R]>0&&o[R]<255){l=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",l)},showText:function(o){var l=this.current,R=l.font;if(R.isType3Font)return this.showType3Text(o);var I=l.fontSize;if(I===0)return;var M=this.ctx,O=l.fontSizeScale,B=l.charSpacing,H=l.wordSpacing,z=l.fontDirection,Y=l.textHScale*z,V=o.length,$=R.vertical,K=$?1:-1,ee=R.defaultVMetrics,Q=I*l.fontMatrix[0],te=l.textRenderingMode===r.TextRenderingMode.FILL&&!R.disableFontFace&&!l.patternFill;M.save();let ne;if(l.patternFill){M.save();const de=l.fillColor.getPattern(M,this);ne=M.mozCurrentTransform,M.restore(),M.fillStyle=de}M.transform.apply(M,l.textMatrix),M.translate(l.x,l.y+l.textRise),z>0?M.scale(Y,-1):M.scale(Y,1);var oe=l.lineWidth,ie=l.textMatrixScale;if(ie===0||oe===0){var ce=l.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;(ce===r.TextRenderingMode.STROKE||ce===r.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,oe=this.getSinglePixelWidth()*c)}else oe/=ie;O!==1&&(M.scale(O,O),oe/=O),M.lineWidth=oe;var ae=0,le;for(le=0;le<V;++le){var fe=o[le];if((0,r.isNum)(fe)){ae+=K*fe*I/1e3;continue}var _e=!1,Ce=(fe.isSpace?H:0)+B,ge=fe.fontChar,ue=fe.accent,be,ye,ke,we,F=fe.width;if($){var q,J,Z;q=fe.vmetric||ee,J=fe.vmetric?q[1]:F*.5,J=-J*Q,Z=q[2]*Q,F=q?-q[0]:F,be=J/O,ye=(ae+Z)/O}else be=ae/O,ye=0;if(R.remeasure&&F>0){var re=M.measureText(ge).width*1e3/I*O;if(F<re&&this.isFontSubpixelAAEnabled){var se=F/re;_e=!0,M.save(),M.scale(se,1),be/=se}else F!==re&&(be+=(F-re)/2e3*I/O)}(fe.isInFont||R.missingFile)&&(te&&!ue?M.fillText(ge,be,ye):(this.paintChar(ge,be,ye,ne),ue&&(ke=be+ue.offset.x/O,we=ye-ue.offset.y/O,this.paintChar(ue.fontChar,ke,we,ne))));var he;$?he=F*Q-Ce*z:he=F*Q+Ce*z,ae+=he,_e&&M.restore()}$?l.y-=ae:l.x+=ae*Y,M.restore()},showType3Text:function(o){var l=this.ctx,R=this.current,I=R.font,M=R.fontSize,O=R.fontDirection,B=I.vertical?1:-1,H=R.charSpacing,z=R.wordSpacing,Y=R.textHScale*O,V=R.fontMatrix||r.FONT_IDENTITY_MATRIX,$=o.length,K=R.textRenderingMode===r.TextRenderingMode.INVISIBLE,ee,Q,te,ne;if(K||M===0)return;for(this._cachedGetSinglePixelWidth=null,l.save(),l.transform.apply(l,R.textMatrix),l.translate(R.x,R.y),l.scale(Y,O),ee=0;ee<$;++ee){if(Q=o[ee],(0,r.isNum)(Q)){ne=B*Q*M/1e3,this.ctx.translate(ne,0),R.x+=ne*Y;continue}var oe=(Q.isSpace?z:0)+H,ie=I.charProcOperatorList[Q.operatorListId];if(!ie){(0,r.warn)(`Type3 character "${Q.operatorListId}" is not available.`);continue}this.processingType3=Q,this.save(),l.scale(M,M),l.transform.apply(l,V),this.executeOperatorList(ie),this.restore();var ce=r.Util.applyTransform([Q.width,0],V);te=ce[0]*M+oe,l.translate(te,0),R.x+=te*Y}l.restore(),this.processingType3=null},setCharWidth:function(o,l){},setCharWidthAndBounds:function(o,l,R,I,M,O){this.ctx.rect(R,I,M-R,O-I),this.clip(),this.endPath()},getColorN_Pattern:function(o){var l;if(o[0]==="TilingPattern"){var R=o[1],I=this.baseTransform||this.ctx.mozCurrentTransform.slice(),M={createCanvasGraphics:O=>new A(O,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext)};l=new p.TilingPattern(o,R,this.ctx,M,I)}else l=(0,p.getShadingPatternFromIR)(o);return l},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(o,l,R){var I=r.Util.makeCssRgb(o,l,R);this.ctx.strokeStyle=I,this.current.strokeColor=I},setFillRGBColor:function(o,l,R){var I=r.Util.makeCssRgb(o,l,R);this.ctx.fillStyle=I,this.current.fillColor=I,this.current.patternFill=!1},shadingFill:function(o){var l=this.ctx;this.save();var R=(0,p.getShadingPatternFromIR)(o);l.fillStyle=R.getPattern(l,this,!0);var I=l.mozCurrentTransformInverse;if(I){var M=l.canvas,O=M.width,B=M.height,H=r.Util.applyTransform([0,0],I),z=r.Util.applyTransform([0,B],I),Y=r.Util.applyTransform([O,0],I),V=r.Util.applyTransform([O,B],I),$=Math.min(H[0],z[0],Y[0],V[0]),K=Math.min(H[1],z[1],Y[1],V[1]),ee=Math.max(H[0],z[0],Y[0],V[0]),Q=Math.max(H[1],z[1],Y[1],V[1]);this.ctx.fillRect($,K,ee-$,Q-K)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()},beginInlineImage:function(){(0,r.unreachable)("Should not call beginInlineImage")},beginImageData:function(){(0,r.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function(o,l){if(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(o)&&o.length===6&&this.transform.apply(this,o),this.baseTransform=this.ctx.mozCurrentTransform,l){var R=l[2]-l[0],I=l[3]-l[1];this.ctx.rect(l[0],l[1],R,I),this.clip(),this.endPath()}},paintFormXObjectEnd:function(){this.restore(),this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(o){this.save();var l=this.ctx;o.isolated||(0,r.info)("TODO: Support non-isolated groups."),o.knockout&&(0,r.warn)("Knockout groups not supported.");var R=l.mozCurrentTransform;if(o.matrix&&l.transform.apply(l,o.matrix),!o.bbox)throw new Error("Bounding box is required.");var I=r.Util.getAxialAlignedBoundingBox(o.bbox,l.mozCurrentTransform),M=[0,0,l.canvas.width,l.canvas.height];I=r.Util.intersect(I,M)||[0,0,0,0];var O=Math.floor(I[0]),B=Math.floor(I[1]),H=Math.max(Math.ceil(I[2])-O,1),z=Math.max(Math.ceil(I[3])-B,1),Y=1,V=1;H>v&&(Y=H/v,H=v),z>v&&(V=z/v,z=v);var $="groupAt"+this.groupLevel;o.smask&&($+="_smask_"+this.smaskCounter++%2);var K=this.cachedCanvases.getCanvas($,H,z,!0),ee=K.context;ee.scale(1/Y,1/V),ee.translate(-O,-B),ee.transform.apply(ee,R),o.smask?this.smaskStack.push({canvas:K.canvas,context:ee,offsetX:O,offsetY:B,scaleX:Y,scaleY:V,subtype:o.smask.subtype,backdrop:o.smask.backdrop,transferMap:o.smask.transferMap||null,startTransformInverse:null}):(l.setTransform(1,0,0,1,0,0),l.translate(O,B),l.scale(Y,V)),u(l,ee),this.ctx=ee,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(l),this.groupLevel++,this.current.activeSMask=null},endGroup:function(o){this.groupLevel--;var l=this.ctx;this.ctx=this.groupStack.pop(),this.ctx.imageSmoothingEnabled!==void 0?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,o.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(l.canvas,0,0),this.restore()},beginAnnotations:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(o,l,R){if(this.save(),b(this.ctx),this.current=new D,Array.isArray(o)&&o.length===4){var I=o[2]-o[0],M=o[3]-o[1];this.ctx.rect(o[0],o[1],I,M),this.clip(),this.endPath()}this.transform.apply(this,l),this.transform.apply(this,R)},endAnnotation:function(){this.restore()},paintImageMaskXObject:function(o){var l=this.ctx,R=o.width,I=o.height,M=this.current.fillColor,O=this.current.patternFill,B=this.processingType3;if(h&&B&&B.compiled===void 0&&(R<=m&&I<=m?B.compiled=C({data:o.data,width:R,height:I}):B.compiled=null),B&&B.compiled){B.compiled(l);return}var H=this.cachedCanvases.getCanvas("maskCanvas",R,I),z=H.context;z.save(),s(z,o),z.globalCompositeOperation="source-in",z.fillStyle=O?M.getPattern(z,this):M,z.fillRect(0,0,R,I),z.restore(),this.paintInlineImageXObject(H.canvas)},paintImageMaskXObjectRepeat:function(o,l,R,I){var M=o.width,O=o.height,B=this.current.fillColor,H=this.current.patternFill,z=this.cachedCanvases.getCanvas("maskCanvas",M,O),Y=z.context;Y.save(),s(Y,o),Y.globalCompositeOperation="source-in",Y.fillStyle=H?B.getPattern(Y,this):B,Y.fillRect(0,0,M,O),Y.restore();for(var V=this.ctx,$=0,K=I.length;$<K;$+=2)V.save(),V.transform(l,0,0,R,I[$],I[$+1]),V.scale(1,-1),V.drawImage(z.canvas,0,0,M,O,0,-1,1,1),V.restore()},paintImageMaskXObjectGroup:function(o){for(var l=this.ctx,R=this.current.fillColor,I=this.current.patternFill,M=0,O=o.length;M<O;M++){var B=o[M],H=B.width,z=B.height,Y=this.cachedCanvases.getCanvas("maskCanvas",H,z),V=Y.context;V.save(),s(V,B),V.globalCompositeOperation="source-in",V.fillStyle=I?R.getPattern(V,this):R,V.fillRect(0,0,H,z),V.restore(),l.save(),l.transform.apply(l,B.transform),l.scale(1,-1),l.drawImage(Y.canvas,0,0,H,z,0,-1,1,1),l.restore()}},paintImageXObject:function(o){const l=o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o);if(!l){(0,r.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(l)},paintImageXObjectRepeat:function(o,l,R,I){const M=o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o);if(!M){(0,r.warn)("Dependent image isn't ready yet");return}for(var O=M.width,B=M.height,H=[],z=0,Y=I.length;z<Y;z+=2)H.push({transform:[l,0,0,R,I[z],I[z+1]],x:0,y:0,w:O,h:B});this.paintInlineImageXObjectGroup(M,H)},paintInlineImageXObject:function(o){var l=o.width,R=o.height,I=this.ctx;this.save(),I.scale(1/l,-1/R);var M=I.mozCurrentTransformInverse,O=M[0],B=M[1],H=Math.max(Math.sqrt(O*O+B*B),1),z=M[2],Y=M[3],V=Math.max(Math.sqrt(z*z+Y*Y),1),$,K;if(typeof HTMLElement=="function"&&o instanceof HTMLElement||!o.data)$=o;else{K=this.cachedCanvases.getCanvas("inlineImage",l,R);var ee=K.context;n(ee,o),$=K.canvas}for(var Q=l,te=R,ne="prescale1";H>2&&Q>1||V>2&&te>1;){var oe=Q,ie=te;H>2&&Q>1&&(oe=Math.ceil(Q/2),H/=Q/oe),V>2&&te>1&&(ie=Math.ceil(te/2),V/=te/ie),K=this.cachedCanvases.getCanvas(ne,oe,ie),ee=K.context,ee.clearRect(0,0,oe,ie),ee.drawImage($,0,0,Q,te,0,0,oe,ie),$=K.canvas,Q=oe,te=ie,ne=ne==="prescale1"?"prescale2":"prescale1"}if(I.drawImage($,0,0,Q,te,0,-R,l,R),this.imageLayer){var ce=this.getCanvasPosition(0,-R);this.imageLayer.appendImage({imgData:o,left:ce[0],top:ce[1],width:l/M[0],height:R/M[3]})}this.restore()},paintInlineImageXObjectGroup:function(o,l){var R=this.ctx,I=o.width,M=o.height,O=this.cachedCanvases.getCanvas("inlineImage",I,M),B=O.context;n(B,o);for(var H=0,z=l.length;H<z;H++){var Y=l[H];if(R.save(),R.transform.apply(R,Y.transform),R.scale(1,-1),R.drawImage(O.canvas,Y.x,Y.y,Y.w,Y.h,0,-1,1,1),this.imageLayer){var V=this.getCanvasPosition(Y.x,Y.y);this.imageLayer.appendImage({imgData:o,left:V[0],top:V[1],width:I,height:M})}R.restore()}},paintSolidColorImageMask:function(){this.ctx.fillRect(0,0,1,1)},paintXObject:function(){(0,r.warn)("Unsupported 'paintXObject' command.")},markPoint:function(o){},markPointProps:function(o,l){},beginMarkedContent:function(o){},beginMarkedContentProps:function(o,l){},endMarkedContent:function(){},beginCompat:function(){},endCompat:function(){},consumePath:function(){var o=this.ctx;this.pendingClip&&(this.pendingClip===g?o.clip("evenodd"):o.clip(),this.pendingClip=null),o.beginPath()},getSinglePixelWidth(y){if(this._cachedGetSinglePixelWidth===null){const o=this.ctx.mozCurrentTransformInverse;this._cachedGetSinglePixelWidth=Math.sqrt(Math.max(o[0]*o[0]+o[1]*o[1],o[2]*o[2]+o[3]*o[3]))}return this._cachedGetSinglePixelWidth},getCanvasPosition:function(o,l){var R=this.ctx.mozCurrentTransform;return[R[0]*o+R[2]*l+R[4],R[1]*o+R[3]*l+R[5]]}};for(var P in r.OPS)A.prototype[r.OPS[P]]=A.prototype[P];return A}();t.CanvasGraphics=j},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShadingPatternFromIR=v,t.TilingPattern=void 0;var r=a(2),p={};function _(h,m){if(!m||typeof Path2D=="undefined")return;const E=m[2]-m[0],d=m[3]-m[1],T=new Path2D;T.rect(m[0],m[1],E,d),h.clip(T)}p.RadialAxial={fromIR:function(m){var E=m[1],d=m[2],T=m[3],C=m[4],D=m[5],j=m[6],w=m[7];return{type:"Pattern",getPattern:function(x){_(x,d);var A;E==="axial"?A=x.createLinearGradient(C[0],C[1],D[0],D[1]):E==="radial"&&(A=x.createRadialGradient(C[0],C[1],j,D[0],D[1],w));for(var n=0,s=T.length;n<s;++n){var u=T[n];A.addColorStop(u[0],u[1])}return A}}}};var S=function(){function m(T,C,D,j,w,G,x,A){var n=C.coords,s=C.colors,u=T.data,b=T.width*4,f;n[D+1]>n[j+1]&&(f=D,D=j,j=f,f=G,G=x,x=f),n[j+1]>n[w+1]&&(f=j,j=w,w=f,f=x,x=A,A=f),n[D+1]>n[j+1]&&(f=D,D=j,j=f,f=G,G=x,x=f);var N=(n[D]+C.offsetX)*C.scaleX,k=(n[D+1]+C.offsetY)*C.scaleY,W=(n[j]+C.offsetX)*C.scaleX,U=(n[j+1]+C.offsetY)*C.scaleY,L=(n[w]+C.offsetX)*C.scaleX,X=(n[w+1]+C.offsetY)*C.scaleY;if(k>=X)return;for(var i=s[G],g=s[G+1],P=s[G+2],y=s[x],o=s[x+1],l=s[x+2],R=s[A],I=s[A+1],M=s[A+2],O=Math.round(k),B=Math.round(X),H,z,Y,V,$,K,ee,Q,te=O;te<=B;te++){if(te<U){let le;te<k?le=0:k===U?le=1:le=(k-te)/(k-U),H=N-(N-W)*le,z=i-(i-y)*le,Y=g-(g-o)*le,V=P-(P-l)*le}else{let le;te>X?le=1:U===X?le=0:le=(U-te)/(U-X),H=W-(W-L)*le,z=y-(y-R)*le,Y=o-(o-I)*le,V=l-(l-M)*le}let ae;te<k?ae=0:te>X?ae=1:ae=(k-te)/(k-X),$=N-(N-L)*ae,K=i-(i-R)*ae,ee=g-(g-I)*ae,Q=P-(P-M)*ae;for(var ne=Math.round(Math.min(H,$)),oe=Math.round(Math.max(H,$)),ie=b*te+ne*4,ce=ne;ce<=oe;ce++)ae=(H-ce)/(H-$),ae<0?ae=0:ae>1&&(ae=1),u[ie++]=z-(z-K)*ae|0,u[ie++]=Y-(Y-ee)*ae|0,u[ie++]=V-(V-Q)*ae|0,u[ie++]=255}}function E(T,C,D){var j=C.coords,w=C.colors,G,x;switch(C.type){case"lattice":var A=C.verticesPerRow,n=Math.floor(j.length/A)-1,s=A-1;for(G=0;G<n;G++)for(var u=G*A,b=0;b<s;b++,u++)m(T,D,j[u],j[u+1],j[u+A],w[u],w[u+1],w[u+A]),m(T,D,j[u+A+1],j[u+1],j[u+A],w[u+A+1],w[u+1],w[u+A]);break;case"triangles":for(G=0,x=j.length;G<x;G+=3)m(T,D,j[G],j[G+1],j[G+2],w[G],w[G+1],w[G+2]);break;default:throw new Error("illegal figure")}}function d(T,C,D,j,w,G,x,A){var n=1.1,s=3e3,u=2,b=Math.floor(T[0]),f=Math.floor(T[1]),N=Math.ceil(T[2])-b,k=Math.ceil(T[3])-f,W=Math.min(Math.ceil(Math.abs(N*C[0]*n)),s),U=Math.min(Math.ceil(Math.abs(k*C[1]*n)),s),L=N/W,X=k/U,i={coords:D,colors:j,offsetX:-b,offsetY:-f,scaleX:1/L,scaleY:1/X},g=W+u*2,P=U+u*2,y,o,l,R;if(A.isEnabled)y=A.drawFigures({width:W,height:U,backgroundColor:G,figures:w,context:i}),o=x.getCanvas("mesh",g,P,!1),o.context.drawImage(y,u,u),y=o.canvas;else{o=x.getCanvas("mesh",g,P,!1);var I=o.context,M=I.createImageData(W,U);if(G){var O=M.data;for(l=0,R=O.length;l<R;l+=4)O[l]=G[0],O[l+1]=G[1],O[l+2]=G[2],O[l+3]=255}for(l=0;l<w.length;l++)E(M,w[l],i);I.putImageData(M,u,u),y=o.canvas}return{canvas:y,offsetX:b-u*L,offsetY:f-u*X,scaleX:L,scaleY:X}}return d}();p.Mesh={fromIR:function(m){var E=m[2],d=m[3],T=m[4],C=m[5],D=m[6],j=m[7],w=m[8];return{type:"Pattern",getPattern:function(x,A,n){_(x,j);var s;if(n)s=r.Util.singularValueDecompose2dScale(x.mozCurrentTransform);else if(s=r.Util.singularValueDecompose2dScale(A.baseTransform),D){var u=r.Util.singularValueDecompose2dScale(D);s=[s[0]*u[0],s[1]*u[1]]}var b=S(C,s,E,d,T,n?null:w,A.cachedCanvases,A.webGLContext);return n||(x.setTransform.apply(x,A.baseTransform),D&&x.transform.apply(x,D)),x.translate(b.offsetX,b.offsetY),x.scale(b.scaleX,b.scaleY),x.createPattern(b.canvas,"no-repeat")}}}},p.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};function v(h){var m=p[h[0]];if(!m)throw new Error(`Unknown IR type: ${h[0]}`);return m.fromIR(h)}var c=function(){var m={COLORED:1,UNCOLORED:2},E=3e3;function d(T,C,D,j,w){this.operatorList=T[2],this.matrix=T[3]||[1,0,0,1,0,0],this.bbox=T[4],this.xstep=T[5],this.ystep=T[6],this.paintType=T[7],this.tilingType=T[8],this.color=C,this.canvasGraphicsFactory=j,this.baseTransform=w,this.type="Pattern",this.ctx=D}return d.prototype={createPatternCanvas:function(C){var D=this.operatorList,j=this.bbox,w=this.xstep,G=this.ystep,x=this.paintType,A=this.tilingType,n=this.color,s=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+A);var u=j[0],b=j[1],f=j[2],N=j[3],k=r.Util.singularValueDecompose2dScale(this.matrix),W=r.Util.singularValueDecompose2dScale(this.baseTransform),U=[k[0]*W[0],k[1]*W[1]],L=this.getSizeAndScale(w,this.ctx.canvas.width,U[0]),X=this.getSizeAndScale(G,this.ctx.canvas.height,U[1]),i=C.cachedCanvases.getCanvas("pattern",L.size,X.size,!0),g=i.context,P=s.createCanvasGraphics(g);return P.groupLevel=C.groupLevel,this.setFillAndStrokeStyleToContext(P,x,n),P.transform(L.scale,0,0,X.scale,0,0),P.transform(1,0,0,1,-u,-b),this.clipBbox(P,j,u,b,f,N),P.executeOperatorList(D),this.ctx.transform(1,0,0,1,u,b),this.ctx.scale(1/L.scale,1/X.scale),i.canvas},getSizeAndScale:function(C,D,j){C=Math.abs(C);var w=Math.max(E,D),G=Math.ceil(C*j);return G>=w?G=w:j=G/C,{scale:j,size:G}},clipBbox:function(C,D,j,w,G,x){if(Array.isArray(D)&&D.length===4){var A=G-j,n=x-w;C.ctx.rect(j,w,A,n),C.clip(),C.endPath()}},setFillAndStrokeStyleToContext:function(C,D,j){const w=C.ctx,G=C.current;switch(D){case m.COLORED:var x=this.ctx;w.fillStyle=x.fillStyle,w.strokeStyle=x.strokeStyle,G.fillColor=x.fillStyle,G.strokeColor=x.strokeStyle;break;case m.UNCOLORED:var A=r.Util.makeCssRgb(j[0],j[1],j[2]);w.fillStyle=A,w.strokeStyle=A,G.fillColor=A,G.strokeColor=A;break;default:throw new r.FormatError(`Unsupported paint type: ${D}`)}},getPattern:function(C,D){C=this.ctx,C.setTransform.apply(C,this.baseTransform),C.transform.apply(C,this.matrix);var j=this.createPatternCanvas(D);return C.createPattern(j,"repeat")}},d}();t.TilingPattern=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const r=Object.create(null);t.GlobalWorkerOptions=r,r.workerPort=r.workerPort===void 0?null:r.workerPort,r.workerSrc=r.workerSrc===void 0?"":r.workerSrc},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var r=a(2);const p={UNKNOWN:0,DATA:1,ERROR:2},_={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function S(c){if(typeof c!="object"||c===null)return c;switch(c.name){case"AbortException":return new r.AbortException(c.message);case"MissingPDFException":return new r.MissingPDFException(c.message);case"UnexpectedResponseException":return new r.UnexpectedResponseException(c.message,c.status);case"UnknownErrorException":return new r.UnknownErrorException(c.message,c.details);default:return new r.UnknownErrorException(c.message,c.toString())}}class v{constructor(c,h,m){this.sourceName=c,this.targetName=h,this.comObj=m,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=E=>{const d=E.data;if(d.targetName!==this.sourceName)return;if(d.stream){this._processStreamMessage(d);return}if(d.callback){const C=d.callbackId,D=this.callbackCapabilities[C];if(!D)throw new Error(`Cannot resolve callback ${C}`);if(delete this.callbackCapabilities[C],d.callback===p.DATA)D.resolve(d.data);else if(d.callback===p.ERROR)D.reject(S(d.reason));else throw new Error("Unexpected callback case");return}const T=this.actionHandler[d.action];if(!T)throw new Error(`Unknown action from worker: ${d.action}`);if(d.callbackId){const C=this.sourceName,D=d.sourceName;new Promise(function(j){j(T(d.data))}).then(function(j){m.postMessage({sourceName:C,targetName:D,callback:p.DATA,callbackId:d.callbackId,data:j})},function(j){m.postMessage({sourceName:C,targetName:D,callback:p.ERROR,callbackId:d.callbackId,reason:S(j)})});return}if(d.streamId){this._createStreamSink(d);return}T(d.data)},m.addEventListener("message",this._onComObjOnMessage)}on(c,h){const m=this.actionHandler;if(m[c])throw new Error(`There is already an actionName called "${c}"`);m[c]=h}send(c,h,m){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:c,data:h},m)}sendWithPromise(c,h,m){const E=this.callbackId++,d=(0,r.createPromiseCapability)();this.callbackCapabilities[E]=d;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:c,callbackId:E,data:h},m)}catch(T){d.reject(T)}return d.promise}sendWithStream(c,h,m,E){const d=this.streamId++,T=this.sourceName,C=this.targetName,D=this.comObj;return new ReadableStream({start:j=>{const w=(0,r.createPromiseCapability)();return this.streamControllers[d]={controller:j,startCall:w,pullCall:null,cancelCall:null,isClosed:!1},this._postMessage({sourceName:T,targetName:C,action:c,streamId:d,data:h,desiredSize:j.desiredSize},E),w.promise},pull:j=>{const w=(0,r.createPromiseCapability)();return this.streamControllers[d].pullCall=w,D.postMessage({sourceName:T,targetName:C,stream:_.PULL,streamId:d,desiredSize:j.desiredSize}),w.promise},cancel:j=>{(0,r.assert)(j instanceof Error,"cancel must have a valid reason");const w=(0,r.createPromiseCapability)();return this.streamControllers[d].cancelCall=w,this.streamControllers[d].isClosed=!0,D.postMessage({sourceName:T,targetName:C,stream:_.CANCEL,streamId:d,reason:S(j)}),w.promise}},m)}_createStreamSink(c){const h=this,m=this.actionHandler[c.action],E=c.streamId,d=this.sourceName,T=c.sourceName,C=this.comObj,D={enqueue(j,w=1,G){if(this.isCancelled)return;const x=this.desiredSize;this.desiredSize-=w,x>0&&this.desiredSize<=0&&(this.sinkCapability=(0,r.createPromiseCapability)(),this.ready=this.sinkCapability.promise),h._postMessage({sourceName:d,targetName:T,stream:_.ENQUEUE,streamId:E,chunk:j},G)},close(){if(this.isCancelled)return;this.isCancelled=!0,C.postMessage({sourceName:d,targetName:T,stream:_.CLOSE,streamId:E}),delete h.streamSinks[E]},error(j){if((0,r.assert)(j instanceof Error,"error must have a valid reason"),this.isCancelled)return;this.isCancelled=!0,C.postMessage({sourceName:d,targetName:T,stream:_.ERROR,streamId:E,reason:S(j)})},sinkCapability:(0,r.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:c.desiredSize,ready:null};D.sinkCapability.resolve(),D.ready=D.sinkCapability.promise,this.streamSinks[E]=D,new Promise(function(j){j(m(c.data,D))}).then(function(){C.postMessage({sourceName:d,targetName:T,stream:_.START_COMPLETE,streamId:E,success:!0})},function(j){C.postMessage({sourceName:d,targetName:T,stream:_.START_COMPLETE,streamId:E,reason:S(j)})})}_processStreamMessage(c){const h=c.streamId,m=this.sourceName,E=c.sourceName,d=this.comObj;switch(c.stream){case _.START_COMPLETE:c.success?this.streamControllers[h].startCall.resolve():this.streamControllers[h].startCall.reject(S(c.reason));break;case _.PULL_COMPLETE:c.success?this.streamControllers[h].pullCall.resolve():this.streamControllers[h].pullCall.reject(S(c.reason));break;case _.PULL:if(!this.streamSinks[h]){d.postMessage({sourceName:m,targetName:E,stream:_.PULL_COMPLETE,streamId:h,success:!0});break}this.streamSinks[h].desiredSize<=0&&c.desiredSize>0&&this.streamSinks[h].sinkCapability.resolve(),this.streamSinks[h].desiredSize=c.desiredSize;const{onPull:T}=this.streamSinks[c.streamId];new Promise(function(D){D(T&&T())}).then(function(){d.postMessage({sourceName:m,targetName:E,stream:_.PULL_COMPLETE,streamId:h,success:!0})},function(D){d.postMessage({sourceName:m,targetName:E,stream:_.PULL_COMPLETE,streamId:h,reason:S(D)})});break;case _.ENQUEUE:if((0,r.assert)(this.streamControllers[h],"enqueue should have stream controller"),this.streamControllers[h].isClosed)break;this.streamControllers[h].controller.enqueue(c.chunk);break;case _.CLOSE:if((0,r.assert)(this.streamControllers[h],"close should have stream controller"),this.streamControllers[h].isClosed)break;this.streamControllers[h].isClosed=!0,this.streamControllers[h].controller.close(),this._deleteStreamController(h);break;case _.ERROR:(0,r.assert)(this.streamControllers[h],"error should have stream controller"),this.streamControllers[h].controller.error(S(c.reason)),this._deleteStreamController(h);break;case _.CANCEL_COMPLETE:c.success?this.streamControllers[h].cancelCall.resolve():this.streamControllers[h].cancelCall.reject(S(c.reason)),this._deleteStreamController(h);break;case _.CANCEL:if(!this.streamSinks[h])break;const{onCancel:C}=this.streamSinks[c.streamId];new Promise(function(D){D(C&&C(S(c.reason)))}).then(function(){d.postMessage({sourceName:m,targetName:E,stream:_.CANCEL_COMPLETE,streamId:h,success:!0})},function(D){d.postMessage({sourceName:m,targetName:E,stream:_.CANCEL_COMPLETE,streamId:h,reason:S(D)})}),this.streamSinks[h].sinkCapability.reject(S(c.reason)),this.streamSinks[h].isCancelled=!0,delete this.streamSinks[h];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(c){await Promise.allSettled([this.streamControllers[c].startCall,this.streamControllers[c].pullCall,this.streamControllers[c].cancelCall].map(function(h){return h&&h.promise})),delete this.streamControllers[c]}_postMessage(c,h){h&&this.postMessageTransfers?this.comObj.postMessage(c,h):this.comObj.postMessage(c)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}t.MessageHandler=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=a(2),p=a(13);class _{constructor(S){(0,r.assert)(typeof S=="string","Metadata: input is not a string"),S=this._repair(S);const v=new p.SimpleXMLParser,c=v.parseFromString(S);this._metadataMap=new Map,c&&this._parse(c)}_repair(S){return S.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,function(v,c){const h=c.replace(/\\([0-3])([0-7])([0-7])/g,function(E,d,T,C){return String.fromCharCode(d*64+T*8+C*1)}).replace(/&(amp|apos|gt|lt|quot);/g,function(E,d){switch(d){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error(`_repair: ${d} isn't defined.`)});let m="";for(let E=0,d=h.length;E<d;E+=2){const T=h.charCodeAt(E)*256+h.charCodeAt(E+1);T>=32&&T<127&&T!==60&&T!==62&&T!==38?m+=String.fromCharCode(T):m+="&#x"+(65536+T).toString(16).substring(1)+";"}return">"+m})}_parse(S){let v=S.documentElement;if(v.nodeName.toLowerCase()!=="rdf:rdf")for(v=v.firstChild;v&&v.nodeName.toLowerCase()!=="rdf:rdf";)v=v.nextSibling;const c=v?v.nodeName.toLowerCase():null;if(!v||c!=="rdf:rdf"||!v.hasChildNodes())return;const h=v.childNodes;for(let m=0,E=h.length;m<E;m++){const d=h[m];if(d.nodeName.toLowerCase()!=="rdf:description")continue;for(let T=0,C=d.childNodes.length;T<C;T++)if(d.childNodes[T].nodeName.toLowerCase()!=="#text"){const D=d.childNodes[T],j=D.nodeName.toLowerCase();this._metadataMap.set(j,D.textContent.trim())}}}get(S){return this._metadataMap.has(S)?this._metadataMap.get(S):null}getAll(){const S=Object.create(null);for(const[v,c]of this._metadataMap)S[v]=c;return S}has(S){return this._metadataMap.has(S)}}t.Metadata=_},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleXMLParser=void 0;const r={NoError:0,EndOfDocument:-1,UnterminatedCdat:-2,UnterminatedXmlDeclaration:-3,UnterminatedDoctypeDeclaration:-4,UnterminatedComment:-5,MalformedElement:-6,OutOfMemory:-7,UnterminatedAttributeValue:-8,UnterminatedElement:-9,ElementNeverBegun:-10};function p(h,m){const E=h[m];return E===" "||E===`
`||E==="\r"||E==="	"}function _(h){for(let m=0,E=h.length;m<E;m++)if(!p(h,m))return!1;return!0}class S{_resolveEntities(h){return h.replace(/&([^;]+);/g,(m,E)=>{if(E.substring(0,2)==="#x")return String.fromCharCode(parseInt(E.substring(2),16));if(E.substring(0,1)==="#")return String.fromCharCode(parseInt(E.substring(1),10));switch(E){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return this.onResolveEntity(E)})}_parseContent(h,m){const E=[];let d=m;function T(){for(;d<h.length&&p(h,d);)++d}for(;d<h.length&&!p(h,d)&&h[d]!==">"&&h[d]!=="/";)++d;const C=h.substring(m,d);for(T();d<h.length&&h[d]!==">"&&h[d]!=="/"&&h[d]!=="?";){T();let D="",j="";for(;d<h.length&&!p(h,d)&&h[d]!=="=";)D+=h[d],++d;if(T(),h[d]!=="=")return null;++d,T();const w=h[d];if(w!=='"'&&w!=="'")return null;const G=h.indexOf(w,++d);if(G<0)return null;j=h.substring(d,G),E.push({name:D,value:this._resolveEntities(j)}),d=G+1,T()}return{name:C,attributes:E,parsed:d-m}}_parseProcessingInstruction(h,m){let E=m;function d(){for(;E<h.length&&p(h,E);)++E}for(;E<h.length&&!p(h,E)&&h[E]!==">"&&h[E]!=="/";)++E;const T=h.substring(m,E);d();const C=E;for(;E<h.length&&(h[E]!=="?"||h[E+1]!==">");)++E;const D=h.substring(C,E);return{name:T,value:D,parsed:E-m}}parseXml(h){let m=0;for(;m<h.length;){const E=h[m];let d=m;if(E==="<"){++d;const T=h[d];let C;switch(T){case"/":if(++d,C=h.indexOf(">",d),C<0){this.onError(r.UnterminatedElement);return}this.onEndElement(h.substring(d,C)),d=C+1;break;case"?":++d;const D=this._parseProcessingInstruction(h,d);if(h.substring(d+D.parsed,d+D.parsed+2)!=="?>"){this.onError(r.UnterminatedXmlDeclaration);return}this.onPi(D.name,D.value),d+=D.parsed+2;break;case"!":if(h.substring(d+1,d+3)==="--"){if(C=h.indexOf("-->",d+3),C<0){this.onError(r.UnterminatedComment);return}this.onComment(h.substring(d+3,C)),d=C+3}else if(h.substring(d+1,d+8)==="[CDATA["){if(C=h.indexOf("]]>",d+8),C<0){this.onError(r.UnterminatedCdat);return}this.onCdata(h.substring(d+8,C)),d=C+3}else if(h.substring(d+1,d+8)==="DOCTYPE"){const G=h.indexOf("[",d+8);let x=!1;if(C=h.indexOf(">",d+8),C<0){this.onError(r.UnterminatedDoctypeDeclaration);return}if(G>0&&C>G){if(C=h.indexOf("]>",d+8),C<0){this.onError(r.UnterminatedDoctypeDeclaration);return}x=!0}const A=h.substring(d+8,C+(x?1:0));this.onDoctype(A),d=C+(x?2:1)}else{this.onError(r.MalformedElement);return}break;default:const j=this._parseContent(h,d);if(j===null){this.onError(r.MalformedElement);return}let w=!1;if(h.substring(d+j.parsed,d+j.parsed+2)==="/>")w=!0;else if(h.substring(d+j.parsed,d+j.parsed+1)!==">"){this.onError(r.UnterminatedElement);return}this.onBeginElement(j.name,j.attributes,w),d+=j.parsed+(w?2:1);break}}else{for(;d<h.length&&h[d]!=="<";)d++;const T=h.substring(m,d);this.onText(this._resolveEntities(T))}m=d}}onResolveEntity(h){return`&${h};`}onPi(h,m){}onComment(h){}onCdata(h){}onDoctype(h){}onText(h){}onBeginElement(h,m,E){}onEndElement(h){}onError(h){}}class v{constructor(h,m){this.nodeName=h,this.nodeValue=m,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){return this.childNodes&&this.childNodes[0]}get nextSibling(){const h=this.parentNode.childNodes;if(!h)return;const m=h.indexOf(this);return m===-1?void 0:h[m+1]}get textContent(){return this.childNodes?this.childNodes.map(function(h){return h.textContent}).join(""):this.nodeValue||""}hasChildNodes(){return this.childNodes&&this.childNodes.length>0}}class c extends S{constructor(){super();this._currentFragment=null,this._stack=null,this._errorCode=r.NoError}parseFromString(h){if(this._currentFragment=[],this._stack=[],this._errorCode=r.NoError,this.parseXml(h),this._errorCode!==r.NoError)return;const[m]=this._currentFragment;return m?{documentElement:m}:void 0}onResolveEntity(h){switch(h){case"apos":return"'"}return super.onResolveEntity(h)}onText(h){if(_(h))return;const m=new v("#text",h);this._currentFragment.push(m)}onCdata(h){const m=new v("#text",h);this._currentFragment.push(m)}onBeginElement(h,m,E){const d=new v(h);if(d.childNodes=[],this._currentFragment.push(d),E)return;this._stack.push(this._currentFragment),this._currentFragment=d.childNodes}onEndElement(h){this._currentFragment=this._stack.pop()||[];const m=this._currentFragment[this._currentFragment.length-1];if(!m)return;for(let E=0,d=m.childNodes.length;E<d;E++)m.childNodes[E].parentNode=m}onError(h){this._errorCode=h}}t.SimpleXMLParser=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var r=a(2);class p{constructor(v,c){(0,r.assert)(c,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=v.progressiveDone||!1;const h=v.initialData;if(h&&h.length>0){const m=new Uint8Array(h).buffer;this._queuedChunks.push(m)}this._pdfDataRangeTransport=c,this._isStreamingSupported=!v.disableStream,this._isRangeSupported=!v.disableRange,this._contentLength=v.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((m,E)=>{this._onReceiveData({begin:m,chunk:E})}),this._pdfDataRangeTransport.addProgressListener((m,E)=>{this._onProgress({loaded:m,total:E})}),this._pdfDataRangeTransport.addProgressiveReadListener(m=>{this._onReceiveData({chunk:m})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(v){const c=new Uint8Array(v.chunk).buffer;if(v.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(c):this._queuedChunks.push(c);else{const h=this._rangeReaders.some(function(m){return m._begin!==v.begin?!1:(m._enqueue(c),!0)});(0,r.assert)(h,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}_onProgress(v){if(v.total===void 0){const c=this._rangeReaders[0];c&&c.onProgress&&c.onProgress({loaded:v.loaded})}else{const c=this._fullRequestReader;c&&c.onProgress&&c.onProgress({loaded:v.loaded,total:v.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(v){const c=this._rangeReaders.indexOf(v);c>=0&&this._rangeReaders.splice(c,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const v=this._queuedChunks;return this._queuedChunks=null,new _(this,v,this._progressiveDone)}getRangeReader(v,c){if(c<=this._progressiveDataLength)return null;const h=new S(this,v,c);return this._pdfDataRangeTransport.requestDataRange(v,c),this._rangeReaders.push(h),h}cancelAllRequests(v){this._fullRequestReader&&this._fullRequestReader.cancel(v);const c=this._rangeReaders.slice(0);c.forEach(function(h){h.cancel(v)}),this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=p;class _{constructor(v,c,h=!1){this._stream=v,this._done=h||!1,this._filename=null,this._queuedChunks=c||[],this._loaded=0;for(const m of this._queuedChunks)this._loaded+=m.byteLength;this._requests=[],this._headersReady=Promise.resolve(),v._fullRequestReader=this,this.onProgress=null}_enqueue(v){if(this._done)return;if(this._requests.length>0){const c=this._requests.shift();c.resolve({value:v,done:!1})}else this._queuedChunks.push(v);this._loaded+=v.byteLength}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){const c=this._queuedChunks.shift();return{value:c,done:!1}}if(this._done)return{value:void 0,done:!0};const v=(0,r.createPromiseCapability)();return this._requests.push(v),v.promise}cancel(v){this._done=!0,this._requests.forEach(function(c){c.resolve({value:void 0,done:!0})}),this._requests=[]}progressiveDone(){if(this._done)return;this._done=!0}}class S{constructor(v,c,h){this._stream=v,this._begin=c,this._end=h,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(v){if(this._done)return;if(this._requests.length===0)this._queuedChunk=v;else{const c=this._requests.shift();c.resolve({value:v,done:!1}),this._requests.forEach(function(h){h.resolve({value:void 0,done:!0})}),this._requests=[]}this._done=!0,this._stream._removeRangeReader(this)}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const c=this._queuedChunk;return this._queuedChunk=null,{value:c,done:!1}}if(this._done)return{value:void 0,done:!0};const v=(0,r.createPromiseCapability)();return this._requests.push(v),v.promise}cancel(v){this._done=!0,this._requests.forEach(function(c){c.resolve({value:void 0,done:!0})}),this._requests=[],this._stream._removeRangeReader(this)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLContext=void 0;var r=a(2);class p{constructor({enable:S=!1}){this._enabled=S===!0}get isEnabled(){let S=this._enabled;return S&&(S=_.tryInitGL()),(0,r.shadow)(this,"isEnabled",S)}composeSMask({layer:S,mask:v,properties:c}){return _.composeSMask(S,v,c)}drawFigures({width:S,height:v,backgroundColor:c,figures:h,context:m}){return _.drawFigures(S,v,c,h,m)}clear(){_.cleanup()}}t.WebGLContext=p;var _=function(){function v(f,N,k){var W=f.createShader(k);f.shaderSource(W,N),f.compileShader(W);var U=f.getShaderParameter(W,f.COMPILE_STATUS);if(!U){var L=f.getShaderInfoLog(W);throw new Error("Error during shader compilation: "+L)}return W}function c(f,N){return v(f,N,f.VERTEX_SHADER)}function h(f,N){return v(f,N,f.FRAGMENT_SHADER)}function m(f,N){for(var k=f.createProgram(),W=0,U=N.length;W<U;++W)f.attachShader(k,N[W]);f.linkProgram(k);var L=f.getProgramParameter(k,f.LINK_STATUS);if(!L){var X=f.getProgramInfoLog(k);throw new Error("Error during program linking: "+X)}return k}function E(f,N,k){f.activeTexture(k);var W=f.createTexture();return f.bindTexture(f.TEXTURE_2D,W),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,N),W}var d,T;function C(){if(d)return;T=document.createElement("canvas"),d=T.getContext("webgl",{premultipliedalpha:!1})}var D="  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ",j="  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ",w=null;function G(){var f,N;C(),f=T,T=null,N=d,d=null;var k=c(N,D),W=h(N,j),U=m(N,[k,W]);N.useProgram(U);var L={};L.gl=N,L.canvas=f,L.resolutionLocation=N.getUniformLocation(U,"u_resolution"),L.positionLocation=N.getAttribLocation(U,"a_position"),L.backdropLocation=N.getUniformLocation(U,"u_backdrop"),L.subtypeLocation=N.getUniformLocation(U,"u_subtype");var X=N.getAttribLocation(U,"a_texCoord"),i=N.getUniformLocation(U,"u_image"),g=N.getUniformLocation(U,"u_mask"),P=N.createBuffer();N.bindBuffer(N.ARRAY_BUFFER,P),N.bufferData(N.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),N.STATIC_DRAW),N.enableVertexAttribArray(X),N.vertexAttribPointer(X,2,N.FLOAT,!1,0,0),N.uniform1i(i,0),N.uniform1i(g,1),w=L}function x(f,N,k){var W=f.width,U=f.height;w||G();var L=w,X=L.canvas,i=L.gl;X.width=W,X.height=U,i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.uniform2f(L.resolutionLocation,W,U),k.backdrop?i.uniform4f(L.resolutionLocation,k.backdrop[0],k.backdrop[1],k.backdrop[2],1):i.uniform4f(L.resolutionLocation,0,0,0,0),i.uniform1i(L.subtypeLocation,k.subtype==="Luminosity"?1:0);var g=E(i,f,i.TEXTURE0),P=E(i,N,i.TEXTURE1),y=i.createBuffer();return i.bindBuffer(i.ARRAY_BUFFER,y),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,W,0,0,U,0,U,W,0,W,U]),i.STATIC_DRAW),i.enableVertexAttribArray(L.positionLocation),i.vertexAttribPointer(L.positionLocation,2,i.FLOAT,!1,0,0),i.clearColor(0,0,0,0),i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLES,0,6),i.flush(),i.deleteTexture(g),i.deleteTexture(P),i.deleteBuffer(y),X}var A="  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ",n="  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ",s=null;function u(){var f,N;C(),f=T,T=null,N=d,d=null;var k=c(N,A),W=h(N,n),U=m(N,[k,W]);N.useProgram(U);var L={};L.gl=N,L.canvas=f,L.resolutionLocation=N.getUniformLocation(U,"u_resolution"),L.scaleLocation=N.getUniformLocation(U,"u_scale"),L.offsetLocation=N.getUniformLocation(U,"u_offset"),L.positionLocation=N.getAttribLocation(U,"a_position"),L.colorLocation=N.getAttribLocation(U,"a_color"),s=L}function b(f,N,k,W,U){s||u();var L=s,X=L.canvas,i=L.gl;X.width=f,X.height=N,i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.uniform2f(L.resolutionLocation,f,N);var g=0,P,y,o;for(P=0,y=W.length;P<y;P++)switch(W[P].type){case"lattice":o=W[P].coords.length/W[P].verticesPerRow|0,g+=(o-1)*(W[P].verticesPerRow-1)*6;break;case"triangles":g+=W[P].coords.length;break}var l=new Float32Array(g*2),R=new Uint8Array(g*3),I=U.coords,M=U.colors,O=0,B=0;for(P=0,y=W.length;P<y;P++){var H=W[P],z=H.coords,Y=H.colors;switch(H.type){case"lattice":var V=H.verticesPerRow;o=z.length/V|0;for(var $=1;$<o;$++)for(var K=$*V+1,ee=1;ee<V;ee++,K++)l[O]=I[z[K-V-1]],l[O+1]=I[z[K-V-1]+1],l[O+2]=I[z[K-V]],l[O+3]=I[z[K-V]+1],l[O+4]=I[z[K-1]],l[O+5]=I[z[K-1]+1],R[B]=M[Y[K-V-1]],R[B+1]=M[Y[K-V-1]+1],R[B+2]=M[Y[K-V-1]+2],R[B+3]=M[Y[K-V]],R[B+4]=M[Y[K-V]+1],R[B+5]=M[Y[K-V]+2],R[B+6]=M[Y[K-1]],R[B+7]=M[Y[K-1]+1],R[B+8]=M[Y[K-1]+2],l[O+6]=l[O+2],l[O+7]=l[O+3],l[O+8]=l[O+4],l[O+9]=l[O+5],l[O+10]=I[z[K]],l[O+11]=I[z[K]+1],R[B+9]=R[B+3],R[B+10]=R[B+4],R[B+11]=R[B+5],R[B+12]=R[B+6],R[B+13]=R[B+7],R[B+14]=R[B+8],R[B+15]=M[Y[K]],R[B+16]=M[Y[K]+1],R[B+17]=M[Y[K]+2],O+=12,B+=18;break;case"triangles":for(var Q=0,te=z.length;Q<te;Q++)l[O]=I[z[Q]],l[O+1]=I[z[Q]+1],R[B]=M[Y[Q]],R[B+1]=M[Y[Q]+1],R[B+2]=M[Y[Q]+2],O+=2,B+=3;break}}k?i.clearColor(k[0]/255,k[1]/255,k[2]/255,1):i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT);var ne=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,ne),i.bufferData(i.ARRAY_BUFFER,l,i.STATIC_DRAW),i.enableVertexAttribArray(L.positionLocation),i.vertexAttribPointer(L.positionLocation,2,i.FLOAT,!1,0,0);var oe=i.createBuffer();return i.bindBuffer(i.ARRAY_BUFFER,oe),i.bufferData(i.ARRAY_BUFFER,R,i.STATIC_DRAW),i.enableVertexAttribArray(L.colorLocation),i.vertexAttribPointer(L.colorLocation,3,i.UNSIGNED_BYTE,!1,0,0),i.uniform2f(L.scaleLocation,U.scaleX,U.scaleY),i.uniform2f(L.offsetLocation,U.offsetX,U.offsetY),i.drawArrays(i.TRIANGLES,0,g),i.flush(),i.deleteBuffer(ne),i.deleteBuffer(oe),X}return{tryInitGL(){try{return C(),!!d}catch(f){}return!1},composeSMask:x,drawFigures:b,cleanup(){w&&w.canvas&&(w.canvas.width=0,w.canvas.height=0),s&&s.canvas&&(s.canvas.width=0,s.canvas.height=0),w=null,s=null}}}()},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var r=a(1),p=a(2);class _{static create(i){const g=i.data.annotationType;switch(g){case p.AnnotationType.LINK:return new v(i);case p.AnnotationType.TEXT:return new c(i);case p.AnnotationType.WIDGET:const P=i.data.fieldType;switch(P){case"Tx":return new m(i);case"Btn":return i.data.radioButton?new d(i):i.data.checkBox?new E(i):new T(i);case"Ch":return new C(i)}return new h(i);case p.AnnotationType.POPUP:return new D(i);case p.AnnotationType.FREETEXT:return new w(i);case p.AnnotationType.LINE:return new G(i);case p.AnnotationType.SQUARE:return new x(i);case p.AnnotationType.CIRCLE:return new A(i);case p.AnnotationType.POLYLINE:return new n(i);case p.AnnotationType.CARET:return new u(i);case p.AnnotationType.INK:return new b(i);case p.AnnotationType.POLYGON:return new s(i);case p.AnnotationType.HIGHLIGHT:return new f(i);case p.AnnotationType.UNDERLINE:return new N(i);case p.AnnotationType.SQUIGGLY:return new k(i);case p.AnnotationType.STRIKEOUT:return new W(i);case p.AnnotationType.STAMP:return new U(i);case p.AnnotationType.FILEATTACHMENT:return new L(i);default:return new S(i)}}}class S{constructor(i,g=!1,P=!1){this.isRenderable=g,this.data=i.data,this.layer=i.layer,this.page=i.page,this.viewport=i.viewport,this.linkService=i.linkService,this.downloadManager=i.downloadManager,this.imageResourcesPath=i.imageResourcesPath,this.renderInteractiveForms=i.renderInteractiveForms,this.svgFactory=i.svgFactory,g&&(this.container=this._createContainer(P))}_createContainer(i=!1){const g=this.data,P=this.page,y=this.viewport,o=document.createElement("section");let l=g.rect[2]-g.rect[0],R=g.rect[3]-g.rect[1];o.setAttribute("data-annotation-id",g.id);const I=p.Util.normalizeRect([g.rect[0],P.view[3]-g.rect[1]+P.view[1],g.rect[2],P.view[3]-g.rect[3]+P.view[1]]);if(o.style.transform=`matrix(${y.transform.join(",")})`,o.style.transformOrigin=`-${I[0]}px -${I[1]}px`,!i&&g.borderStyle.width>0){o.style.borderWidth=`${g.borderStyle.width}px`,g.borderStyle.style!==p.AnnotationBorderStyleType.UNDERLINE&&(l=l-2*g.borderStyle.width,R=R-2*g.borderStyle.width);const M=g.borderStyle.horizontalCornerRadius,O=g.borderStyle.verticalCornerRadius;if(M>0||O>0){const B=`${M}px / ${O}px`;o.style.borderRadius=B}switch(g.borderStyle.style){case p.AnnotationBorderStyleType.SOLID:o.style.borderStyle="solid";break;case p.AnnotationBorderStyleType.DASHED:o.style.borderStyle="dashed";break;case p.AnnotationBorderStyleType.BEVELED:(0,p.warn)("Unimplemented border style: beveled");break;case p.AnnotationBorderStyleType.INSET:(0,p.warn)("Unimplemented border style: inset");break;case p.AnnotationBorderStyleType.UNDERLINE:o.style.borderBottomStyle="solid";break;default:break}g.color?o.style.borderColor=p.Util.makeCssRgb(g.color[0]|0,g.color[1]|0,g.color[2]|0):o.style.borderWidth=0}return o.style.left=`${I[0]}px`,o.style.top=`${I[1]}px`,o.style.width=`${l}px`,o.style.height=`${R}px`,o}_createPopup(i,g,P){g||(g=document.createElement("div"),g.style.height=i.style.height,g.style.width=i.style.width,i.appendChild(g));const y=new j({container:i,trigger:g,color:P.color,title:P.title,modificationDate:P.modificationDate,contents:P.contents,hideWrapper:!0}),o=y.render();o.style.left=i.style.width,i.appendChild(o)}render(){(0,p.unreachable)("Abstract method `AnnotationElement.render` called")}}class v extends S{constructor(i){const g=!!(i.data.url||i.data.dest||i.data.action);super(i,g)}render(){this.container.className="linkAnnotation";const{data:i,linkService:g}=this,P=document.createElement("a");return i.url?(0,r.addLinkAttributes)(P,{url:i.url,target:i.newWindow?r.LinkTarget.BLANK:g.externalLinkTarget,rel:g.externalLinkRel,enabled:g.externalLinkEnabled}):i.action?this._bindNamedAction(P,i.action):this._bindLink(P,i.dest),this.container.appendChild(P),this.container}_bindLink(i,g){i.href=this.linkService.getDestinationHash(g),i.onclick=()=>(g&&this.linkService.navigateTo(g),!1),g&&(i.className="internalLink")}_bindNamedAction(i,g){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeNamedAction(g),!1),i.className="internalLink"}}class c extends S{constructor(i){const g=!!(i.data.hasPopup||i.data.title||i.data.contents);super(i,g)}render(){this.container.className="textAnnotation";const i=document.createElement("img");return i.style.height=this.container.style.height,i.style.width=this.container.style.width,i.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",i.alt="[{{type}} Annotation]",i.dataset.l10nId="text_annotation_type",i.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,i,this.data),this.container.appendChild(i),this.container}}class h extends S{render(){return this.container}}class m extends h{constructor(i){const g=i.renderInteractiveForms||!i.data.hasAppearance&&!!i.data.fieldValue;super(i,g)}render(){const i=["left","center","right"];this.container.className="textWidgetAnnotation";let g=null;if(this.renderInteractiveForms){if(this.data.multiLine?(g=document.createElement("textarea"),g.textContent=this.data.fieldValue):(g=document.createElement("input"),g.type="text",g.setAttribute("value",this.data.fieldValue)),g.disabled=this.data.readOnly,g.name=this.data.fieldName,this.data.maxLen!==null&&(g.maxLength=this.data.maxLen),this.data.comb){const P=this.data.rect[2]-this.data.rect[0],y=P/this.data.maxLen;g.classList.add("comb"),g.style.letterSpacing=`calc(${y}px - 1ch)`}}else{g=document.createElement("div"),g.textContent=this.data.fieldValue,g.style.verticalAlign="middle",g.style.display="table-cell";let P=null;this.data.fontRefName&&this.page.commonObjs.has(this.data.fontRefName)&&(P=this.page.commonObjs.get(this.data.fontRefName)),this._setTextStyle(g,P)}return this.data.textAlignment!==null&&(g.style.textAlign=i[this.data.textAlignment]),this.container.appendChild(g),this.container}_setTextStyle(i,g){const P=i.style;if(P.fontSize=`${this.data.fontSize}px`,P.direction=this.data.fontDirection<0?"rtl":"ltr",!g)return;let y="normal";g.black?y="900":g.bold&&(y="bold"),P.fontWeight=y,P.fontStyle=g.italic?"italic":"normal";const o=g.loadedName?`"${g.loadedName}", `:"",l=g.fallbackName||"Helvetica, sans-serif";P.fontFamily=o+l}}class E extends h{constructor(i){super(i,i.renderInteractiveForms)}render(){this.container.className="buttonWidgetAnnotation checkBox";const i=document.createElement("input");return i.disabled=this.data.readOnly,i.type="checkbox",i.name=this.data.fieldName,this.data.fieldValue&&this.data.fieldValue!=="Off"&&i.setAttribute("checked",!0),this.container.appendChild(i),this.container}}class d extends h{constructor(i){super(i,i.renderInteractiveForms)}render(){this.container.className="buttonWidgetAnnotation radioButton";const i=document.createElement("input");return i.disabled=this.data.readOnly,i.type="radio",i.name=this.data.fieldName,this.data.fieldValue===this.data.buttonValue&&i.setAttribute("checked",!0),this.container.appendChild(i),this.container}}class T extends v{render(){const i=super.render();return i.className="buttonWidgetAnnotation pushButton",i}}class C extends h{constructor(i){super(i,i.renderInteractiveForms)}render(){this.container.className="choiceWidgetAnnotation";const i=document.createElement("select");i.disabled=this.data.readOnly,i.name=this.data.fieldName,this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0));for(const g of this.data.options){const P=document.createElement("option");P.textContent=g.displayValue,P.value=g.exportValue,this.data.fieldValue.includes(g.displayValue)&&P.setAttribute("selected",!0),i.appendChild(P)}return this.container.appendChild(i),this.container}}class D extends S{constructor(i){const g=!!(i.data.title||i.data.contents);super(i,g)}render(){const i=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",i.includes(this.data.parentType))return this.container;const g=`[data-annotation-id="${this.data.parentId}"]`,P=this.layer.querySelector(g);if(!P)return this.container;const y=new j({container:this.container,trigger:P,color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),o=parseFloat(P.style.left),l=parseFloat(P.style.width);return this.container.style.transformOrigin=`-${o+l}px -${P.style.top}`,this.container.style.left=`${o+l}px`,this.container.appendChild(y.render()),this.container}}class j{constructor(i){this.container=i.container,this.trigger=i.trigger,this.color=i.color,this.title=i.title,this.modificationDate=i.modificationDate,this.contents=i.contents,this.hideWrapper=i.hideWrapper||!1,this.pinned=!1}render(){const i=.7,g=document.createElement("div");g.className="popupWrapper",this.hideElement=this.hideWrapper?g:this.container,this.hideElement.setAttribute("hidden",!0);const P=document.createElement("div");P.className="popup";const y=this.color;if(y){const I=i*(255-y[0])+y[0],M=i*(255-y[1])+y[1],O=i*(255-y[2])+y[2];P.style.backgroundColor=p.Util.makeCssRgb(I|0,M|0,O|0)}const o=document.createElement("h1");o.textContent=this.title,P.appendChild(o);const l=r.PDFDateString.toDateObject(this.modificationDate);if(l){const I=document.createElement("span");I.textContent="{{date}}, {{time}}",I.dataset.l10nId="annotation_date_string",I.dataset.l10nArgs=JSON.stringify({date:l.toLocaleDateString(),time:l.toLocaleTimeString()}),P.appendChild(I)}const R=this._formatContents(this.contents);return P.appendChild(R),this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),P.addEventListener("click",this._hide.bind(this,!0)),g.appendChild(P),g}_formatContents(i){const g=document.createElement("p"),P=i.split(/(?:\r\n?|\n)/);for(let y=0,o=P.length;y<o;++y){const l=P[y];g.appendChild(document.createTextNode(l)),y<o-1&&g.appendChild(document.createElement("br"))}return g}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(i=!1){i&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}_hide(i=!0){i&&(this.pinned=!1),!this.hideElement.hasAttribute("hidden")&&!this.pinned&&(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}class w extends S{constructor(i){const g=!!(i.data.hasPopup||i.data.title||i.data.contents);super(i,g,!0)}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class G extends S{constructor(i){const g=!!(i.data.hasPopup||i.data.title||i.data.contents);super(i,g,!0)}render(){this.container.className="lineAnnotation";const i=this.data,g=i.rect[2]-i.rect[0],P=i.rect[3]-i.rect[1],y=this.svgFactory.create(g,P),o=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",i.rect[2]-i.lineCoordinates[0]),o.setAttribute("y1",i.rect[3]-i.lineCoordinates[1]),o.setAttribute("x2",i.rect[2]-i.lineCoordinates[2]),o.setAttribute("y2",i.rect[3]-i.lineCoordinates[3]),o.setAttribute("stroke-width",i.borderStyle.width||1),o.setAttribute("stroke","transparent"),y.appendChild(o),this.container.append(y),this._createPopup(this.container,o,i),this.container}}class x extends S{constructor(i){const g=!!(i.data.hasPopup||i.data.title||i.data.contents);super(i,g,!0)}render(){this.container.className="squareAnnotation";const i=this.data,g=i.rect[2]-i.rect[0],P=i.rect[3]-i.rect[1],y=this.svgFactory.create(g,P),o=i.borderStyle.width,l=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",g-o),l.setAttribute("height",P-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","none"),y.appendChild(l),this.container.append(y),this._createPopup(this.container,l,i),this.container}}class A extends S{constructor(i){const g=!!(i.data.hasPopup||i.data.title||i.data.contents);super(i,g,!0)}render(){this.container.className="circleAnnotation";const i=this.data,g=i.rect[2]-i.rect[0],P=i.rect[3]-i.rect[1],y=this.svgFactory.create(g,P),o=i.borderStyle.width,l=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",g/2),l.setAttribute("cy",P/2),l.setAttribute("rx",g/2-o/2),l.setAttribute("ry",P/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","none"),y.appendChild(l),this.container.append(y),this._createPopup(this.container,l,i),this.container}}class n extends S{constructor(i){const g=!!(i.data.hasPopup||i.data.title||i.data.contents);super(i,g,!0);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const i=this.data,g=i.rect[2]-i.rect[0],P=i.rect[3]-i.rect[1],y=this.svgFactory.create(g,P);let o=[];for(const R of i.vertices){const I=R.x-i.rect[0],M=i.rect[3]-R.y;o.push(I+","+M)}o=o.join(" ");const l=this.svgFactory.createElement(this.svgElementName);return l.setAttribute("points",o),l.setAttribute("stroke-width",i.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","none"),y.appendChild(l),this.container.append(y),this._createPopup(this.container,l,i),this.container}}class s extends n{constructor(i){super(i);this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class u extends S{constructor(i){const g=!!(i.data.hasPopup||i.data.title||i.data.contents);super(i,g,!0)}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class b extends S{constructor(i){const g=!!(i.data.hasPopup||i.data.title||i.data.contents);super(i,g,!0);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const i=this.data,g=i.rect[2]-i.rect[0],P=i.rect[3]-i.rect[1],y=this.svgFactory.create(g,P);for(const o of i.inkLists){let l=[];for(const I of o){const M=I.x-i.rect[0],O=i.rect[3]-I.y;l.push(`${M},${O}`)}l=l.join(" ");const R=this.svgFactory.createElement(this.svgElementName);R.setAttribute("points",l),R.setAttribute("stroke-width",i.borderStyle.width||1),R.setAttribute("stroke","transparent"),R.setAttribute("fill","none"),this._createPopup(this.container,R,i),y.appendChild(R)}return this.container.append(y),this.container}}class f extends S{constructor(i){const g=!!(i.data.hasPopup||i.data.title||i.data.contents);super(i,g,!0)}render(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class N extends S{constructor(i){const g=!!(i.data.hasPopup||i.data.title||i.data.contents);super(i,g,!0)}render(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class k extends S{constructor(i){const g=!!(i.data.hasPopup||i.data.title||i.data.contents);super(i,g,!0)}render(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class W extends S{constructor(i){const g=!!(i.data.hasPopup||i.data.title||i.data.contents);super(i,g,!0)}render(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class U extends S{constructor(i){const g=!!(i.data.hasPopup||i.data.title||i.data.contents);super(i,g,!0)}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class L extends S{constructor(i){super(i,!0);const{filename:g,content:P}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(g),this.content=P,this.linkService.eventBus&&this.linkService.eventBus.dispatch("fileattachmentannotation",{source:this,id:(0,p.stringToPDFString)(g),filename:g,content:P})}render(){this.container.className="fileAttachmentAnnotation";const i=document.createElement("div");return i.style.height=this.container.style.height,i.style.width=this.container.style.width,i.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.title||this.data.contents)&&this._createPopup(this.container,i,this.data),this.container.appendChild(i),this.container}_download(){if(!this.downloadManager){(0,p.warn)("Download cannot be started due to unavailable download manager");return}this.downloadManager.downloadData(this.content,this.filename,"")}}class X{static render(i){const g=[],P=[];for(const y of i.annotations){if(!y)continue;if(y.annotationType===p.AnnotationType.POPUP){P.push(y);continue}g.push(y)}P.length&&g.push(...P);for(const y of g){const o=_.create({data:y,layer:i.div,page:i.page,viewport:i.viewport,linkService:i.linkService,downloadManager:i.downloadManager,imageResourcesPath:i.imageResourcesPath||"",renderInteractiveForms:i.renderInteractiveForms||!1,svgFactory:new r.DOMSVGFactory});o.isRenderable&&i.div.appendChild(o.render())}}static update(i){for(const g of i.annotations){const P=i.div.querySelector(`[data-annotation-id="${g.id}"]`);P&&(P.style.transform=`matrix(${i.viewport.transform.join(",")})`)}i.div.removeAttribute("hidden")}}t.AnnotationLayer=X},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderTextLayer=void 0;var r=a(2),p=function(){var S=1e5,v=/\S/;function c(w){return!v.test(w)}function h(w,G,x){var A=document.createElement("span"),n={angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(w._textDivs.push(A),c(G.str)){n.isWhitespace=!0,w._textDivProperties.set(A,n);return}var s=r.Util.transform(w._viewport.transform,G.transform),u=Math.atan2(s[1],s[0]),b=x[G.fontName];b.vertical&&(u+=Math.PI/2);var f=Math.sqrt(s[2]*s[2]+s[3]*s[3]),N=f;b.ascent?N=b.ascent*N:b.descent&&(N=(1+b.descent)*N);let k,W;u===0?(k=s[4],W=s[5]-N):(k=s[4]+N*Math.sin(u),W=s[5]-N*Math.cos(u)),A.style.left=`${k}px`,A.style.top=`${W}px`,A.style.fontSize=`${f}px`,A.style.fontFamily=b.fontFamily,A.textContent=G.str,w._fontInspectorEnabled&&(A.dataset.fontName=G.fontName),u!==0&&(n.angle=u*(180/Math.PI));let U=!1;if(G.str.length>1)U=!0;else if(G.transform[0]!==G.transform[3]){const o=Math.abs(G.transform[0]),l=Math.abs(G.transform[3]);o!==l&&Math.max(o,l)/Math.min(o,l)>1.5&&(U=!0)}if(U&&(b.vertical?n.canvasWidth=G.height*w._viewport.scale:n.canvasWidth=G.width*w._viewport.scale),w._textDivProperties.set(A,n),w._textContentStream&&w._layoutText(A),w._enhanceTextSelection){var L=1,X=0;u!==0&&(L=Math.cos(u),X=Math.sin(u));var i=(b.vertical?G.height:G.width)*w._viewport.scale,g=f,P,y;u!==0?(P=[L,X,-X,L,k,W],y=r.Util.getAxialAlignedBoundingBox([0,0,i,g],P)):y=[k,W,k+i,W+g],w._bounds.push({left:y[0],top:y[1],right:y[2],bottom:y[3],div:A,size:[i,g],m:P})}}function m(w){if(w._canceled)return;var G=w._textDivs,x=w._capability,A=G.length;if(A>S){w._renderingDone=!0,x.resolve();return}if(!w._textContentStream)for(var n=0;n<A;n++)w._layoutText(G[n]);w._renderingDone=!0,x.resolve()}function E(w,G,x){let A=0;for(let n=0;n<x;n++){const s=w[G++];s>0&&(A=A?Math.min(s,A):s)}return A}function d(w){for(var G=w._bounds,x=w._viewport,A=T(x.width,x.height,G),n=0;n<A.length;n++){var s=G[n].div,u=w._textDivProperties.get(s);if(u.angle===0){u.paddingLeft=G[n].left-A[n].left,u.paddingTop=G[n].top-A[n].top,u.paddingRight=A[n].right-G[n].right,u.paddingBottom=A[n].bottom-G[n].bottom,w._textDivProperties.set(s,u);continue}var b=A[n],f=G[n],N=f.m,k=N[0],W=N[1],U=[[0,0],[0,f.size[1]],[f.size[0],0],f.size],L=new Float64Array(64);U.forEach(function(i,g){var P=r.Util.applyTransform(i,N);L[g+0]=k&&(b.left-P[0])/k,L[g+4]=W&&(b.top-P[1])/W,L[g+8]=k&&(b.right-P[0])/k,L[g+12]=W&&(b.bottom-P[1])/W,L[g+16]=W&&(b.left-P[0])/-W,L[g+20]=k&&(b.top-P[1])/k,L[g+24]=W&&(b.right-P[0])/-W,L[g+28]=k&&(b.bottom-P[1])/k,L[g+32]=k&&(b.left-P[0])/-k,L[g+36]=W&&(b.top-P[1])/-W,L[g+40]=k&&(b.right-P[0])/-k,L[g+44]=W&&(b.bottom-P[1])/-W,L[g+48]=W&&(b.left-P[0])/W,L[g+52]=k&&(b.top-P[1])/-k,L[g+56]=W&&(b.right-P[0])/W,L[g+60]=k&&(b.bottom-P[1])/-k});var X=1+Math.min(Math.abs(k),Math.abs(W));u.paddingLeft=E(L,32,16)/X,u.paddingTop=E(L,48,16)/X,u.paddingRight=E(L,0,16)/X,u.paddingBottom=E(L,16,16)/X,w._textDivProperties.set(s,u)}}function T(w,G,x){var A=x.map(function(s,u){return{x1:s.left,y1:s.top,x2:s.right,y2:s.bottom,index:u,x1New:void 0,x2New:void 0}});C(w,A);var n=new Array(x.length);return A.forEach(function(s){var u=s.index;n[u]={left:s.x1New,top:0,right:s.x2New,bottom:0}}),x.map(function(s,u){var b=n[u],f=A[u];f.x1=s.top,f.y1=w-b.right,f.x2=s.bottom,f.y2=w-b.left,f.index=u,f.x1New=void 0,f.x2New=void 0}),C(G,A),A.forEach(function(s){var u=s.index;n[u].top=s.x1New,n[u].bottom=s.x2New}),n}function C(w,G){G.sort(function(n,s){return n.x1-s.x1||n.index-s.index});var x={x1:-Infinity,y1:-Infinity,x2:0,y2:Infinity,index:-1,x1New:0,x2New:0},A=[{start:-Infinity,end:Infinity,boundary:x}];G.forEach(function(n){for(var s=0;s<A.length&&A[s].end<=n.y1;)s++;for(var u=A.length-1;u>=0&&A[u].start>=n.y2;)u--;var b,f,N,k,W=-Infinity;for(N=s;N<=u;N++){b=A[N],f=b.boundary;var U;f.x2>n.x1?U=f.index>n.index?f.x1New:n.x1:f.x2New===void 0?U=(f.x2+n.x1)/2:U=f.x2New,U>W&&(W=U)}for(n.x1New=W,N=s;N<=u;N++)b=A[N],f=b.boundary,f.x2New===void 0?f.x2>n.x1?f.index>n.index&&(f.x2New=f.x2):f.x2New=W:f.x2New>W&&(f.x2New=Math.max(W,f.x2));var L=[],X=null;for(N=s;N<=u;N++){b=A[N],f=b.boundary;var i=f.x2>n.x2?f:n;X===i?L[L.length-1].end=b.end:(L.push({start:b.start,end:b.end,boundary:i}),X=i)}for(A[s].start<n.y1&&(L[0].start=n.y1,L.unshift({start:A[s].start,end:n.y1,boundary:A[s].boundary})),n.y2<A[u].end&&(L[L.length-1].end=n.y2,L.push({start:n.y2,end:A[u].end,boundary:A[u].boundary})),N=s;N<=u;N++){if(b=A[N],f=b.boundary,f.x2New!==void 0)continue;var g=!1;for(k=s-1;!g&&k>=0&&A[k].start>=f.y1;k--)g=A[k].boundary===f;for(k=u+1;!g&&k<A.length&&A[k].end<=f.y2;k++)g=A[k].boundary===f;for(k=0;!g&&k<L.length;k++)g=L[k].boundary===f;g||(f.x2New=W)}Array.prototype.splice.apply(A,[s,u-s+1].concat(L))}),A.forEach(function(n){var s=n.boundary;s.x2New===void 0&&(s.x2New=Math.max(w,s.x2))})}function D({textContent:w,textContentStream:G,container:x,viewport:A,textDivs:n,textContentItemsStr:s,enhanceTextSelection:u}){this._textContent=w,this._textContentStream=G,this._container=x,this._viewport=A,this._textDivs=n||[],this._textContentItemsStr=s||[],this._enhanceTextSelection=!!u,this._fontInspectorEnabled=!!(globalThis.FontInspector&&globalThis.FontInspector.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,r.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}D.prototype={get promise(){return this._capability.promise},cancel:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))},_processItems(w,G){for(let x=0,A=w.length;x<A;x++)this._textContentItemsStr.push(w[x].str),h(this,w[x],G)},_layoutText(w){const G=this._textDivProperties.get(w);if(G.isWhitespace)return;let x="";if(G.canvasWidth!==0){const{fontSize:A,fontFamily:n}=w.style;(A!==this._layoutTextLastFontSize||n!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${A} ${n}`,this._layoutTextLastFontSize=A,this._layoutTextLastFontFamily=n);const{width:s}=this._layoutTextCtx.measureText(w.textContent);s>0&&(G.scale=G.canvasWidth/s,x=`scaleX(${G.scale})`)}G.angle!==0&&(x=`rotate(${G.angle}deg) ${x}`),x.length>0&&(this._enhanceTextSelection&&(G.originalTransform=x),w.style.transform=x),this._textDivProperties.set(w,G),this._container.appendChild(w)},_render:function(G){const x=(0,r.createPromiseCapability)();let A=Object.create(null);const n=document.createElement("canvas");if(n.mozOpaque=!0,this._layoutTextCtx=n.getContext("2d",{alpha:!1}),this._textContent){const s=this._textContent.items,u=this._textContent.styles;this._processItems(s,u),x.resolve()}else if(this._textContentStream){const s=()=>{this._reader.read().then(({value:u,done:b})=>{if(b){x.resolve();return}Object.assign(A,u.styles),this._processItems(u.items,A),s()},x.reject)};this._reader=this._textContentStream.getReader(),s()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');x.promise.then(()=>{A=null,G?this._renderTimer=setTimeout(()=>{m(this),this._renderTimer=null},G):m(this)},this._capability.reject)},expandTextDivs:function(G){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(d(this),this._bounds=null);const x=[],A=[];for(var n=0,s=this._textDivs.length;n<s;n++){const u=this._textDivs[n],b=this._textDivProperties.get(u);if(b.isWhitespace)continue;G?(x.length=0,A.length=0,b.originalTransform&&x.push(b.originalTransform),b.paddingTop>0?(A.push(`${b.paddingTop}px`),x.push(`translateY(${-b.paddingTop}px)`)):A.push(0),b.paddingRight>0?A.push(`${b.paddingRight/b.scale}px`):A.push(0),b.paddingBottom>0?A.push(`${b.paddingBottom}px`):A.push(0),b.paddingLeft>0?(A.push(`${b.paddingLeft/b.scale}px`),x.push(`translateX(${-b.paddingLeft/b.scale}px)`)):A.push(0),u.style.padding=A.join(" "),x.length&&(u.style.transform=x.join(" "))):(u.style.padding=null,u.style.transform=b.originalTransform)}}};function j(w){var G=new D({textContent:w.textContent,textContentStream:w.textContentStream,container:w.container,viewport:w.viewport,textDivs:w.textDivs,textContentItemsStr:w.textContentItemsStr,enhanceTextSelection:w.enhanceTextSelection});return G._render(w.timeout),G}return j}();t.renderTextLayer=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var r=a(2),p=a(1),_=a(4);let S=function(){throw new Error("Not implemented: SVGGraphics")};t.SVGGraphics=S;{const m={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},E="http://www.w3.org/XML/1998/namespace",d="http://www.w3.org/1999/xlink",T=["butt","round","square"],C=["miter","round","bevel"],D=function(){const A=new Uint8Array([137,80,78,71,13,10,26,10]),n=12,s=new Int32Array(256);for(let U=0;U<256;U++){let L=U;for(let X=0;X<8;X++)L&1?L=3988292384^L>>1&2147483647:L=L>>1&2147483647;s[U]=L}function u(U,L,X){let i=-1;for(let g=L;g<X;g++){const P=(i^U[g])&255,y=s[P];i=i>>>8^y}return i^-1}function b(U,L,X,i){let g=i;const P=L.length;X[g]=P>>24&255,X[g+1]=P>>16&255,X[g+2]=P>>8&255,X[g+3]=P&255,g+=4,X[g]=U.charCodeAt(0)&255,X[g+1]=U.charCodeAt(1)&255,X[g+2]=U.charCodeAt(2)&255,X[g+3]=U.charCodeAt(3)&255,g+=4,X.set(L,g),g+=L.length;const y=u(X,i+4,g);X[g]=y>>24&255,X[g+1]=y>>16&255,X[g+2]=y>>8&255,X[g+3]=y&255}function f(U,L,X){let i=1,g=0;for(let P=L;P<X;++P)i=(i+(U[P]&255))%65521,g=(g+i)%65521;return g<<16|i}function N(U){if(!_.isNodeJS)return k(U);try{let L;parseInt(process.versions.node)>=8?L=U:L=Buffer.from(U);const X=Ve().deflateSync(L,{level:9});return X instanceof Uint8Array?X:new Uint8Array(X)}catch(L){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+L)}return k(U)}function k(U){let L=U.length;const X=65535,i=Math.ceil(L/X),g=new Uint8Array(2+L+i*5+4);let P=0;g[P++]=120,g[P++]=156;let y=0;for(;L>X;)g[P++]=0,g[P++]=255,g[P++]=255,g[P++]=0,g[P++]=0,g.set(U.subarray(y,y+X),P),P+=X,y+=X,L-=X;g[P++]=1,g[P++]=L&255,g[P++]=L>>8&255,g[P++]=~L&65535&255,g[P++]=(~L&65535)>>8&255,g.set(U.subarray(y),P),P+=U.length-y;const o=f(U,0,U.length);return g[P++]=o>>24&255,g[P++]=o>>16&255,g[P++]=o>>8&255,g[P++]=o&255,g}function W(U,L,X,i){const g=U.width,P=U.height;let y,o,l;const R=U.data;switch(L){case r.ImageKind.GRAYSCALE_1BPP:o=0,y=1,l=g+7>>3;break;case r.ImageKind.RGB_24BPP:o=2,y=8,l=g*3;break;case r.ImageKind.RGBA_32BPP:o=6,y=8,l=g*4;break;default:throw new Error("invalid format")}const I=new Uint8Array((1+l)*P);let M=0,O=0;for(let $=0;$<P;++$)I[M++]=0,I.set(R.subarray(O,O+l),M),O+=l,M+=l;if(L===r.ImageKind.GRAYSCALE_1BPP&&i){M=0;for(let $=0;$<P;$++){M++;for(let K=0;K<l;K++)I[M++]^=255}}const B=new Uint8Array([g>>24&255,g>>16&255,g>>8&255,g&255,P>>24&255,P>>16&255,P>>8&255,P&255,y,o,0,0,0]),H=N(I),z=A.length+n*3+B.length+H.length,Y=new Uint8Array(z);let V=0;return Y.set(A,V),V+=A.length,b("IHDR",B,Y,V),V+=n+B.length,b("IDATA",H,Y,V),V+=n+H.length,b("IEND",new Uint8Array(0),Y,V),(0,r.createObjectURL)(Y,"image/png",X)}return function(L,X,i){const g=L.kind===void 0?r.ImageKind.GRAYSCALE_1BPP:L.kind;return W(L,g,X,i)}}();class j{constructor(){this.fontSizeScale=1,this.fontWeight=m.fontWeight,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=m.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(A,n){this.x=A,this.y=n}}function v(A){let n=[];const s=[];for(const u of A){if(u.fn==="save"){n.push({fnId:92,fn:"group",items:[]}),s.push(n),n=n[n.length-1].items;continue}u.fn==="restore"?n=s.pop():n.push(u)}return n}function c(A){if(Number.isInteger(A))return A.toString();const n=A.toFixed(10);let s=n.length-1;if(n[s]!=="0")return n;do s--;while(n[s]==="0");return n.substring(0,n[s]==="."?s:s+1)}function h(A){if(A[4]===0&&A[5]===0){if(A[1]===0&&A[2]===0)return A[0]===1&&A[3]===1?"":`scale(${c(A[0])} ${c(A[3])})`;if(A[0]===A[3]&&A[1]===-A[2]){const n=Math.acos(A[0])*180/Math.PI;return`rotate(${c(n)})`}}else if(A[0]===1&&A[1]===0&&A[2]===0&&A[3]===1)return`translate(${c(A[4])} ${c(A[5])})`;return`matrix(${c(A[0])} ${c(A[1])} ${c(A[2])} ${c(A[3])} ${c(A[4])} ${c(A[5])})`}let w=0,G=0,x=0;t.SVGGraphics=S=class{constructor(n,s,u=!1){this.svgFactory=new p.DOMSVGFactory,this.current=new j,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=n,this.objs=s,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!u,this._operatorIdMapping=[];for(const b in r.OPS)this._operatorIdMapping[r.OPS[b]]=b}save(){this.transformStack.push(this.transformMatrix);const n=this.current;this.extraStack.push(n),this.current=n.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(n){this.save(),this.executeOpTree(n),this.restore()}loadDependencies(n){const s=n.fnArray,u=n.argsArray;for(let b=0,f=s.length;b<f;b++){if(s[b]!==r.OPS.dependency)continue;for(const N of u[b]){const k=N.startsWith("g_")?this.commonObjs:this.objs,W=new Promise(U=>{k.get(N,U)});this.current.dependencies.push(W)}}return Promise.all(this.current.dependencies)}transform(n,s,u,b,f,N){const k=[n,s,u,b,f,N];this.transformMatrix=r.Util.transform(this.transformMatrix,k),this.tgrp=null}getSVG(n,s){this.viewport=s;const u=this._initialize(s);return this.loadDependencies(n).then(()=>(this.transformMatrix=r.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(n)),u))}convertOpList(n){const s=this._operatorIdMapping,u=n.argsArray,b=n.fnArray,f=[];for(let N=0,k=b.length;N<k;N++){const W=b[N];f.push({fnId:W,fn:s[W],args:u[N]})}return v(f)}executeOpTree(n){for(const s of n){const u=s.fn,b=s.fnId,f=s.args;switch(b|0){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(f);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(f[0],f[1]);break;case r.OPS.setFont:this.setFont(f);break;case r.OPS.showText:this.showText(f[0]);break;case r.OPS.showSpacedText:this.showText(f[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(f[0],f[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(f[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(f[0]);break;case r.OPS.setHScale:this.setHScale(f[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(f[0],f[1],f[2],f[3],f[4],f[5]);break;case r.OPS.setTextRise:this.setTextRise(f[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(f[0]);break;case r.OPS.setLineWidth:this.setLineWidth(f[0]);break;case r.OPS.setLineJoin:this.setLineJoin(f[0]);break;case r.OPS.setLineCap:this.setLineCap(f[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(f[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(f[0],f[1],f[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(f[0],f[1],f[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(f);break;case r.OPS.setFillColorN:this.setFillColorN(f);break;case r.OPS.shadingFill:this.shadingFill(f[0]);break;case r.OPS.setDash:this.setDash(f[0],f[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(f[0]);break;case r.OPS.setFlatness:this.setFlatness(f[0]);break;case r.OPS.setGState:this.setGState(f[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(f[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(f[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(f[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(f[0],f[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(f[0],f[1],f[2],f[3],f[4],f[5]);break;case r.OPS.constructPath:this.constructPath(f[0],f[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(s.items);break;default:(0,r.warn)(`Unimplemented operator ${u}`);break}}}setWordSpacing(n){this.current.wordSpacing=n}setCharSpacing(n){this.current.charSpacing=n}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(n,s,u,b,f,N){const k=this.current;k.textMatrix=k.lineMatrix=[n,s,u,b,f,N],k.textMatrixScale=Math.sqrt(n*n+s*s),k.x=k.lineX=0,k.y=k.lineY=0,k.xcoords=[],k.ycoords=[],k.tspan=this.svgFactory.createElement("svg:tspan"),k.tspan.setAttributeNS(null,"font-family",k.fontFamily),k.tspan.setAttributeNS(null,"font-size",`${c(k.fontSize)}px`),k.tspan.setAttributeNS(null,"y",c(-k.y)),k.txtElement=this.svgFactory.createElement("svg:text"),k.txtElement.appendChild(k.tspan)}beginText(){const n=this.current;n.x=n.lineX=0,n.y=n.lineY=0,n.textMatrix=r.IDENTITY_MATRIX,n.lineMatrix=r.IDENTITY_MATRIX,n.textMatrixScale=1,n.tspan=this.svgFactory.createElement("svg:tspan"),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtgrp=this.svgFactory.createElement("svg:g"),n.xcoords=[],n.ycoords=[]}moveText(n,s){const u=this.current;u.x=u.lineX+=n,u.y=u.lineY+=s,u.xcoords=[],u.ycoords=[],u.tspan=this.svgFactory.createElement("svg:tspan"),u.tspan.setAttributeNS(null,"font-family",u.fontFamily),u.tspan.setAttributeNS(null,"font-size",`${c(u.fontSize)}px`),u.tspan.setAttributeNS(null,"y",c(-u.y))}showText(n){const s=this.current,u=s.font,b=s.fontSize;if(b===0)return;const f=s.fontSizeScale,N=s.charSpacing,k=s.wordSpacing,W=s.fontDirection,U=s.textHScale*W,L=u.vertical,X=L?1:-1,i=u.defaultVMetrics,g=b*s.fontMatrix[0];let P=0;for(const l of n){if(l===null){P+=W*k;continue}else if((0,r.isNum)(l)){P+=X*l*b/1e3;continue}const R=(l.isSpace?k:0)+N,I=l.fontChar;let M,O,B=l.width;if(L){let z;const Y=l.vmetric||i;z=l.vmetric?Y[1]:B*.5,z=-z*g;const V=Y[2]*g;B=Y?-Y[0]:B,M=z/f,O=(P+V)/f}else M=P/f,O=0;(l.isInFont||u.missingFile)&&(s.xcoords.push(s.x+M),L&&s.ycoords.push(-s.y+O),s.tspan.textContent+=I);let H;L?H=B*g-R*W:H=B*g+R*W,P+=H}s.tspan.setAttributeNS(null,"x",s.xcoords.map(c).join(" ")),L?s.tspan.setAttributeNS(null,"y",s.ycoords.map(c).join(" ")):s.tspan.setAttributeNS(null,"y",c(-s.y)),L?s.y-=P:s.x+=P*U,s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${c(s.fontSize)}px`),s.fontStyle!==m.fontStyle&&s.tspan.setAttributeNS(null,"font-style",s.fontStyle),s.fontWeight!==m.fontWeight&&s.tspan.setAttributeNS(null,"font-weight",s.fontWeight);const y=s.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;if(y===r.TextRenderingMode.FILL||y===r.TextRenderingMode.FILL_STROKE?(s.fillColor!==m.fillColor&&s.tspan.setAttributeNS(null,"fill",s.fillColor),s.fillAlpha<1&&s.tspan.setAttributeNS(null,"fill-opacity",s.fillAlpha)):s.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?s.tspan.setAttributeNS(null,"fill","transparent"):s.tspan.setAttributeNS(null,"fill","none"),y===r.TextRenderingMode.STROKE||y===r.TextRenderingMode.FILL_STROKE){const l=1/(s.textMatrixScale||1);this._setStrokeAttributes(s.tspan,l)}let o=s.textMatrix;s.textRise!==0&&(o=o.slice(),o[5]+=s.textRise),s.txtElement.setAttributeNS(null,"transform",`${h(o)} scale(${c(U)}, -1)`),s.txtElement.setAttributeNS(E,"xml:space","preserve"),s.txtElement.appendChild(s.tspan),s.txtgrp.appendChild(s.txtElement),this._ensureTransformGroup().appendChild(s.txtElement)}setLeadingMoveText(n,s){this.setLeading(-s),this.moveText(n,s)}addFontStyle(n){if(!n.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const s=(0,r.createObjectURL)(n.data,n.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${n.loadedName}"; src: url(${s}); }
`}setFont(n){const s=this.current,u=this.commonObjs.get(n[0]);let b=n[1];s.font=u,this.embedFonts&&!u.missingFile&&!this.embeddedFonts[u.loadedName]&&(this.addFontStyle(u),this.embeddedFonts[u.loadedName]=u),s.fontMatrix=u.fontMatrix?u.fontMatrix:r.FONT_IDENTITY_MATRIX;let f="normal";u.black?f="900":u.bold&&(f="bold");const N=u.italic?"italic":"normal";b<0?(b=-b,s.fontDirection=-1):s.fontDirection=1,s.fontSize=b,s.fontFamily=u.loadedName,s.fontWeight=f,s.fontStyle=N,s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"y",c(-s.y)),s.xcoords=[],s.ycoords=[]}endText(){const n=this.current;n.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&n.txtElement&&n.txtElement.hasChildNodes()&&(n.element=n.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(n){n>0&&(this.current.lineWidth=n)}setLineCap(n){this.current.lineCap=T[n]}setLineJoin(n){this.current.lineJoin=C[n]}setMiterLimit(n){this.current.miterLimit=n}setStrokeAlpha(n){this.current.strokeAlpha=n}setStrokeRGBColor(n,s,u){this.current.strokeColor=r.Util.makeCssRgb(n,s,u)}setFillAlpha(n){this.current.fillAlpha=n}setFillRGBColor(n,s,u){this.current.fillColor=r.Util.makeCssRgb(n,s,u),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(n){this.current.strokeColor=this._makeColorN_Pattern(n)}setFillColorN(n){this.current.fillColor=this._makeColorN_Pattern(n)}shadingFill(n){const s=this.viewport.width,u=this.viewport.height,b=r.Util.inverseTransform(this.transformMatrix),f=r.Util.applyTransform([0,0],b),N=r.Util.applyTransform([0,u],b),k=r.Util.applyTransform([s,0],b),W=r.Util.applyTransform([s,u],b),U=Math.min(f[0],N[0],k[0],W[0]),L=Math.min(f[1],N[1],k[1],W[1]),X=Math.max(f[0],N[0],k[0],W[0]),i=Math.max(f[1],N[1],k[1],W[1]),g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x",U),g.setAttributeNS(null,"y",L),g.setAttributeNS(null,"width",X-U),g.setAttributeNS(null,"height",i-L),g.setAttributeNS(null,"fill",this._makeShadingPattern(n)),this.current.fillAlpha<1&&g.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(g)}_makeColorN_Pattern(n){return n[0]==="TilingPattern"?this._makeTilingPattern(n):this._makeShadingPattern(n)}_makeTilingPattern(n){const s=n[1],u=n[2],b=n[3]||r.IDENTITY_MATRIX,[f,N,k,W]=n[4],U=n[5],L=n[6],X=n[7],i=`shading${x++}`,[g,P]=r.Util.applyTransform([f,N],b),[y,o]=r.Util.applyTransform([k,W],b),[l,R]=r.Util.singularValueDecompose2dScale(b),I=U*l,M=L*R,O=this.svgFactory.createElement("svg:pattern");O.setAttributeNS(null,"id",i),O.setAttributeNS(null,"patternUnits","userSpaceOnUse"),O.setAttributeNS(null,"width",I),O.setAttributeNS(null,"height",M),O.setAttributeNS(null,"x",`${g}`),O.setAttributeNS(null,"y",`${P}`);const B=this.svg,H=this.transformMatrix,z=this.current.fillColor,Y=this.current.strokeColor,V=this.svgFactory.create(y-g,o-P);if(this.svg=V,this.transformMatrix=b,X===2){const $=r.Util.makeCssRgb(...s);this.current.fillColor=$,this.current.strokeColor=$}return this.executeOpTree(this.convertOpList(u)),this.svg=B,this.transformMatrix=H,this.current.fillColor=z,this.current.strokeColor=Y,O.appendChild(V.childNodes[0]),this.defs.appendChild(O),`url(#${i})`}_makeShadingPattern(n){switch(n[0]){case"RadialAxial":const s=`shading${x++}`,u=n[3];let b;switch(n[1]){case"axial":const f=n[4],N=n[5];b=this.svgFactory.createElement("svg:linearGradient"),b.setAttributeNS(null,"id",s),b.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),b.setAttributeNS(null,"x1",f[0]),b.setAttributeNS(null,"y1",f[1]),b.setAttributeNS(null,"x2",N[0]),b.setAttributeNS(null,"y2",N[1]);break;case"radial":const k=n[4],W=n[5],U=n[6],L=n[7];b=this.svgFactory.createElement("svg:radialGradient"),b.setAttributeNS(null,"id",s),b.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),b.setAttributeNS(null,"cx",W[0]),b.setAttributeNS(null,"cy",W[1]),b.setAttributeNS(null,"r",L),b.setAttributeNS(null,"fx",k[0]),b.setAttributeNS(null,"fy",k[1]),b.setAttributeNS(null,"fr",U);break;default:throw new Error(`Unknown RadialAxial type: ${n[1]}`)}for(const f of u){const N=this.svgFactory.createElement("svg:stop");N.setAttributeNS(null,"offset",f[0]),N.setAttributeNS(null,"stop-color",f[1]),b.appendChild(N)}return this.defs.appendChild(b),`url(#${s})`;case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${n[0]}`)}}setDash(n,s){this.current.dashArray=n,this.current.dashPhase=s}constructPath(n,s){const u=this.current;let b=u.x,f=u.y,N=[],k=0;for(const W of n)switch(W|0){case r.OPS.rectangle:b=s[k++],f=s[k++];const U=s[k++],L=s[k++],X=b+U,i=f+L;N.push("M",c(b),c(f),"L",c(X),c(f),"L",c(X),c(i),"L",c(b),c(i),"Z");break;case r.OPS.moveTo:b=s[k++],f=s[k++],N.push("M",c(b),c(f));break;case r.OPS.lineTo:b=s[k++],f=s[k++],N.push("L",c(b),c(f));break;case r.OPS.curveTo:b=s[k+4],f=s[k+5],N.push("C",c(s[k]),c(s[k+1]),c(s[k+2]),c(s[k+3]),c(b),c(f)),k+=6;break;case r.OPS.curveTo2:N.push("C",c(b),c(f),c(s[k]),c(s[k+1]),c(s[k+2]),c(s[k+3])),b=s[k+2],f=s[k+3],k+=4;break;case r.OPS.curveTo3:b=s[k+2],f=s[k+3],N.push("C",c(s[k]),c(s[k+1]),c(b),c(f),c(b),c(f)),k+=4;break;case r.OPS.closePath:N.push("Z");break}N=N.join(" "),u.path&&n.length>0&&n[0]!==r.OPS.rectangle&&n[0]!==r.OPS.moveTo?N=u.path.getAttributeNS(null,"d")+N:(u.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(u.path)),u.path.setAttributeNS(null,"d",N),u.path.setAttributeNS(null,"fill","none"),u.element=u.path,u.setCurrentPoint(b,f)}endPath(){const n=this.current;if(n.path=null,!this.pendingClip)return;if(!n.element){this.pendingClip=null;return}const s=`clippath${w++}`,u=this.svgFactory.createElement("svg:clipPath");u.setAttributeNS(null,"id",s),u.setAttributeNS(null,"transform",h(this.transformMatrix));const b=n.element.cloneNode(!0);this.pendingClip==="evenodd"?b.setAttributeNS(null,"clip-rule","evenodd"):b.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,u.appendChild(b),this.defs.appendChild(u),n.activeClipUrl&&(n.clipGroup=null,this.extraStack.forEach(function(f){f.clipGroup=null}),u.setAttributeNS(null,"clip-path",n.activeClipUrl)),n.activeClipUrl=`url(#${s})`,this.tgrp=null}clip(n){this.pendingClip=n}closePath(){const n=this.current;if(n.path){const s=`${n.path.getAttributeNS(null,"d")}Z`;n.path.setAttributeNS(null,"d",s)}}setLeading(n){this.current.leading=-n}setTextRise(n){this.current.textRise=n}setTextRenderingMode(n){this.current.textRenderingMode=n}setHScale(n){this.current.textHScale=n/100}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[s,u]of n)switch(s){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u);break;case"CA":this.setStrokeAlpha(u);break;case"ca":this.setFillAlpha(u);break;default:(0,r.warn)(`Unimplemented graphic state operator ${s}`);break}}fill(){const n=this.current;n.element&&(n.element.setAttributeNS(null,"fill",n.fillColor),n.element.setAttributeNS(null,"fill-opacity",n.fillAlpha),this.endPath())}stroke(){const n=this.current;n.element&&(this._setStrokeAttributes(n.element),n.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(n,s=1){const u=this.current;let b=u.dashArray;s!==1&&b.length>0&&(b=b.map(function(f){return s*f})),n.setAttributeNS(null,"stroke",u.strokeColor),n.setAttributeNS(null,"stroke-opacity",u.strokeAlpha),n.setAttributeNS(null,"stroke-miterlimit",c(u.miterLimit)),n.setAttributeNS(null,"stroke-linecap",u.lineCap),n.setAttributeNS(null,"stroke-linejoin",u.lineJoin),n.setAttributeNS(null,"stroke-width",c(s*u.lineWidth)+"px"),n.setAttributeNS(null,"stroke-dasharray",b.map(c).join(" ")),n.setAttributeNS(null,"stroke-dashoffset",c(s*u.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width","1px"),n.setAttributeNS(null,"height","1px"),n.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(n)}paintImageXObject(n){const s=this.objs.get(n);if(!s){(0,r.warn)(`Dependent image with object ID ${n} is not ready yet`);return}this.paintInlineImageXObject(s)}paintInlineImageXObject(n,s){const u=n.width,b=n.height,f=D(n,this.forceDataSchema,!!s),N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y","0"),N.setAttributeNS(null,"width",c(u)),N.setAttributeNS(null,"height",c(b)),this.current.element=N,this.clip("nonzero");const k=this.svgFactory.createElement("svg:image");k.setAttributeNS(d,"xlink:href",f),k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y",c(-b)),k.setAttributeNS(null,"width",c(u)+"px"),k.setAttributeNS(null,"height",c(b)+"px"),k.setAttributeNS(null,"transform",`scale(${c(1/u)} ${c(-1/b)})`),s?s.appendChild(k):this._ensureTransformGroup().appendChild(k)}paintImageMaskXObject(n){const s=this.current,u=n.width,b=n.height,f=s.fillColor;s.maskId=`mask${G++}`;const N=this.svgFactory.createElement("svg:mask");N.setAttributeNS(null,"id",s.maskId);const k=this.svgFactory.createElement("svg:rect");k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y","0"),k.setAttributeNS(null,"width",c(u)),k.setAttributeNS(null,"height",c(b)),k.setAttributeNS(null,"fill",f),k.setAttributeNS(null,"mask",`url(#${s.maskId})`),this.defs.appendChild(N),this._ensureTransformGroup().appendChild(k),this.paintInlineImageXObject(n,N)}paintFormXObjectBegin(n,s){if(Array.isArray(n)&&n.length===6&&this.transform(n[0],n[1],n[2],n[3],n[4],n[5]),s){const u=s[2]-s[0],b=s[3]-s[1],f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x",s[0]),f.setAttributeNS(null,"y",s[1]),f.setAttributeNS(null,"width",c(u)),f.setAttributeNS(null,"height",c(b)),this.current.element=f,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(n){const s=this.svgFactory.create(n.width,n.height),u=this.svgFactory.createElement("svg:defs");s.appendChild(u),this.defs=u;const b=this.svgFactory.createElement("svg:g");return b.setAttributeNS(null,"transform",h(n.transform)),s.appendChild(b),this.svg=b,s}_ensureClipGroup(){if(!this.current.clipGroup){const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(n),this.current.clipGroup=n}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",h(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var r=a(2),p=a(20);const _=Ye(),S=$e(),v=Ke(),c=Qe(),h=/^file:\/\/\/[a-zA-Z]:\//;function m(x){const A=c.parse(x);return A.protocol==="file:"||A.host?A:/^[a-z]:[/\\]/i.test(x)?c.parse(`file:///${x}`):(A.host||(A.protocol="file:"),A)}class E{constructor(x){this.source=x,this.url=m(x.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&x.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new w(this):new D(this),this._fullRequestReader}getRangeReader(x,A){if(A<=this._progressiveDataLength)return null;const n=this.isFsUrl?new G(this,x,A):new j(this,x,A);return this._rangeRequestReaders.push(n),n}cancelAllRequests(x){this._fullRequestReader&&this._fullRequestReader.cancel(x);const A=this._rangeRequestReaders.slice(0);A.forEach(function(n){n.cancel(x)})}}t.PDFNodeStream=E;class d{constructor(x){this._url=x.url,this._done=!1,this._storedError=null,this.onProgress=null;const A=x.source;this._contentLength=A.length,this._loaded=0,this._filename=null,this._disableRange=A.disableRange||!1,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!A.disableStream,this._isRangeSupported=!A.disableRange,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)(),this._headersCapability=(0,r.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const x=this._readableStream.read();if(x===null)return this._readCapability=(0,r.createPromiseCapability)(),this.read();this._loaded+=x.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});const A=new Uint8Array(x).buffer;return{value:A,done:!1}}cancel(x){if(!this._readableStream){this._error(x);return}this._readableStream.destroy(x)}_error(x){this._storedError=x,this._readCapability.resolve()}_setReadableStream(x){this._readableStream=x,x.on("readable",()=>{this._readCapability.resolve()}),x.on("end",()=>{x.destroy(),this._done=!0,this._readCapability.resolve()}),x.on("error",A=>{this._error(A)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class T{constructor(x){this._url=x.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)();const A=x.source;this._isStreamingSupported=!A.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const x=this._readableStream.read();if(x===null)return this._readCapability=(0,r.createPromiseCapability)(),this.read();this._loaded+=x.length,this.onProgress&&this.onProgress({loaded:this._loaded});const A=new Uint8Array(x).buffer;return{value:A,done:!1}}cancel(x){if(!this._readableStream){this._error(x);return}this._readableStream.destroy(x)}_error(x){this._storedError=x,this._readCapability.resolve()}_setReadableStream(x){this._readableStream=x,x.on("readable",()=>{this._readCapability.resolve()}),x.on("end",()=>{x.destroy(),this._done=!0,this._readCapability.resolve()}),x.on("error",A=>{this._error(A)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function C(x,A){return{protocol:x.protocol,auth:x.auth,host:x.hostname,port:x.port,path:x.path,method:"GET",headers:A}}class D extends d{constructor(x){super(x);const A=n=>{if(n.statusCode===404){const f=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=f,this._headersCapability.reject(f);return}this._headersCapability.resolve(),this._setReadableStream(n);const s=f=>this._readableStream.headers[f.toLowerCase()],{allowRangeRequests:u,suggestedLength:b}=(0,p.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:x.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=b||this._contentLength,this._filename=(0,p.extractFilenameFromHeader)(s)};this._request=null,this._url.protocol==="http:"?this._request=S.request(C(this._url,x.httpHeaders),A):this._request=v.request(C(this._url,x.httpHeaders),A),this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}}class j extends T{constructor(x,A,n){super(x);this._httpHeaders={};for(const u in x.httpHeaders){const b=x.httpHeaders[u];if(typeof b=="undefined")continue;this._httpHeaders[u]=b}this._httpHeaders.Range=`bytes=${A}-${n-1}`;const s=u=>{if(u.statusCode===404){const b=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=b;return}this._setReadableStream(u)};this._request=null,this._url.protocol==="http:"?this._request=S.request(C(this._url,this._httpHeaders),s):this._request=v.request(C(this._url,this._httpHeaders),s),this._request.on("error",u=>{this._storedError=u}),this._request.end()}}class w extends d{constructor(x){super(x);let A=decodeURIComponent(this._url.path);h.test(this._url.href)&&(A=A.replace(/^\//,"")),_.lstat(A,(n,s)=>{if(n){n.code==="ENOENT"&&(n=new r.MissingPDFException(`Missing PDF "${A}".`)),this._storedError=n,this._headersCapability.reject(n);return}this._contentLength=s.size,this._setReadableStream(_.createReadStream(A)),this._headersCapability.resolve()})}}class G extends T{constructor(x,A,n){super(x);let s=decodeURIComponent(this._url.path);h.test(this._url.href)&&(s=s.replace(/^\//,"")),this._setReadableStream(_.createReadStream(s,{start:A,end:n-1}))}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=v,t.extractFilenameFromHeader=S,t.validateRangeRequestCapabilities=_,t.validateResponseStatus=c;var r=a(2),p=a(21);function _({getResponseHeader:h,isHttp:m,rangeChunkSize:E,disableRange:d}){(0,r.assert)(E>0,"Range chunk size must be larger than zero");const T={allowRangeRequests:!1,suggestedLength:void 0},C=parseInt(h("Content-Length"),10);if(!Number.isInteger(C))return T;if(T.suggestedLength=C,C<=2*E)return T;if(d||!m)return T;if(h("Accept-Ranges")!=="bytes")return T;const D=h("Content-Encoding")||"identity";return D!=="identity"||(T.allowRangeRequests=!0),T}function S(h){const m=h("Content-Disposition");if(m){let E=(0,p.getFilenameFromContentDispositionHeader)(m);if(E.includes("%"))try{E=decodeURIComponent(E)}catch(d){}if(/\.pdf$/i.test(E))return E}return null}function v(h,m){return h===404||h===0&&m.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+m+'".'):new r.UnexpectedResponseException("Unexpected server response ("+h+') while retrieving PDF "'+m+'".',h)}function c(h){return h===200||h===206}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=r;function r(p){let _=!0,S=v("filename\\*","i").exec(p);if(S){S=S[1];let C=E(S);return C=unescape(C),C=d(C),C=T(C),h(C)}if(S=m(p),S){const C=T(S);return h(C)}if(S=v("filename","i").exec(p),S){S=S[1];let C=E(S);return C=T(C),h(C)}function v(C,D){return new RegExp("(?:^|;)\\s*"+C+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',D)}function c(C,D){if(C){if(!/^[\x00-\xFF]+$/.test(D))return D;try{const j=new TextDecoder(C,{fatal:!0}),w=Array.from(D,function(G){return G.charCodeAt(0)&255});D=j.decode(new Uint8Array(w)),_=!1}catch(j){if(/^utf-?8$/i.test(C))try{D=decodeURIComponent(escape(D)),_=!1}catch(w){}}}return D}function h(C){return _&&/[\x80-\xff]/.test(C)&&(C=c("utf-8",C),_&&(C=c("iso-8859-1",C))),C}function m(C){const D=[];let j;const w=v("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(j=w.exec(C))!==null;){let[,x,A,n]=j;if(x=parseInt(x,10),x in D){if(x===0)break;continue}D[x]=[A,n]}const G=[];for(let x=0;x<D.length&&x in D;++x){let[A,n]=D[x];n=E(n),A&&(n=unescape(n),x===0&&(n=d(n))),G.push(n)}return G.join("")}function E(C){if(C.startsWith('"')){const D=C.slice(1).split('\\"');for(let j=0;j<D.length;++j){const w=D[j].indexOf('"');w!==-1&&(D[j]=D[j].slice(0,w),D.length=j+1),D[j]=D[j].replace(/\\(.)/g,"$1")}C=D.join('"')}return C}function d(C){const D=C.indexOf("'");if(D===-1)return C;const j=C.slice(0,D),w=C.slice(D+1),G=w.replace(/^[^']*'/,"");return c(j,G)}function T(C){return!C.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(C)?C:C.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(D,j,w,G){if(w==="q"||w==="Q")return G=G.replace(/_/g," "),G=G.replace(/=([0-9a-fA-F]{2})/g,function(x,A){return String.fromCharCode(parseInt(A,16))}),c(j,G);try{G=atob(G)}catch(x){}return c(j,G)})}return""}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var r=a(2),p=a(20);const _=200,S=206;function v(d){const T=d.response;if(typeof T!="string")return T;const C=(0,r.stringToBytes)(T);return C.buffer}class c{constructor(d,T){this.url=d,T=T||{},this.isHttp=/^https?:/i.test(d),this.httpHeaders=this.isHttp&&T.httpHeaders||{},this.withCredentials=T.withCredentials||!1,this.getXhr=T.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(d,T,C){const D={begin:d,end:T};for(const j in C)D[j]=C[j];return this.request(D)}requestFull(d){return this.request(d)}request(d){const T=this.getXhr(),C=this.currXhrId++,D=this.pendingRequests[C]={xhr:T};T.open("GET",this.url),T.withCredentials=this.withCredentials;for(const j in this.httpHeaders){const w=this.httpHeaders[j];if(typeof w=="undefined")continue;T.setRequestHeader(j,w)}return this.isHttp&&"begin"in d&&"end"in d?(T.setRequestHeader("Range",`bytes=${d.begin}-${d.end-1}`),D.expectedStatus=S):D.expectedStatus=_,T.responseType="arraybuffer",d.onError&&(T.onerror=function(j){d.onError(T.status)}),T.onreadystatechange=this.onStateChange.bind(this,C),T.onprogress=this.onProgress.bind(this,C),D.onHeadersReceived=d.onHeadersReceived,D.onDone=d.onDone,D.onError=d.onError,D.onProgress=d.onProgress,T.send(null),C}onProgress(d,T){const C=this.pendingRequests[d];if(!C)return;C.onProgress&&C.onProgress(T)}onStateChange(d,T){const C=this.pendingRequests[d];if(!C)return;const D=C.xhr;if(D.readyState>=2&&C.onHeadersReceived&&(C.onHeadersReceived(),delete C.onHeadersReceived),D.readyState!==4)return;if(!(d in this.pendingRequests))return;if(delete this.pendingRequests[d],D.status===0&&this.isHttp){C.onError&&C.onError(D.status);return}const j=D.status||_,w=j===_&&C.expectedStatus===S;if(!w&&j!==C.expectedStatus){C.onError&&C.onError(D.status);return}const G=v(D);if(j===S){const x=D.getResponseHeader("Content-Range"),A=/bytes (\d+)-(\d+)\/(\d+)/.exec(x);C.onDone({begin:parseInt(A[1],10),chunk:G})}else G?C.onDone({begin:0,chunk:G}):C.onError&&C.onError(D.status)}hasPendingRequests(){for(const d in this.pendingRequests)return!0;return!1}getRequestXhr(d){return this.pendingRequests[d].xhr}isPendingRequest(d){return d in this.pendingRequests}abortAllRequests(){for(const d in this.pendingRequests)this.abortRequest(d|0)}abortRequest(d){const T=this.pendingRequests[d].xhr;delete this.pendingRequests[d],T.abort()}}class h{constructor(d){this._source=d,this._manager=new c(d.url,{httpHeaders:d.httpHeaders,withCredentials:d.withCredentials}),this._rangeChunkSize=d.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(d){const T=this._rangeRequestReaders.indexOf(d);T>=0&&this._rangeRequestReaders.splice(T,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new m(this._manager,this._source),this._fullRequestReader}getRangeReader(d,T){const C=new E(this._manager,d,T);return C.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(C),C}cancelAllRequests(d){this._fullRequestReader&&this._fullRequestReader.cancel(d);const T=this._rangeRequestReaders.slice(0);T.forEach(function(C){C.cancel(d)})}}t.PDFNetworkStream=h;class m{constructor(d,T){this._manager=d;const C={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=T.url,this._fullRequestId=d.requestFull(C),this._headersReceivedCapability=(0,r.createPromiseCapability)(),this._disableRange=T.disableRange||!1,this._contentLength=T.length,this._rangeChunkSize=T.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const d=this._fullRequestId,T=this._manager.getRequestXhr(d),C=w=>T.getResponseHeader(w),{allowRangeRequests:D,suggestedLength:j}=(0,p.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});D&&(this._isRangeSupported=!0),this._contentLength=j||this._contentLength,this._filename=(0,p.extractFilenameFromHeader)(C),this._isRangeSupported&&this._manager.abortRequest(d),this._headersReceivedCapability.resolve()}_onDone(d){if(d)if(this._requests.length>0){const T=this._requests.shift();T.resolve({value:d.chunk,done:!1})}else this._cachedChunks.push(d.chunk);if(this._done=!0,this._cachedChunks.length>0)return;this._requests.forEach(function(T){T.resolve({value:void 0,done:!0})}),this._requests=[]}_onError(d){const T=this._url,C=(0,p.createResponseStatusError)(d,T);this._storedError=C,this._headersReceivedCapability.reject(C),this._requests.forEach(function(D){D.reject(C)}),this._requests=[],this._cachedChunks=[]}_onProgress(d){this.onProgress&&this.onProgress({loaded:d.loaded,total:d.lengthComputable?d.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0){const T=this._cachedChunks.shift();return{value:T,done:!1}}if(this._done)return{value:void 0,done:!0};const d=(0,r.createPromiseCapability)();return this._requests.push(d),d.promise}cancel(d){this._done=!0,this._headersReceivedCapability.reject(d),this._requests.forEach(function(T){T.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class E{constructor(d,T,C){this._manager=d;const D={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=d.requestRange(T,C,D),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}_close(){this.onClosed&&this.onClosed(this)}_onDone(d){const T=d.chunk;if(this._requests.length>0){const C=this._requests.shift();C.resolve({value:T,done:!1})}else this._queuedChunk=T;this._done=!0,this._requests.forEach(function(C){C.resolve({value:void 0,done:!0})}),this._requests=[],this._close()}_onProgress(d){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:d.loaded})}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk!==null){const T=this._queuedChunk;return this._queuedChunk=null,{value:T,done:!1}}if(this._done)return{value:void 0,done:!0};const d=(0,r.createPromiseCapability)();return this._requests.push(d),d.promise}cancel(d){this._done=!0,this._requests.forEach(function(T){T.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var r=a(2),p=a(20);function _(m,E,d){return{method:"GET",headers:m,signal:d&&d.signal,mode:"cors",credentials:E?"include":"same-origin",redirect:"follow"}}function S(m){const E=new Headers;for(const d in m){const T=m[d];if(typeof T=="undefined")continue;E.append(d,T)}return E}class v{constructor(m){this.source=m,this.isHttp=/^https?:/i.test(m.url),this.httpHeaders=this.isHttp&&m.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new c(this),this._fullRequestReader}getRangeReader(m,E){if(E<=this._progressiveDataLength)return null;const d=new h(this,m,E);return this._rangeRequestReaders.push(d),d}cancelAllRequests(m){this._fullRequestReader&&this._fullRequestReader.cancel(m);const E=this._rangeRequestReaders.slice(0);E.forEach(function(d){d.cancel(m)})}}t.PDFFetchStream=v;class c{constructor(m){this._stream=m,this._reader=null,this._loaded=0,this._filename=null;const E=m.source;this._withCredentials=E.withCredentials||!1,this._contentLength=E.length,this._headersCapability=(0,r.createPromiseCapability)(),this._disableRange=E.disableRange||!1,this._rangeChunkSize=E.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._isStreamingSupported=!E.disableStream,this._isRangeSupported=!E.disableRange,this._headers=S(this._stream.httpHeaders);const d=E.url;fetch(d,_(this._headers,this._withCredentials,this._abortController)).then(T=>{if(!(0,p.validateResponseStatus)(T.status))throw(0,p.createResponseStatusError)(T.status,d);this._reader=T.body.getReader(),this._headersCapability.resolve();const C=w=>T.headers.get(w),{allowRangeRequests:D,suggestedLength:j}=(0,p.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=D,this._contentLength=j||this._contentLength,this._filename=(0,p.extractFilenameFromHeader)(C),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:m,done:E}=await this._reader.read();if(E)return{value:m,done:E};this._loaded+=m.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});const d=new Uint8Array(m).buffer;return{value:d,done:!1}}cancel(m){this._reader&&this._reader.cancel(m),this._abortController&&this._abortController.abort()}}class h{constructor(m,E,d){this._stream=m,this._reader=null,this._loaded=0;const T=m.source;this._withCredentials=T.withCredentials||!1,this._readCapability=(0,r.createPromiseCapability)(),this._isStreamingSupported=!T.disableStream,typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._headers=S(this._stream.httpHeaders),this._headers.append("Range",`bytes=${E}-${d-1}`);const C=T.url;fetch(C,_(this._headers,this._withCredentials,this._abortController)).then(D=>{if(!(0,p.validateResponseStatus)(D.status))throw(0,p.createResponseStatusError)(D.status,C);this._readCapability.resolve(),this._reader=D.body.getReader()}),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:m,done:E}=await this._reader.read();if(E)return{value:m,done:E};this._loaded+=m.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded});const d=new Uint8Array(m).buffer;return{value:d,done:!1}}cancel(m){this._reader&&this._reader.cancel(m),this._abortController&&this._abortController.abort()}}}])})});var ve=1e-6,Ae=typeof Float32Array!="undefined"?Float32Array:Array,Je=Math.random,Yr=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});const Se={};Xe(Se,{add:()=>Gt,clone:()=>xt,copy:()=>St,create:()=>Ct,determinant:()=>wt,equals:()=>Wt,exactEquals:()=>qt,frob:()=>Ot,fromRotation:()=>Lt,fromScaling:()=>It,fromTranslation:()=>Nt,fromValues:()=>Tt,identity:()=>Rt,invert:()=>kt,mul:()=>Bt,multiply:()=>Ze,multiplyScalar:()=>Ut,multiplyScalarAndAdd:()=>jt,rotate:()=>Pt,scale:()=>Ft,set:()=>Et,str:()=>Dt,sub:()=>Ht,subtract:()=>et,translate:()=>Mt});function Ct(){var e=new Ae(6);return Ae!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function xt(e){var t=new Ae(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function St(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Rt(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Tt(e,t,a,r,p,_){var S=new Ae(6);return S[0]=e,S[1]=t,S[2]=a,S[3]=r,S[4]=p,S[5]=_,S}function Et(e,t,a,r,p,_,S){return e[0]=t,e[1]=a,e[2]=r,e[3]=p,e[4]=_,e[5]=S,e}function kt(e,t){var a=t[0],r=t[1],p=t[2],_=t[3],S=t[4],v=t[5],c=a*_-r*p;return c?(c=1/c,e[0]=_*c,e[1]=-r*c,e[2]=-p*c,e[3]=a*c,e[4]=(p*v-_*S)*c,e[5]=(r*S-a*v)*c,e):null}function wt(e){return e[0]*e[3]-e[1]*e[2]}function Ze(e,t,a){var r=t[0],p=t[1],_=t[2],S=t[3],v=t[4],c=t[5],h=a[0],m=a[1],E=a[2],d=a[3],T=a[4],C=a[5];return e[0]=r*h+_*m,e[1]=p*h+S*m,e[2]=r*E+_*d,e[3]=p*E+S*d,e[4]=r*T+_*C+v,e[5]=p*T+S*C+c,e}function Pt(e,t,a){var r=t[0],p=t[1],_=t[2],S=t[3],v=t[4],c=t[5],h=Math.sin(a),m=Math.cos(a);return e[0]=r*m+_*h,e[1]=p*m+S*h,e[2]=r*-h+_*m,e[3]=p*-h+S*m,e[4]=v,e[5]=c,e}function Ft(e,t,a){var r=t[0],p=t[1],_=t[2],S=t[3],v=t[4],c=t[5],h=a[0],m=a[1];return e[0]=r*h,e[1]=p*h,e[2]=_*m,e[3]=S*m,e[4]=v,e[5]=c,e}function Mt(e,t,a){var r=t[0],p=t[1],_=t[2],S=t[3],v=t[4],c=t[5],h=a[0],m=a[1];return e[0]=r,e[1]=p,e[2]=_,e[3]=S,e[4]=r*h+_*m+v,e[5]=p*h+S*m+c,e}function Lt(e,t){var a=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=a,e[2]=-a,e[3]=r,e[4]=0,e[5]=0,e}function It(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function Nt(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function Dt(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function Ot(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)}function Gt(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e}function et(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e}function Ut(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e}function jt(e,t,a,r){return e[0]=t[0]+a[0]*r,e[1]=t[1]+a[1]*r,e[2]=t[2]+a[2]*r,e[3]=t[3]+a[3]*r,e[4]=t[4]+a[4]*r,e[5]=t[5]+a[5]*r,e}function qt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function Wt(e,t){var a=e[0],r=e[1],p=e[2],_=e[3],S=e[4],v=e[5],c=t[0],h=t[1],m=t[2],E=t[3],d=t[4],T=t[5];return Math.abs(a-c)<=ve*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(r-h)<=ve*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(p-m)<=ve*Math.max(1,Math.abs(p),Math.abs(m))&&Math.abs(_-E)<=ve*Math.max(1,Math.abs(_),Math.abs(E))&&Math.abs(S-d)<=ve*Math.max(1,Math.abs(S),Math.abs(d))&&Math.abs(v-T)<=ve*Math.max(1,Math.abs(v),Math.abs(T))}var Bt=Ze,Ht=et;const pe={};Xe(pe,{add:()=>$t,angle:()=>mr,ceil:()=>Kt,clone:()=>Xt,copy:()=>Vt,create:()=>tt,cross:()=>or,dist:()=>Sr,distance:()=>st,div:()=>xr,divide:()=>at,dot:()=>ir,equals:()=>br,exactEquals:()=>Ar,floor:()=>Qt,forEach:()=>Er,fromValues:()=>zt,inverse:()=>ar,len:()=>_r,length:()=>ot,lerp:()=>lr,max:()=>Zt,min:()=>Jt,mul:()=>Cr,multiply:()=>nt,negate:()=>nr,normalize:()=>sr,random:()=>cr,rotate:()=>pr,round:()=>er,scale:()=>tr,scaleAndAdd:()=>rr,set:()=>Yt,sqrDist:()=>Rr,sqrLen:()=>Tr,squaredDistance:()=>it,squaredLength:()=>lt,str:()=>vr,sub:()=>yr,subtract:()=>rt,transformMat2:()=>hr,transformMat2d:()=>ur,transformMat3:()=>dr,transformMat4:()=>fr,zero:()=>gr});function tt(){var e=new Ae(2);return Ae!=Float32Array&&(e[0]=0,e[1]=0),e}function Xt(e){var t=new Ae(2);return t[0]=e[0],t[1]=e[1],t}function zt(e,t){var a=new Ae(2);return a[0]=e,a[1]=t,a}function Vt(e,t){return e[0]=t[0],e[1]=t[1],e}function Yt(e,t,a){return e[0]=t,e[1]=a,e}function $t(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e}function rt(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e}function nt(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e}function at(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e}function Kt(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Qt(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Jt(e,t,a){return e[0]=Math.min(t[0],a[0]),e[1]=Math.min(t[1],a[1]),e}function Zt(e,t,a){return e[0]=Math.max(t[0],a[0]),e[1]=Math.max(t[1],a[1]),e}function er(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function tr(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e}function rr(e,t,a,r){return e[0]=t[0]+a[0]*r,e[1]=t[1]+a[1]*r,e}function st(e,t){var a=t[0]-e[0],r=t[1]-e[1];return Math.hypot(a,r)}function it(e,t){var a=t[0]-e[0],r=t[1]-e[1];return a*a+r*r}function ot(e){var t=e[0],a=e[1];return Math.hypot(t,a)}function lt(e){var t=e[0],a=e[1];return t*t+a*a}function nr(e,t){return e[0]=-t[0],e[1]=-t[1],e}function ar(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function sr(e,t){var a=t[0],r=t[1],p=a*a+r*r;return p>0&&(p=1/Math.sqrt(p)),e[0]=t[0]*p,e[1]=t[1]*p,e}function ir(e,t){return e[0]*t[0]+e[1]*t[1]}function or(e,t,a){var r=t[0]*a[1]-t[1]*a[0];return e[0]=e[1]=0,e[2]=r,e}function lr(e,t,a,r){var p=t[0],_=t[1];return e[0]=p+r*(a[0]-p),e[1]=_+r*(a[1]-_),e}function cr(e,t){t=t||1;var a=Je()*2*Math.PI;return e[0]=Math.cos(a)*t,e[1]=Math.sin(a)*t,e}function hr(e,t,a){var r=t[0],p=t[1];return e[0]=a[0]*r+a[2]*p,e[1]=a[1]*r+a[3]*p,e}function ur(e,t,a){var r=t[0],p=t[1];return e[0]=a[0]*r+a[2]*p+a[4],e[1]=a[1]*r+a[3]*p+a[5],e}function dr(e,t,a){var r=t[0],p=t[1];return e[0]=a[0]*r+a[3]*p+a[6],e[1]=a[1]*r+a[4]*p+a[7],e}function fr(e,t,a){var r=t[0],p=t[1];return e[0]=a[0]*r+a[4]*p+a[12],e[1]=a[1]*r+a[5]*p+a[13],e}function pr(e,t,a,r){var p=t[0]-a[0],_=t[1]-a[1],S=Math.sin(r),v=Math.cos(r);return e[0]=p*v-_*S+a[0],e[1]=p*S+_*v+a[1],e}function mr(e,t){var a=e[0],r=e[1],p=t[0],_=t[1],S=Math.sqrt(a*a+r*r)*Math.sqrt(p*p+_*_),v=S&&(a*p+r*_)/S;return Math.acos(Math.min(Math.max(v,-1),1))}function gr(e){return e[0]=0,e[1]=0,e}function vr(e){return"vec2("+e[0]+", "+e[1]+")"}function Ar(e,t){return e[0]===t[0]&&e[1]===t[1]}function br(e,t){var a=e[0],r=e[1],p=t[0],_=t[1];return Math.abs(a-p)<=ve*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(r-_)<=ve*Math.max(1,Math.abs(r),Math.abs(_))}var _r=ot,yr=rt,Cr=nt,xr=at,Sr=st,Rr=it,Tr=lt,Er=function(){var e=tt();return function(t,a,r,p,_,S){var v,c;for(a||(a=2),r||(r=0),p?c=Math.min(p*a+r,t.length):c=t.length,v=r;v<c;v+=a)e[0]=t[v],e[1]=t[v+1],_(e,e,S),t[v]=e[0],t[v+1]=e[1];return t}}();var Ge;(function(e){e[e.dependency=1]="dependency",e[e.setLineWidth=2]="setLineWidth",e[e.setLineCap=3]="setLineCap",e[e.setLineJoin=4]="setLineJoin",e[e.setMiterLimit=5]="setMiterLimit",e[e.setDash=6]="setDash",e[e.setRenderingIntent=7]="setRenderingIntent",e[e.setFlatness=8]="setFlatness",e[e.setGState=9]="setGState",e[e.save=10]="save",e[e.restore=11]="restore",e[e.transform=12]="transform",e[e.moveTo=13]="moveTo",e[e.lineTo=14]="lineTo",e[e.curveTo=15]="curveTo",e[e.curveTo2=16]="curveTo2",e[e.curveTo3=17]="curveTo3",e[e.closePath=18]="closePath",e[e.rectangle=19]="rectangle",e[e.stroke=20]="stroke",e[e.closeStroke=21]="closeStroke",e[e.fill=22]="fill",e[e.eoFill=23]="eoFill",e[e.fillStroke=24]="fillStroke",e[e.eoFillStroke=25]="eoFillStroke",e[e.closeFillStroke=26]="closeFillStroke",e[e.closeEOFillStroke=27]="closeEOFillStroke",e[e.endPath=28]="endPath",e[e.clip=29]="clip",e[e.eoClip=30]="eoClip",e[e.beginText=31]="beginText",e[e.endText=32]="endText",e[e.setCharSpacing=33]="setCharSpacing",e[e.setWordSpacing=34]="setWordSpacing",e[e.setHScale=35]="setHScale",e[e.setLeading=36]="setLeading",e[e.setFont=37]="setFont",e[e.setTextRenderingMode=38]="setTextRenderingMode",e[e.setTextRise=39]="setTextRise",e[e.moveText=40]="moveText",e[e.setLeadingMoveText=41]="setLeadingMoveText",e[e.setTextMatrix=42]="setTextMatrix",e[e.nextLine=43]="nextLine",e[e.showText=44]="showText",e[e.showSpacedText=45]="showSpacedText",e[e.nextLineShowText=46]="nextLineShowText",e[e.nextLineSetSpacingShowText=47]="nextLineSetSpacingShowText",e[e.setCharWidth=48]="setCharWidth",e[e.setCharWidthAndBounds=49]="setCharWidthAndBounds",e[e.setStrokeColorSpace=50]="setStrokeColorSpace",e[e.setFillColorSpace=51]="setFillColorSpace",e[e.setStrokeColor=52]="setStrokeColor",e[e.setStrokeColorN=53]="setStrokeColorN",e[e.setFillColor=54]="setFillColor",e[e.setFillColorN=55]="setFillColorN",e[e.setStrokeGray=56]="setStrokeGray",e[e.setFillGray=57]="setFillGray",e[e.setStrokeRGBColor=58]="setStrokeRGBColor",e[e.setFillRGBColor=59]="setFillRGBColor",e[e.setStrokeCMYKColor=60]="setStrokeCMYKColor",e[e.setFillCMYKColor=61]="setFillCMYKColor",e[e.shadingFill=62]="shadingFill",e[e.beginInlineImage=63]="beginInlineImage",e[e.beginImageData=64]="beginImageData",e[e.endInlineImage=65]="endInlineImage",e[e.paintXObject=66]="paintXObject",e[e.markPoint=67]="markPoint",e[e.markPointProps=68]="markPointProps",e[e.beginMarkedContent=69]="beginMarkedContent",e[e.beginMarkedContentProps=70]="beginMarkedContentProps",e[e.endMarkedContent=71]="endMarkedContent",e[e.beginCompat=72]="beginCompat",e[e.endCompat=73]="endCompat",e[e.paintFormXObjectBegin=74]="paintFormXObjectBegin",e[e.paintFormXObjectEnd=75]="paintFormXObjectEnd",e[e.beginGroup=76]="beginGroup",e[e.endGroup=77]="endGroup",e[e.beginAnnotations=78]="beginAnnotations",e[e.endAnnotations=79]="endAnnotations",e[e.beginAnnotation=80]="beginAnnotation",e[e.endAnnotation=81]="endAnnotation",e[e.paintJpegXObject=82]="paintJpegXObject",e[e.paintImageMaskXObject=83]="paintImageMaskXObject",e[e.paintImageMaskXObjectGroup=84]="paintImageMaskXObjectGroup",e[e.paintImageXObject=85]="paintImageXObject",e[e.paintInlineImageXObject=86]="paintInlineImageXObject",e[e.paintInlineImageXObjectGroup=87]="paintInlineImageXObjectGroup",e[e.paintImageXObjectRepeat=88]="paintImageXObjectRepeat",e[e.paintImageMaskXObjectRepeat=89]="paintImageMaskXObjectRepeat",e[e.paintSolidColorImageMask=90]="paintSolidColorImageMask",e[e.constructPath=91]="constructPath"})(Ge||(Ge={}));var me=Ge;class Me{constructor(){this.keys=[];this.values=[]}add(e,t){if(e<this.keys[0]){this.keys.unshift(e),this.values.unshift(t);return}let a=0;for(let r=16777216;r>=1;r>>>=1)this.keys[a+r]<e&&(a+=r);this.keys.splice(a+1,0,e),this.values.splice(a+1,0,t)}}const ct=ze(Oe());async function ht(e,{pageNumber:t=1}={}){const a=e instanceof Uint8Array?await ct.getDocument(e).promise:e,r=await a.getPage(t),{fnArray:p,argsArray:_}=await r.getOperatorList(),{items:S}=await r.getTextContent(),v=Mr(p,_),[c,h]=kr(v),m=wr(c,h),E=Pr(m);return[...Fr(E,S)]}const Le=.01,Re=2;function Ue(e,t){return Math.abs(e[0]-t[0])<Re&&Math.abs(e[1]-t[1])<Re}function Ie(e,t){return e[0]*t[1]-e[1]*t[0]}function ut(e,t){const a=pe.subtract(pe.create(),t.start,e.start),r=pe.subtract(pe.create(),e.end,e.start),p=pe.subtract(pe.create(),t.end,t.start),_=Ie(p,a)/Ie(p,r),S=Ie(r,a)/Ie(p,r);return-Le<_&&_<1+Le&&0<S&&S<1||-Le<S&&S<1+Le&&0<_&&_<1?pe.scaleAndAdd(pe.create(),e.start,r,_):void 0}function kr(e){const t=[],a=[];for(const r of e){const p=r.start[0]-r.end[0],_=r.start[1]-r.end[1];Math.abs(p)<Re?t.push(_<0?r:{start:r.end,end:r.start}):Math.abs(_)<Re&&a.push(p<0?r:{start:r.end,end:r.start})}return[t,a]}function wr(e,t){const a=new Map;for(const p of e){const _=new Me;for(const S of t){const v=ut(p,S);v&&_.add(v[1],v)}for(let S=0,v=1;v<_.values.length;v++)_.keys[v]-_.keys[S]>Re&&(a.set(_.values[S],{up:_.values[v]}),S=v)}for(const p of t){const _=new Me;for(const S of e){const v=ut(S,p);v&&_.add(v[0],v)}for(let S=0,v=1;v<_.values.length;v++)_.keys[v]-_.keys[S]>Re&&(a.set(_.values[S],{right:_.values[v]}),S=v)}const r=new Map;for(let[p,_]of a){for(const[S,v]of r)if(Ue(p,S)){p=S,_={..._,...v};break}r.set(p,_)}return r}function*Pr(e){function t(p){for(const[_,S]of e)if(Ue(_,p))return S}function a(p,_,S){for(const v of r(p,_))if(S(v,t(v)))return v}function*r(p,_){for(;p;){yield p;const S=t(p);if(!S)break;p=_(S)}}for(const[p,{up:_,right:S}]of e)if(_&&S){const v=a(S,h=>h.right,(h,m)=>!!(m&&m.up)),c=a(_,h=>h.up,(h,m)=>!!(m&&m.right));if(v&&c){const h=[...r(v,E=>E.up)],m=a(c,E=>E.right,E=>h.some(d=>Ue(E,d)));m&&(yield{lb:p,rt:m})}}}function*Fr(e,t){for(const a of e){const r=[];for(const p of t){const _=p.transform[4],S=p.transform[5];a.lb[0]<=_&&_<=a.rt[0]&&a.lb[1]<=S&&S<=a.rt[1]&&r.push(p.str)}yield{strings:r,left:a.lb[0],bottom:a.lb[1],right:a.rt[0],top:a.rt[1]}}}function*Mr(e,t){let a=Se.create(),r;const p=[],_=(v,c)=>pe.transformMat2d(pe.create(),pe.fromValues(v,c),a),S=([v,c,h,m])=>{const E=_(v+0,c+0),d=_(v+h,c+0),T=_(v+0,c+m),C=_(v+c,h+m);return[{start:E,end:d},{start:E,end:T},{start:d,end:C},{start:T,end:C}]};for(let v=0;v<e.length;v++){const c=t[v];switch(e[v]){case me.save:p.push(Se.clone(a));break;case me.restore:p.length&&(a=p.pop());break;case me.transform:const[h,m,E,d,T,C]=c;Se.multiply(a,a,Se.fromValues(h,m,E,d,T,C));break;case me.moveTo:r=_(c[0],c[1]);break;case me.lineTo:const D=_(c[0],c[1]);r&&(yield{start:r,end:D}),r=D;break;case me.rectangle:yield*S(c);break;case me.constructPath:const j=[...c[0]],w=[...c[1]];let G;for(;G=j.shift();)if(G===me.moveTo)r=_(w.shift(),w.shift());else if(G===me.lineTo){const x=_(w.shift(),w.shift());r&&(yield{start:r,end:x}),r=x}else G===me.rectangle&&(yield*S(w.splice(0,4)));break}}}function je(e){const t={};return new Proxy(t,{get(a,r){return(p={},_=[])=>{const S=e(r);for(const v in p)S.setAttribute(v,p[v]);return S.append(..._),S}}})}const Ne=ze(Oe()),dt=je(e=>document.createElementNS("http://www.w3.org/2000/svg",e)),ft=je(e=>document.createElement(e));Ne.GlobalWorkerOptions.workerSrc="./pdf.worker.js";const Lr={blobToArrayBufferAsync(e){return new Promise((t,a)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=a,r.readAsArrayBuffer(e)})}},qe=document.getElementById("fileInput"),Ir=document.getElementById("pageNumber"),Nr=document.getElementById("loadButton"),pt=document.getElementById("canv"),mt=document.getElementById("tbody");Nr.addEventListener("click",async e=>{if(e.preventDefault(),!qe.files||!qe.files.length)return;console.time();const t=+Ir.value,a=qe.files[0],r=await Lr.blobToArrayBufferAsync(a),p=await Ne.getDocument(new Uint8Array(r)).promise,_=await p.getPage(t),S=await ht(p,{pageNumber:t}),v=_.getViewport({scale:1}),c=dt.svg({viewBox:`0 0 ${v.width} ${v.height}`,style:`width: ${v.width}px; height: ${v.height}px`});mt.innerHTML="",pt.innerHTML="",pt.appendChild(c);for(let h=0;h<S.length;h++){const m=S[h],E=m.left,d=v.height-m.top,T=m.right-m.left,C=m.top-m.bottom,D=dt.rect({x:E,y:d,width:T,height:C,stroke:`hsla(${h*97%360}, 100%, 50%, 0.5)`,"stroke-width":1,fill:"transparent"}),j=ft.tr({},[h,m.strings.join(" "),E,d,T,C].map(w=>ft.td({},[w.toString()])));j.addEventListener("mouseenter",w=>D.setAttribute("fill","yellow"),!1),j.addEventListener("mouseleave",w=>D.setAttribute("fill","transparent"),!1),c.appendChild(D),mt.appendChild(j)}console.timeEnd()},!1);})();
//# sourceMappingURL=example.js.map
